import e from"react";import{Button as t,InputGroup as s,Input as a,Popover as n,PopoverHeader as r,PopoverBody as o,InputGroupAddon as i,InputGroupText as p}from"reactstrap";function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(){}function d(){}d.resetWarningCache=h;var m,g,y=(function(e){e.exports=function(){function e(e,t,s,a,n,r){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d,resetWarningCache:h};return s.PropTypes=s,s}()}(g={path:m,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&g.path)}},g.exports),g.exports);class D extends e.Component{constructor(e){super(e)}displayingMinMonth(){if(!this.props.minDate)return!1;var e=new Date(this.props.displayDate),t=new Date(this.props.minDate);return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()}displayingMaxMonth(){if(!this.props.maxDate)return!1;var e=new Date(this.props.displayDate),t=new Date(this.props.maxDate);return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()}handleClickPrevious(){var e=new Date(this.props.displayDate);e.setDate(1),e.setMonth(e.getMonth()-1),this.props.onChange(e)}handleClickNext(){var e=new Date(this.props.displayDate);e.setDate(1),e.setMonth(e.getMonth()+1),this.props.onChange(e)}render(){return e.createElement("div",{className:"rdp-header text-center"},e.createElement("div",{className:"text-muted float-left rdp-header-previous-wrapper",onClick:()=>this.handleClickPrevious(),style:{cursor:"pointer"}},this.displayingMinMonth()?null:this.props.previousButtonElement),e.createElement("span",null,this.props.monthLabels[this.props.displayDate.getMonth()]," ",this.props.displayDate.getFullYear()),e.createElement("div",{className:"text-muted float-right rdp-header-next-wrapper",onClick:()=>this.handleClickNext(),style:{cursor:"pointer"}},this.displayingMaxMonth()?null:this.props.nextButtonElement))}}D.propTypes={displayDate:y.object.isRequired,minDate:y.string,maxDate:y.string,onChange:y.func.isRequired,monthLabels:y.array.isRequired,previousButtonElement:y.oneOfType([y.string,y.object]).isRequired,nextButtonElement:y.oneOfType([y.string,y.object]).isRequired};var f=[31,28,31,30,31,30,31,31,30,31,30,31];class v extends e.Component{constructor(e){super(e)}handleClick(e){var t=e.currentTarget.getAttribute("data-day"),s=this.setTimeToNoon(new Date(this.props.displayDate));s.setDate(t),this.props.onChange(s)}handleClickToday(){var e=this.setTimeToNoon(new Date);this.props.onChange(e)}setTimeToNoon(e){return e.setHours(12),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}getWeekNumber(e){var t=new Date(e.valueOf()),s=(e.getDay()+6)%7;t.setDate(t.getDate()-s+3);var a=t.valueOf();return t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((a-t)/6048e5)}render(){var s=this.setTimeToNoon(new Date),a=this.props.selectedDate?this.setTimeToNoon(new Date(this.props.selectedDate)):null,n=this.props.minDate?this.setTimeToNoon(new Date(this.props.minDate)):null,r=this.props.maxDate?this.setTimeToNoon(new Date(this.props.maxDate)):null,o=this.props.displayDate.getFullYear(),i=this.props.displayDate.getMonth(),p=new Date(o,i,1),l=this.props.weekStartsOn>1?p.getDay()-this.props.weekStartsOn+7:1===this.props.weekStartsOn?0===p.getDay()?6:p.getDay()-1:p.getDay(),c=this.props.showWeeks,u=f[i];1==i&&(o%4==0&&o%100!=0||o%400==0)&&(u=29);for(var h=[],d=1,m=0;m<9;m++){for(var g=[],y=0;y<=6;y++)if(d<=u&&(m>0||y>=l)){var D=null,v=new Date(o,i,d,12,0,0,0).toISOString(),b=n&&Date.parse(v)<Date.parse(n),w=r&&Date.parse(v)>Date.parse(r),C=e=>this.handleClick(e),E={cursor:"pointer",padding:this.props.cellPadding,borderRadius:this.props.roundedCorners?5:0};b||w?(D="text-muted",C=null,E.cursor="default"):Date.parse(v)===Date.parse(a)?D="bg-primary":Date.parse(v)===Date.parse(s)&&(D="text-primary"),g.push(e.createElement("td",{key:y,"data-day":d,onClick:C,style:E,className:D},d)),d++}else g.push(e.createElement("td",{key:y}));if(c){var k=this.getWeekNumber(new Date(o,i,d-1,12,0,0,0));g.unshift(e.createElement("td",{key:7,style:{padding:this.props.cellPadding,fontSize:"0.8em",color:"darkgrey"},className:"text-muted"},k))}if(h.push(e.createElement("tr",{key:m},g)),d>u)break}var S=c?e.createElement("td",{className:"text-muted current-week",style:{padding:this.props.cellPadding}}):null;return e.createElement("table",{className:"rdp-calendar text-center"},e.createElement("thead",null,e.createElement("tr",null,S,this.props.dayLabels.map(((t,s)=>e.createElement("td",{key:s,className:"text-muted",style:{padding:this.props.cellPadding}},e.createElement("small",null,t)))))),e.createElement("tbody",null,h),this.props.showTodayButton&&e.createElement("tfoot",null,e.createElement("tr",null,e.createElement("td",{colSpan:this.props.dayLabels.length,style:{paddingTop:"9px"}},e.createElement(t,{block:!0,size:"sm",className:"u-today-button",onClick:()=>this.handleClickToday()},this.props.todayButtonLabel)))))}}v.propTypes={selectedDate:y.object,displayDate:y.object.isRequired,minDate:y.string,maxDate:y.string,onChange:y.func.isRequired,dayLabels:y.array.isRequired,cellPadding:y.string.isRequired,weekStartsOn:y.number,showTodayButton:y.bool,todayButtonLabel:y.string,roundedCorners:y.bool,showWeeks:y.bool};class b extends e.Component{constructor(t){if(super(t),this.props.value&&this.props.defaultValue)throw new Error("Conflicting DatePicker properties 'value' and 'defaultValue'");this._inputRef=e.createRef(),this.hiddenInputRef=e.createRef(),this.overlayContainerRef=e.createRef(),this.state=this.getInitialState(),this.idSuffix=this.makeIdSuffix()}getInitialState(){var e=this.makeDateValues(this.props.value||this.props.defaultValue);return this.props.weekStartsOn>1?e.dayLabels=this.props.dayLabels.slice(this.props.weekStartsOn).concat(this.props.dayLabels.slice(0,this.props.weekStartsOn)):1===this.props.weekStartsOn?e.dayLabels=this.props.dayLabels.slice(1).concat(this.props.dayLabels.slice(0,1)):e.dayLabels=this.props.dayLabels,e.focused=!1,e.inputFocused=!1,e.placeholder=this.props.placeholder||this.props.dateFormat,e.separator=this.props.dateFormat.match(/[^A-Z]/)[0],e}makeIdSuffix(){return null!=this.props.id&&""!=this.props.id?this.props.id:null!=this.props.name&&""!=this.props.name?this.props.name:(()=>{if("object"==typeof window){null==window._reactstrapDatePickerInstance&&(window._reactstrapDatePickerInstance=0);var e=window._reactstrapDatePickerInstance+1;return window._reactstrapDatePickerInstance=e,e}if("object"==typeof process){null==process._reactstrapDatePickerInstance&&(process._reactstrapDatePickerInstance=0);var t=process._reactstrapDatePickerInstance+1;return process._reactstrapDatePickerInstance=t,t}return console.error("Reactstrap Date Picker cannot determine environment (it is neither browser's <window> nor Node's <process>)."),1})().toString()}get inputRef(){return this.props.inputRef||this._inputRef}componentDidMount(){document.addEventListener("mousedown",this.onClickOutside.bind(this))}componentWillUnmount(){document.removeEventListener("mousedown",this.onClickOutside.bind(this))}onClickOutside(e){if(e.stopPropagation(),this.overlayContainerRef&&this.overlayContainerRef.current&&!this.overlayContainerRef.current.contains(e.target)){var t=this.inputRef&&this.inputRef.current&&this.inputRef.current.contains(e.target);if(this.setState({focused:!1,inputFocused:t}),this.props.onBlur){var s=document.createEvent("CustomEvent");s.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(s),this.props.onBlur(s)}}}makeDateValues(e){var t,s=e?new Date("".concat(e.slice(0,10),"T12:00:00.000Z")):null,a=this.props.minDate?new Date("".concat(this.props.minDate.slice(0,10),"T12:00:00.000Z")):null,n=this.props.maxDate?new Date("".concat(this.props.maxDate.slice(0,10),"T12:00:00.000Z")):null,r=e?this.makeInputValueString(s):null;if(s)t=new Date(s);else{var o=new Date("".concat((new Date).toISOString().slice(0,10),"T12:00:00.000Z"));t=a&&Date.parse(a)>=Date.parse(o)?a:n&&Date.parse(n)<=Date.parse(o)?n:o}return{value:s?s.toISOString():null,displayDate:t,selectedDate:s,inputValue:r}}clear(){this.props.onClear?this.props.onClear():this.setState(this.makeDateValues(null)),this.props.onChange&&this.props.onChange(null,null)}handleHide(){if(!this.state.inputFocused&&(this.setState({focused:!1}),this.props.onBlur)){var e=document.createEvent("CustomEvent");e.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(e),this.props.onBlur(e)}}handleKeyDown(e){if(9===e.which&&this.state.inputFocused&&(this.setState({focused:!1}),this.props.onBlur)){var t=document.createEvent("CustomEvent");t.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(t),this.props.onBlur(t)}}handleFocus(){if(!0!==this.state.focused){var e=this.getCalendarPlacement();if(this.setState({inputFocused:!0,focused:!0,calendarPlacement:e}),this.props.onFocus){var t=document.createEvent("CustomEvent");t.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(t),this.props.onFocus(t)}}}handleBlur(){this.setState({inputFocused:!1})}shouldComponentUpdate(e,t){return!(!0===this.state.inputFocused&&!1===t.inputFocused)}getValue(){return this.state.selectedDate?this.state.selectedDate.toISOString():null}getFormattedValue(){return this.state.displayDate?this.state.inputValue:null}getCalendarPlacement(){var e=Object.prototype.toString.call(this.props.calendarPlacement);return"[object AsyncFunction]"===e||"[object Function]"===e||"[object GeneratorFunction]"===e||"[object Proxy]"===e?this.props.calendarPlacement():this.props.calendarPlacement}makeInputValueString(e){var t=e.getMonth()+1,s=e.getDate(),a=this.state?this.state.separator:this.props.dateFormat.match(/[^A-Z]/)[0];return this.props.dateFormat.match(/MM.DD.YYYY/)?(t>9?t:"0".concat(t))+a+(s>9?s:"0".concat(s))+a+e.getFullYear():this.props.dateFormat.match(/DD.MM.YYYY/)?(s>9?s:"0".concat(s))+a+(t>9?t:"0".concat(t))+a+e.getFullYear():e.getFullYear()+a+(t>9?t:"0".concat(t))+a+(s>9?s:"0".concat(s))}handleBadInput(e){var t=e.replace(new RegExp("[^0-9".concat(this.state.separator,"]")),"").split(this.state.separator);this.props.dateFormat.match(/MM.DD.YYYY/)||this.props.dateFormat.match(/DD.MM.YYYY/)?(t[0]&&t[0].length>2&&(t[1]=t[0].slice(2)+(t[1]||""),t[0]=t[0].slice(0,2)),t[1]&&t[1].length>2&&(t[2]=t[1].slice(2)+(t[2]||""),t[1]=t[1].slice(0,2)),t[2]&&(t[2]=t[2].slice(0,4))):(t[0]&&t[0].length>4&&(t[1]=t[0].slice(4)+(t[1]||""),t[0]=t[0].slice(0,4)),t[1]&&t[1].length>2&&(t[2]=t[1].slice(2)+(t[2]||""),t[1]=t[1].slice(0,2)),t[2]&&(t[2]=t[2].slice(0,2))),this.setState({inputValue:t.join(this.state.separator)})}handleInputChange(){var e=this.inputRef.current.value,t=e.replace(/(-|\/\/)/g,this.state.separator).slice(0,10);if(t){var s,a,n;if(this.props.dateFormat.match(/MM.DD.YYYY/)){if(!t.match(/[0-1][0-9].[0-3][0-9].[1-2][0-9][0-9][0-9]/))return this.handleBadInput(e);s=t.slice(0,2).replace(/[^0-9]/g,""),a=t.slice(3,5).replace(/[^0-9]/g,""),n=t.slice(6,10).replace(/[^0-9]/g,"")}else if(this.props.dateFormat.match(/DD.MM.YYYY/)){if(!t.match(/[0-3][0-9].[0-1][0-9].[1-2][0-9][0-9][0-9]/))return this.handleBadInput(e);a=t.slice(0,2).replace(/[^0-9]/g,""),s=t.slice(3,5).replace(/[^0-9]/g,""),n=t.slice(6,10).replace(/[^0-9]/g,"")}else{if(!t.match(/[1-2][0-9][0-9][0-9].[0-1][0-9].[0-3][0-9]/))return this.handleBadInput(e);n=t.slice(0,4).replace(/[^0-9]/g,""),s=t.slice(5,7).replace(/[^0-9]/g,""),a=t.slice(8,10).replace(/[^0-9]/g,"")}var r=parseInt(s,10),o=parseInt(a,10),i=parseInt(n,10);if(r>12||o>31)return this.handleBadInput(e);if(!isNaN(r)&&!isNaN(o)&&!isNaN(i)&&r<=12&&o<=31&&i>999){var p=new Date(i,r-1,o,12,0,0,0);this.setState({selectedDate:p,displayDate:p,value:p.toISOString()}),this.props.onChange&&this.props.onChange(p.toISOString(),t)}this.setState({inputValue:t})}else this.clear()}onChangeMonth(e){this.setState({displayDate:e})}onChangeDate(e){var t=this.makeInputValueString(e);if(this.setState({inputValue:t,selectedDate:e,displayDate:e,value:e.toISOString(),focused:!1}),this.props.onBlur){var s=document.createEvent("CustomEvent");s.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(s),this.props.onBlur(s)}this.props.onChange&&this.props.onChange(e.toISOString(),t)}UNSAFE_componentWillReceiveProps(e){var t=e.value;this.getValue()!==t&&this.setState(this.makeDateValues(t))}renderInputGroup(t){return null!=this.props.customInputGroup?e.cloneElement(this.props.customInputGroup,{children:t}):e.createElement(s,{size:this.props.size,id:"rdp-input-group-".concat(this.idSuffix),className:"rdp-input-group".concat(this.props.invalid?" is-invalid":"").concat(this.props.valid?" is-valid":"")},t)}render(){var t=e.createElement(D,{previousButtonElement:this.props.previousButtonElement,nextButtonElement:this.props.nextButtonElement,displayDate:this.state.displayDate,minDate:this.props.minDate,maxDate:this.props.maxDate,onChange:e=>this.onChangeMonth(e),monthLabels:this.props.monthLabels,dateFormat:this.props.dateFormat}),s=e.createElement(v,{cellPadding:this.props.cellPadding,selectedDate:this.state.selectedDate,displayDate:this.state.displayDate,onChange:e=>this.onChangeDate(e),dayLabels:this.state.dayLabels,weekStartsOn:this.props.weekStartsOn,showTodayButton:this.props.showTodayButton,todayButtonLabel:this.props.todayButtonLabel,minDate:this.props.minDate,maxDate:this.props.maxDate,roundedCorners:this.props.roundedCorners,showWeeks:this.props.showWeeks}),l="rdp-form-control-".concat(this.idSuffix);null!=this.props.customControl&&this.props.customControl.props.id&&(l=this.props.customControl.props.id);var c=this.props.customControl?e.cloneElement(this.props.customControl,{id:l,onKeyDown:e=>this.handleKeyDown(e),value:this.state.inputValue||"",required:this.props.required,placeholder:this.state.focused?this.props.dateFormat:this.state.placeholder,ref:this.inputRef,disabled:this.props.disabled,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onChange:()=>this.handleInputChange(),className:"rdp-form-control ".concat(this.props.className||""," ").concat(this.props.customControl.props.className||""),style:u(u({},this.props.customControl.props.style||{}),this.props.style||{}),autoComplete:this.props.autoComplete,onInvalid:this.props.onInvalid,noValidate:this.props.noValidate}):e.createElement(a,{id:l,onKeyDown:e=>this.handleKeyDown(e),value:this.state.inputValue||"",required:this.props.required,innerRef:this.inputRef,type:"text",className:"rdp-form-control ".concat(this.props.className||""),style:this.props.style,autoFocus:this.props.autoFocus,disabled:this.props.disabled,placeholder:this.state.focused?this.props.dateFormat:this.state.placeholder,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onChange:()=>this.handleInputChange(),autoComplete:this.props.autoComplete,onInvalid:this.props.onInvalid,noValidate:this.props.noValidate});return this.renderInputGroup(e.createElement(e.Fragment,null,c,e.createElement(n,{className:"rdp-popover ".concat(this.state.calendarPlacement),toggle:()=>this.handleHide(),isOpen:this.state.focused,container:this.props.calendarContainer||this.overlayContainerRef.current,target:l,placement:this.state.calendarPlacement,delay:200},e.createElement(r,{tag:"div"},t),e.createElement(o,null,s)),e.createElement("div",{ref:this.overlayContainerRef,className:"rdp-overlay"}),e.createElement("input",{ref:this.hiddenInputRef,type:"hidden",className:"rdp-hidden",id:null!=this.props.id?this.props.id:"rdp-hidden-".concat(this.idSuffix),name:this.props.name,value:this.state.value||"","data-formattedvalue":this.state.value?this.state.inputValue:""}),this.props.showClearButton&&!this.props.customControl&&e.createElement(i,{onClick:()=>this.props.disabled?null:this.clear(),style:{cursor:this.state.inputValue&&!this.props.disabled?"pointer":"not-allowed"},addonType:"append",className:"rdp-addon"},e.createElement(p,{style:{opacity:this.state.inputValue&&!this.props.disabled?1:.5}},this.props.clearButtonElement)),this.props.children))}}b.propTypes={defaultValue:y.string,value:y.string,required:y.bool,className:y.string,style:y.object,minDate:y.string,maxDate:y.string,cellPadding:y.string,autoComplete:y.string,placeholder:y.string,dayLabels:y.array,monthLabels:y.array,onChange:y.func,onClear:y.func,onBlur:y.func,onFocus:y.func,autoFocus:y.bool,disabled:y.bool,weekStartsOn:y.number,clearButtonElement:y.oneOfType([y.string,y.object]),showClearButton:y.bool,previousButtonElement:y.oneOfType([y.string,y.object]),nextButtonElement:y.oneOfType([y.string,y.object]),calendarPlacement:y.oneOfType([y.string,y.func]),dateFormat:y.string,size:y.string,calendarContainer:y.object,id:y.string,name:y.string,showTodayButton:y.bool,todayButtonLabel:y.string,customControl:y.object,roundedCorners:y.bool,showWeeks:y.bool,children:y.oneOfType([y.arrayOf(y.node),y.node]),onInvalid:y.func,noValidate:y.bool,valid:y.bool,invalid:y.bool,customInputGroup:y.object};var w;b.defaultProps={cellPadding:"5px",dayLabels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],clearButtonElement:"×",previousButtonElement:"<",nextButtonElement:">",calendarPlacement:"bottom",dateFormat:(w="undefined"!=typeof window&&window.navigator?(window.navigator.userLanguage||window.navigator.language||"").toLowerCase():"",w&&"en-us"!==w?"DD/MM/YYYY":"MM/DD/YYYY"),showClearButton:!0,autoFocus:!1,disabled:!1,showTodayButton:!1,todayButtonLabel:"Today",autoComplete:"on",showWeeks:!1,roundedCorners:!1,noValidate:!1};export default b;
