{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\contexts\\\\GroupContext.tsx\";\nimport React, { createContext, useContext, useState } from \"react\";\nimport { useChat } from \"./ChatContext\"; //alias\n\nimport ChatType from \"../enuns/ChatType\";\nexport const GroupContext = createContext({});\nexport const GroupProvider = ({\n  children\n}) => {\n  const [groups, setGroups] = useState([]);\n  const {\n    activeChat,\n    chats,\n    setChats,\n    setActiveChat,\n    setShowChat\n  } = useChat();\n  const [memberQuit, setMemberQuit] = useState();\n  const [groupIdOfLeaveRequest, setGroupIdOfLeaveRequest] = useState();\n\n  const openGroup = obj => {\n    if ((activeChat === null || activeChat === void 0 ? void 0 : activeChat.jid) === obj.jid) return;\n    let find = false;\n    setChats(chats.map(item => {\n      if (item.jid === obj.jid) {\n        item.unRead = 0;\n        item.messageLoaded = item.messages.length >= 20 ? false : true;\n        setShowChat(true);\n        setActiveChat(item);\n        find = true;\n      }\n\n      return item;\n    }));\n\n    if (!find) {\n      let newChat = {\n        id: obj.jid.split(\"@\")[0],\n        jid: obj.jid,\n        name: obj.name,\n        profilePicture: obj.profilePicture,\n        messageLoaded: true,\n        unRead: 1,\n        chatType: ChatType.GROUP,\n        inputMessage: \"\",\n        isTyping: false,\n        messages: [],\n        favorite: obj.favorite,\n        added: obj.added,\n        members: obj.members\n      };\n      setShowChat(true);\n      setActiveChat(newChat);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(GroupContext.Provider, {\n    value: {\n      openGroup,\n      groups,\n      setGroups,\n      memberQuit,\n      setMemberQuit,\n      groupIdOfLeaveRequest,\n      setGroupIdOfLeaveRequest\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport function useGroup() {\n  return useContext(GroupContext);\n}","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/contexts/GroupContext.tsx"],"names":["React","createContext","useContext","useState","useChat","ChatType","GroupContext","GroupProvider","children","groups","setGroups","activeChat","chats","setChats","setActiveChat","setShowChat","memberQuit","setMemberQuit","groupIdOfLeaveRequest","setGroupIdOfLeaveRequest","openGroup","obj","jid","find","map","item","unRead","messageLoaded","messages","length","newChat","id","split","name","profilePicture","chatType","GROUP","inputMessage","isTyping","favorite","added","members","useGroup"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,QAA3C,QAA2D,OAA3D;AACA,SAASC,OAAT,QAAwB,eAAxB,C,CAEA;;AAEA,OAAOC,QAAP,MAAqB,mBAArB;AAaA,OAAO,MAAMC,YAAY,GAAGL,aAAa,CACvC,EADuC,CAAlC;AAIP,OAAO,MAAMM,aAAuB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AACvD,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAW,EAAX,CAApC;AACA,QAAM;AAAEQ,IAAAA,UAAF;AAAcC,IAAAA,KAAd;AAAqBC,IAAAA,QAArB;AAA+BC,IAAAA,aAA/B;AAA8CC,IAAAA;AAA9C,MAA8DX,OAAO,EAA3E;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8Bd,QAAQ,EAA5C;AACA,QAAM,CAACe,qBAAD,EAAwBC,wBAAxB,IAAoDhB,QAAQ,EAAlE;;AAEA,QAAMiB,SAAS,GAAIC,GAAD,IAAiB;AACjC,QAAI,CAAAV,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEW,GAAZ,MAAoBD,GAAG,CAACC,GAA5B,EAAiC;AACjC,QAAIC,IAAI,GAAG,KAAX;AAEAV,IAAAA,QAAQ,CACND,KAAK,CAACY,GAAN,CAAWC,IAAD,IAAU;AAClB,UAAIA,IAAI,CAACH,GAAL,KAAaD,GAAG,CAACC,GAArB,EAA0B;AACxBG,QAAAA,IAAI,CAACC,MAAL,GAAc,CAAd;AACAD,QAAAA,IAAI,CAACE,aAAL,GAAqBF,IAAI,CAACG,QAAL,CAAcC,MAAd,IAAwB,EAAxB,GAA6B,KAA7B,GAAqC,IAA1D;AACAd,QAAAA,WAAW,CAAC,IAAD,CAAX;AACAD,QAAAA,aAAa,CAACW,IAAD,CAAb;AACAF,QAAAA,IAAI,GAAG,IAAP;AACD;;AACD,aAAOE,IAAP;AACD,KATD,CADM,CAAR;;AAaA,QAAI,CAACF,IAAL,EAAW;AACT,UAAIO,OAAO,GAAG;AACZC,QAAAA,EAAE,EAAEV,GAAG,CAACC,GAAJ,CAAQU,KAAR,CAAc,GAAd,EAAmB,CAAnB,CADQ;AAEZV,QAAAA,GAAG,EAAED,GAAG,CAACC,GAFG;AAGZW,QAAAA,IAAI,EAAEZ,GAAG,CAACY,IAHE;AAIZC,QAAAA,cAAc,EAAEb,GAAG,CAACa,cAJR;AAKZP,QAAAA,aAAa,EAAE,IALH;AAMZD,QAAAA,MAAM,EAAE,CANI;AAOZS,QAAAA,QAAQ,EAAE9B,QAAQ,CAAC+B,KAPP;AAQZC,QAAAA,YAAY,EAAE,EARF;AASZC,QAAAA,QAAQ,EAAE,KATE;AAUZV,QAAAA,QAAQ,EAAE,EAVE;AAWZW,QAAAA,QAAQ,EAAElB,GAAG,CAACkB,QAXF;AAYZC,QAAAA,KAAK,EAAEnB,GAAG,CAACmB,KAZC;AAaZC,QAAAA,OAAO,EAAEpB,GAAG,CAACoB;AAbD,OAAd;AAeA1B,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAD,MAAAA,aAAa,CAACgB,OAAD,CAAb;AACD;AACF,GApCD;;AAsCA,sBACE,oBAAC,YAAD,CAAc,QAAd;AACE,IAAA,KAAK,EAAE;AACLV,MAAAA,SADK;AAELX,MAAAA,MAFK;AAGLC,MAAAA,SAHK;AAILM,MAAAA,UAJK;AAKLC,MAAAA,aALK;AAMLC,MAAAA,qBANK;AAOLC,MAAAA;AAPK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWGX,QAXH,CADF;AAeD,CA3DM;AA6DP,OAAO,SAASkC,QAAT,GAAoB;AACzB,SAAOxC,UAAU,CAACI,YAAD,CAAjB;AACD","sourcesContent":["import React, { createContext, useContext, useState } from \"react\";\r\nimport { useChat } from \"./ChatContext\";\r\n\r\n//alias\r\nimport IGroup from \"./../alias/IGroup\";\r\nimport ChatType from \"../enuns/ChatType\";\r\nimport IMember from \"../alias/IMember\";\r\n\r\ninterface IGroupContextData {\r\n  openGroup(obj: IGroup): void;\r\n  groups: IGroup[];\r\n  setGroups(value: IGroup[]): void;\r\n  memberQuit : IMember | undefined;\r\n  setMemberQuit(value: IMember | undefined): void;\r\n  groupIdOfLeaveRequest : string;\r\n  setGroupIdOfLeaveRequest(value: string): void;\r\n}\r\n\r\nexport const GroupContext = createContext<IGroupContextData>(\r\n  {} as IGroupContextData\r\n);\r\n\r\nexport const GroupProvider: React.FC = ({ children }) => {\r\n  const [groups, setGroups] = useState<IGroup[]>([]);\r\n  const { activeChat, chats, setChats, setActiveChat, setShowChat } = useChat();\r\n  const [memberQuit, setMemberQuit] = useState<IMember | undefined>();\r\n  const [groupIdOfLeaveRequest, setGroupIdOfLeaveRequest] = useState<string>();\r\n\r\n  const openGroup = (obj: IGroup) => {\r\n    if (activeChat?.jid === obj.jid) return;\r\n    let find = false;\r\n\r\n    setChats(\r\n      chats.map((item) => {\r\n        if (item.jid === obj.jid) {\r\n          item.unRead = 0;\r\n          item.messageLoaded = item.messages.length >= 20 ? false : true;\r\n          setShowChat(true);\r\n          setActiveChat(item);\r\n          find = true;\r\n        }\r\n        return item;\r\n      })\r\n    );\r\n\r\n    if (!find) {\r\n      let newChat = {\r\n        id: obj.jid.split(\"@\")[0],\r\n        jid: obj.jid,\r\n        name: obj.name,\r\n        profilePicture: obj.profilePicture,\r\n        messageLoaded: true,\r\n        unRead: 1,\r\n        chatType: ChatType.GROUP,\r\n        inputMessage: \"\",\r\n        isTyping: false,\r\n        messages: [],\r\n        favorite: obj.favorite,\r\n        added: obj.added,\r\n        members: obj.members,\r\n      };\r\n      setShowChat(true);\r\n      setActiveChat(newChat);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <GroupContext.Provider\r\n      value={{\r\n        openGroup,\r\n        groups,\r\n        setGroups,\r\n        memberQuit,\r\n        setMemberQuit,\r\n        groupIdOfLeaveRequest,\r\n        setGroupIdOfLeaveRequest\r\n      }}\r\n    >\r\n      {children}\r\n    </GroupContext.Provider>\r\n  );\r\n};\r\n\r\nexport function useGroup() {\r\n  return useContext(GroupContext);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}