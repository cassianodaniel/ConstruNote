{"ast":null,"code":"import React from\"react\";import{Input,UncontrolledTooltip,Label}from\"reactstrap\";import{useAuth}from\"../contexts/AuthContext\";import{useChat}from\"../contexts/ChatContext\";import DeliverStatus from\"../enuns/DeliverStatus\";import ReadStatus from\"../enuns/ReadStatus\";import{useTranslation}from\"react-i18next\";import Swal from'sweetalert2';var ChatInputAttachedFileButton=function ChatInputAttachedFileButton(){var _useChat=useChat(),chats=_useChat.chats,setChats=_useChat.setChats,activeChat=_useChat.activeChat;var _useAuth=useAuth(),user=_useAuth.user;var handleFileChange=function handleFileChange(e){var files=e.target.files;if((files===null||files===void 0?void 0:files.length)===0)return;var file=files===null||files===void 0?void 0:files.item(0);if(file&&file.size>15728640){Swal.fire({icon:'error',title:'Oops...',text:'File size must be less than 15mb!',footer:'',customClass:{popup:\"swal-mini-popup-file-size\"}});return;}if(file){onAddFile(file);}};var _useTranslation=useTranslation(),t=_useTranslation.t;var onAddFile=function onAddFile(file){console.log(file);setChats(chats.map(function(cht){if(activeChat)if(cht.id===(activeChat===null||activeChat===void 0?void 0:activeChat.id)){var _activeChat$attachedF;cht.messages.push({id:\"\".concat(cht.messages.length+1),userName:user.name,message:\"Carregando...\",time:\"\",isImageMessage:false,isFileMessage:false,isVideoMessage:false,isAudioMessage:false,fileUrl:\"\",sendFile:file,toUser:activeChat.id,fromUser:user.id,deliverStatus:DeliverStatus.SENDING,readStatus:ReadStatus.UNREAD,deliverTimestamp:\"\",readTimestamp:\"\",content:\"metadata\",contentType:\"type\",isReplyMessage:false,isForwardMessage:false});(_activeChat$attachedF=activeChat.attachedFileList)===null||_activeChat$attachedF===void 0?void 0:_activeChat$attachedF.push();}return cht;}));};return/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item input-file\"},/*#__PURE__*/React.createElement(Label,{id:\"files\",className:\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-attachment-line\"}),/*#__PURE__*/React.createElement(Input,{onChange:handleFileChange,type:\"file\",name:\"fileInput\"})),/*#__PURE__*/React.createElement(UncontrolledTooltip,{target:\"files\",placement:\"top\"},t(\"Attach File\")));};export default ChatInputAttachedFileButton;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatInputAttachedFileButton.tsx"],"names":["React","Input","UncontrolledTooltip","Label","useAuth","useChat","DeliverStatus","ReadStatus","useTranslation","Swal","ChatInputAttachedFileButton","chats","setChats","activeChat","user","handleFileChange","e","files","target","length","file","item","size","fire","icon","title","text","footer","customClass","popup","onAddFile","t","console","log","map","cht","id","messages","push","userName","name","message","time","isImageMessage","isFileMessage","isVideoMessage","isAudioMessage","fileUrl","sendFile","toUser","fromUser","deliverStatus","SENDING","readStatus","UNREAD","deliverTimestamp","readTimestamp","content","contentType","isReplyMessage","isForwardMessage","attachedFileList"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Input, UncontrolledTooltip, Label } from \"reactstrap\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport DeliverStatus from \"../enuns/DeliverStatus\";\r\nimport ReadStatus from \"../enuns/ReadStatus\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Swal from 'sweetalert2'\r\n\r\nconst ChatInputAttachedFileButton: React.FC = () => {\r\n  const { chats, setChats, activeChat } = useChat();\r\n  const { user } = useAuth();\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let files = e.target.files;\r\n    if (files?.length === 0) return;\r\n    let file = files?.item(0);\r\n    if (file && file.size > 15728640) {\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Oops...',\r\n        text: 'File size must be less than 15mb!',\r\n        footer: '',\r\n        customClass: {\r\n          popup: \"swal-mini-popup-file-size\"\r\n        }\r\n      })\r\n      return;\r\n    }\r\n\r\n    if (file) {\r\n      onAddFile(file);\r\n    }\r\n  };\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const onAddFile = (file: File) => {\r\n    console.log(file);\r\n    setChats(\r\n      chats.map((cht) => {\r\n        if (activeChat)\r\n          if (cht.id === activeChat?.id) {\r\n            cht.messages.push({\r\n              id: `${cht.messages.length + 1}`,\r\n              userName: user.name,\r\n              message: \"Carregando...\",\r\n              time: \"\",\r\n              isImageMessage: false,\r\n              isFileMessage: false,\r\n              isVideoMessage: false,\r\n              isAudioMessage: false,\r\n              fileUrl: \"\",\r\n              sendFile: file,\r\n              toUser: activeChat.id,\r\n              fromUser: user.id,\r\n              deliverStatus: DeliverStatus.SENDING,\r\n              readStatus: ReadStatus.UNREAD,\r\n              deliverTimestamp: \"\",\r\n              readTimestamp: \"\",\r\n              content: \"metadata\",\r\n              contentType: \"type\",\r\n              isReplyMessage: false,\r\n              isForwardMessage: false,\r\n            });\r\n            activeChat.attachedFileList?.push();\r\n          }\r\n        return cht;\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <li className=\"list-inline-item input-file\">\r\n      <Label\r\n        id=\"files\"\r\n        className=\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\"\r\n      >\r\n        <i className=\"ri-attachment-line\"></i>\r\n        <Input onChange={handleFileChange} type=\"file\" name=\"fileInput\" />\r\n      </Label>\r\n      <UncontrolledTooltip target=\"files\" placement=\"top\">\r\n        {t(\"Attach File\")}\r\n      </UncontrolledTooltip>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ChatInputAttachedFileButton;\r\n"]},"metadata":{},"sourceType":"module"}