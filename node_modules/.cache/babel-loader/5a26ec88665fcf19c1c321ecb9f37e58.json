{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\components\\\\ChatInputAttachFileButton.tsx\";\nimport React, { useState } from \"react\";\nimport { Input, UncontrolledTooltip, Label, Button } from \"reactstrap\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useChat } from \"../contexts/ChatContext\";\nimport DeliverStatus from \"../enuns/DeliverStatus\";\nimport ReadStatus from \"../enuns/ReadStatus\";\nimport { useTranslation } from \"react-i18next\";\nimport Lightbox from \"react-image-lightbox\";\nimport Swal from 'sweetalert2';\n\nconst ChatInputAttachedFileButton = () => {\n  const {\n    chats,\n    setChats,\n    activeChat\n  } = useChat();\n  const {\n    user\n  } = useAuth();\n  const [fileStorage, setFileStorage] = useState();\n  const editButtons = [/*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"ril__toolbarItemChild\",\n    style: {\n      paddingTop: 6\n    },\n    onClick: () => {\n      if (fileStorage) {\n        onAddMessage(fileStorage);\n      }\n\n      setIsOpen(!isOpen);\n      setFileStorage(undefined);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }\n  }, \"Send\")];\n\n  const previewFileSending = e => {\n    let files = e.target.files;\n    if ((files === null || files === void 0 ? void 0 : files.length) === 0) return;\n    let file = files === null || files === void 0 ? void 0 : files.item(0);\n\n    if (file && file.size > 15728640) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: 'Tamanho de arquivo não suportado. Por favor envie um arquivo com menos de 15mb!',\n        //decidir viés internacionalização\n        footer: ''\n      });\n      return;\n    } else {\n      if (e.target.files) {\n        setFileStorage(URL.createObjectURL(e.target.files[0]));\n        setFileStorage(URL.createObjectURL(e.target.files[0]));\n        console.log(URL.createObjectURL(e.target.files[0]));\n        toggleLightbox(fileStorage);\n      }\n    }\n  };\n\n  const {\n    t\n  } = useTranslation();\n\n  const onAddMessage = file => {\n    setChats(chats.map(item => {\n      if (activeChat) if (item.id === (activeChat === null || activeChat === void 0 ? void 0 : activeChat.id)) {\n        item.messages.push({\n          id: `${item.messages.length + 1}`,\n          userName: user.name,\n          message: \"Carregando...\",\n          time: \"\",\n          isImageMessage: false,\n          isFileMessage: false,\n          isVideoMessage: false,\n          isAudioMessage: false,\n          fileUrl: \"\",\n          sendFile: file,\n          toUser: activeChat.id,\n          fromUser: user.id,\n          deliverStatus: DeliverStatus.SENDING,\n          readStatus: ReadStatus.UNREAD,\n          deliverTimestamp: \"\",\n          readTimestamp: \"\",\n          content: \"metadata\",\n          contentType: \"type\",\n          isReplyMessage: false,\n          isForwardMessage: false\n        });\n      }\n      return item;\n    }));\n  };\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentImage, setCurrentImage] = useState(\"null\");\n\n  const toggleLightbox = currentImage => {\n    setIsOpen(!isOpen);\n    setCurrentImage(currentImage);\n  }; //chamar a mesma lightbox no ctrl+v também\n\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item input-file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    id: \"files\",\n    className: \"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-attachment-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onChange: previewFileSending,\n    type: \"file\",\n    name: \"fileInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(UncontrolledTooltip, {\n    target: \"files\",\n    placement: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, t(\"Attach File\")), isOpen && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Lightbox, {\n    mainSrc: currentImage,\n    onCloseRequest: toggleLightbox,\n    imageTitle: \"Image File\",\n    enableZoom: true,\n    toolbarButtons: [editButtons],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ChatInputAttachedFileButton;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatInputAttachFileButton.tsx"],"names":["React","useState","Input","UncontrolledTooltip","Label","Button","useAuth","useChat","DeliverStatus","ReadStatus","useTranslation","Lightbox","Swal","ChatInputAttachedFileButton","chats","setChats","activeChat","user","fileStorage","setFileStorage","editButtons","paddingTop","onAddMessage","setIsOpen","isOpen","undefined","previewFileSending","e","files","target","length","file","item","size","fire","icon","title","text","footer","URL","createObjectURL","console","log","toggleLightbox","t","map","id","messages","push","userName","name","message","time","isImageMessage","isFileMessage","isVideoMessage","isAudioMessage","fileUrl","sendFile","toUser","fromUser","deliverStatus","SENDING","readStatus","UNREAD","deliverTimestamp","readTimestamp","content","contentType","isReplyMessage","isForwardMessage","currentImage","setCurrentImage"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Input, UncontrolledTooltip, Label, Button } from \"reactstrap\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport DeliverStatus from \"../enuns/DeliverStatus\";\r\nimport ReadStatus from \"../enuns/ReadStatus\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Lightbox from \"react-image-lightbox\";\r\nimport Swal from 'sweetalert2';\r\n\r\nconst ChatInputAttachedFileButton: React.FC = () => {\r\n  const { chats, setChats, activeChat } = useChat();\r\n  const { user } = useAuth();\r\n  const [fileStorage, setFileStorage] = useState<any>();\r\n\r\n  const editButtons = [\r\n    (\r\n      <Button\r\n        type=\"button\"\r\n        className=\"ril__toolbarItemChild\"\r\n        style={{\r\n          paddingTop: 6,\r\n        }}\r\n        \r\n        onClick={() => {\r\n            if(fileStorage){\r\n              onAddMessage(fileStorage);\r\n            }\r\n            setIsOpen(!isOpen);\r\n            setFileStorage(undefined);\r\n        }}\r\n        >Send</Button>\r\n    ),\r\n  ];\r\n  \r\n  const previewFileSending = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let files = e.target.files;\r\n    if(files?.length === 0) return;\r\n    let file = files?.item(0);\r\n    if (file && file.size > 15728640) {\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Oops...',\r\n        text: 'Tamanho de arquivo não suportado. Por favor envie um arquivo com menos de 15mb!', //decidir viés internacionalização\r\n        footer: ''\r\n      })\r\n      return;\r\n    }else{\r\n      if(e.target.files){\r\n        setFileStorage(URL.createObjectURL(e.target.files[0]));\r\n        setFileStorage(URL.createObjectURL(e.target.files[0]));\r\n        console.log(URL.createObjectURL(e.target.files[0]));\r\n        toggleLightbox(fileStorage);\r\n      }\r\n    }\r\n  }\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const onAddMessage = (file: File) => {\r\n    setChats(\r\n      chats.map((item) => {\r\n        if (activeChat)\r\n          if (item.id === activeChat?.id) {\r\n            item.messages.push({\r\n              id: `${item.messages.length + 1}`,\r\n              userName: user.name,\r\n              message: \"Carregando...\",\r\n              time: \"\",\r\n              isImageMessage: false,\r\n              isFileMessage: false,\r\n              isVideoMessage: false,\r\n              isAudioMessage: false,\r\n              fileUrl: \"\",\r\n              sendFile: file,\r\n              toUser: activeChat.id,\r\n              fromUser: user.id,\r\n              deliverStatus: DeliverStatus.SENDING,\r\n              readStatus: ReadStatus.UNREAD,\r\n              deliverTimestamp: \"\",\r\n              readTimestamp: \"\",\r\n              content: \"metadata\",\r\n              contentType: \"type\",\r\n              isReplyMessage: false,\r\n              isForwardMessage: false,\r\n            });\r\n          }\r\n        return item;\r\n      })\r\n    );\r\n  };\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [currentImage, setCurrentImage] = useState(\"null\");\r\n  const toggleLightbox: any = (currentImage: any) => {\r\n    setIsOpen(!isOpen);\r\n    setCurrentImage(currentImage);\r\n  };\r\n\r\n  //chamar a mesma lightbox no ctrl+v também\r\n\r\n  return (\r\n    <li className=\"list-inline-item input-file\">\r\n      <Label\r\n        id=\"files\"\r\n        className=\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\"\r\n      >\r\n        <i className=\"ri-attachment-line\"></i>\r\n        <Input onChange={previewFileSending} type=\"file\" name=\"fileInput\" />\r\n      </Label>\r\n      <UncontrolledTooltip target=\"files\" placement=\"top\">\r\n        {t(\"Attach File\")}\r\n      </UncontrolledTooltip>\r\n      {isOpen && (\r\n        <>\r\n        <Lightbox\r\n          mainSrc={currentImage}\r\n          onCloseRequest={toggleLightbox}\r\n          imageTitle=\"Image File\"\r\n          enableZoom={true}\r\n          toolbarButtons={[\r\n            editButtons\r\n          ]}\r\n        />\r\n        </>\r\n      )}\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ChatInputAttachedFileButton;\r\n"]},"metadata":{},"sourceType":"module"}