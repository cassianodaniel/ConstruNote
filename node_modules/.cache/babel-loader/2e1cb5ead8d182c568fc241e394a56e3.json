{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\components\\\\ChatHeadConference.tsx\";\nimport React, { useState } from \"react\";\nimport { Media, Button, Row, Col } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useChat } from \"../contexts/ChatContext\";\nimport { useTranslation } from \"react-i18next\";\nimport ReactImageFallback from \"react-image-fallback\";\nimport defaultAvatar from \"../assets/images/default.png\";\nimport { onImgError } from \"../helpers/ImageUtils\";\nimport { useGroup } from \"../contexts/GroupContext\";\nimport { useContact } from \"../contexts/ContactContext\";\nimport { zeroLeft } from \"../helpers/zeroLeft\";\nimport { useCall } from \"../contexts/CallContext\";\nimport CallStatus from \"../enuns/CallStatus\";\n\nconst ChatHeadConference = ({\n  chatProfileSidebarOpen,\n  setChatProfileSidebarOpen\n}) => {\n  const {\n    chats,\n    activeChat,\n    setChats,\n    setShowChat\n  } = useChat();\n  const {\n    groups,\n    setGroups\n  } = useGroup();\n  const {\n    contacts,\n    setContacts\n  } = useContact();\n  const {\n    currentCalls\n  } = useCall();\n  const [callInWait, setCallInWait] = useState(false);\n  const [mute, setMute] = useState(false);\n  const [video, setVideo] = useState(false);\n\n  const ChatProfileSidebar = () => {\n    setChatProfileSidebarOpen(!chatProfileSidebarOpen);\n  };\n\n  function closeUserChat() {\n    setShowChat(false);\n  }\n\n  function segundosParaHora(sec) {\n    var horas = Math.floor(sec / (60 * 60));\n    var resto = sec % (60 * 60);\n    var minutos = Math.floor(sec / 60);\n    resto %= 60;\n    var segundos = Math.ceil(resto);\n    return `${zeroLeft(horas, 2)}:${zeroLeft(minutos, 2)}:${zeroLeft(segundos, 2)}`;\n  }\n\n  const {\n    t\n  } = useTranslation();\n  const currentCall = Array.from(currentCalls.values()).find(call => {\n    var _call$callerObject;\n\n    return ((_call$callerObject = call.callerObject) === null || _call$callerObject === void 0 ? void 0 : _call$callerObject.jid) === activeChat.jid;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-3 border-bottom\",\n    style: {\n      backgroundColor: \"#e6ebf5\",\n      height: \"89px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 4,\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Media, {\n    className: \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-block d-lg-none mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: () => closeUserChat(),\n    className: \"user-chat-remove text-muted font-size-16 p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-arrow-left-s-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }\n  }))), activeChat.profilePicture ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ReactImageFallback, {\n    src: activeChat.profilePicture,\n    onError: () => {\n      if (activeChat.jid.includes(\"@conference.\")) onImgError(chats, groups, contacts, setChats, setGroups, setContacts, activeChat);\n    },\n    style: {\n      maxHeight: \"40px\",\n      maxWidth: \"40px\"\n    },\n    fallbackImage: defaultAvatar,\n    className: \"rounded-circle avatar-lg img-thumbnail\",\n    alt: \"chatvia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-user-img align-self-center mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatar-xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"avatar-title rounded-circle bg-soft-primary text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, activeChat.name.trim().charAt(0)))), /*#__PURE__*/React.createElement(Media, {\n    body: true,\n    className: \"overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-size-16 mb-0 text-truncate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: () => ChatProfileSidebar(),\n    className: \"text-reset user-profile-show\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 23\n    }\n  }, activeChat.name), (currentCall === null || currentCall === void 0 ? void 0 : currentCall.isGroup) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-muted h7 mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, \"Kaline, Vinicius, Lucas, Romero, Daniel e 2+\"))))))), /*#__PURE__*/React.createElement(Col, {\n    sm: 8,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-inline user-chat-nav text-right mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, (currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.CONNECTING && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, t(\"Connecting...\")), (currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.CALLING && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, t(\"Calling...\")), (currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.ON_GOING && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 23\n    }\n  }, t(\"Call In Progress\")), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 d-flex justify-content-center align-items-center\",\n    style: {\n      width: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 23\n    }\n  }, segundosParaHora((currentCall === null || currentCall === void 0 ? void 0 : currentCall.seconds) ? currentCall === null || currentCall === void 0 ? void 0 : currentCall.seconds : 0))))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => (currentCall === null || currentCall === void 0 ? void 0 : currentCall.endCall) && currentCall.endCall(),\n    className: \"nav-btn user-profile-show btn-head-conference red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-phone-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => {\n      if (mute) currentCall === null || currentCall === void 0 ? void 0 : currentCall.unMuteMic();else currentCall === null || currentCall === void 0 ? void 0 : currentCall.muteMic();\n      setMute(!mute);\n    },\n    className: `nav-btn user-profile-show btn-head-conference ${mute ? \"red\" : \"white\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, !mute ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-mic-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-mic-off-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => {\n      setCallInWait(!callInWait);\n    },\n    className: `nav-btn user-profile-show btn-head-conference ${callInWait ? \"red\" : \"white\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, callInWait ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-play-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-pause-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => {\n      if (currentCall === null || currentCall === void 0 ? void 0 : currentCall.sendingVideo) {\n        if (video) currentCall === null || currentCall === void 0 ? void 0 : currentCall.enableCam();else currentCall === null || currentCall === void 0 ? void 0 : currentCall.disableCam();\n        setVideo(!video);\n      } else {\n        alert(\"Mudança de tipo de chamada ainda não está disponivel :(\");\n      }\n    },\n    className: \"nav-btn user-profile-show btn-head-conference white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-vidicon-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => ChatProfileSidebar(),\n    className: \"nav-btn user-profile-show d-flex justify-content-center align-items-center h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-user-2-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default ChatHeadConference;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatHeadConference.tsx"],"names":["React","useState","Media","Button","Row","Col","Link","useChat","useTranslation","ReactImageFallback","defaultAvatar","onImgError","useGroup","useContact","zeroLeft","useCall","CallStatus","ChatHeadConference","chatProfileSidebarOpen","setChatProfileSidebarOpen","chats","activeChat","setChats","setShowChat","groups","setGroups","contacts","setContacts","currentCalls","callInWait","setCallInWait","mute","setMute","video","setVideo","ChatProfileSidebar","closeUserChat","segundosParaHora","sec","horas","Math","floor","resto","minutos","segundos","ceil","t","currentCall","Array","from","values","find","call","callerObject","jid","backgroundColor","height","profilePicture","includes","maxHeight","maxWidth","name","trim","charAt","isGroup","callStatus","CONNECTING","CALLING","ON_GOING","width","seconds","endCall","unMuteMic","muteMic","sendingVideo","enableCam","disableCam","alert"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Media, Button, Row, Col } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport ReactImageFallback from \"react-image-fallback\";\r\nimport defaultAvatar from \"../assets/images/default.png\";\r\nimport { onImgError } from \"../helpers/ImageUtils\";\r\nimport { useGroup } from \"../contexts/GroupContext\";\r\nimport { useContact } from \"../contexts/ContactContext\";\r\nimport { zeroLeft } from \"../helpers/zeroLeft\";\r\nimport { useCall } from \"../contexts/CallContext\";\r\nimport CallStatus from \"../enuns/CallStatus\";\r\n\r\ninterface IProps {\r\n  chatProfileSidebarOpen: boolean;\r\n  setChatProfileSidebarOpen(value: boolean): void;\r\n}\r\n\r\nconst ChatHeadConference: React.FC<IProps> = ({\r\n  chatProfileSidebarOpen,\r\n  setChatProfileSidebarOpen,\r\n}) => {\r\n  const { chats, activeChat, setChats, setShowChat } = useChat();\r\n  const { groups, setGroups } = useGroup();\r\n  const { contacts, setContacts } = useContact();\r\n  const { currentCalls } = useCall();\r\n\r\n  const [callInWait, setCallInWait] = useState(false);\r\n  const [mute, setMute] = useState(false);\r\n  const [video, setVideo] = useState(false);\r\n\r\n  const ChatProfileSidebar = () => {\r\n    setChatProfileSidebarOpen(!chatProfileSidebarOpen);\r\n  };\r\n\r\n  function closeUserChat() {\r\n    setShowChat(false);\r\n  }\r\n\r\n  function segundosParaHora(sec: number) {\r\n    var horas = Math.floor(sec / (60 * 60));\r\n\r\n    var resto = sec % (60 * 60);\r\n    var minutos = Math.floor(sec / 60);\r\n\r\n    resto %= 60;\r\n    var segundos = Math.ceil(resto);\r\n\r\n    return `${zeroLeft(horas, 2)}:${zeroLeft(minutos, 2)}:${zeroLeft(\r\n      segundos,\r\n      2\r\n    )}`;\r\n  }\r\n\r\n  const { t } = useTranslation();\r\n  const currentCall = Array.from(currentCalls.values()).find(\r\n    (call) => call.callerObject?.jid === activeChat.jid\r\n  );\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        className=\"p-3 border-bottom\"\r\n        style={{ backgroundColor: \"#e6ebf5\", height: \"89px\" }}\r\n      >\r\n        <Row className=\"align-items-center\">\r\n          <Col sm={4} xs={8}>\r\n            <Media className=\"align-items-center\">\r\n              <div className=\"d-block d-lg-none mr-2\">\r\n                <Link\r\n                  to=\"#\"\r\n                  onClick={() => closeUserChat()}\r\n                  className=\"user-chat-remove text-muted font-size-16 p-2\"\r\n                >\r\n                  <i className=\"ri-arrow-left-s-line\"></i>\r\n                </Link>\r\n              </div>\r\n              {activeChat.profilePicture ? (\r\n                <div className=\"mr-3\">\r\n                  <ReactImageFallback\r\n                    src={activeChat.profilePicture}\r\n                    onError={() => {\r\n                      if (activeChat.jid.includes(\"@conference.\"))\r\n                        onImgError(\r\n                          chats,\r\n                          groups,\r\n                          contacts,\r\n                          setChats,\r\n                          setGroups,\r\n                          setContacts,\r\n                          activeChat\r\n                        );\r\n                    }}\r\n                    style={{ maxHeight: \"40px\", maxWidth: \"40px\" }}\r\n                    fallbackImage={defaultAvatar}\r\n                    className=\"rounded-circle avatar-lg img-thumbnail\"\r\n                    alt=\"chatvia\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"chat-user-img align-self-center mr-3\">\r\n                  <div className=\"avatar-xs\">\r\n                    <span className=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n                      {activeChat.name.trim().charAt(0)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <Media body className=\"overflow-hidden\">\r\n                <h5 className=\"font-size-16 mb-0 text-truncate\">\r\n                  <Link\r\n                    to=\"#\"\r\n                    onClick={() => ChatProfileSidebar()}\r\n                    className=\"text-reset user-profile-show\"\r\n                  >\r\n                    <div className=\"p-1\">\r\n                      <div>{activeChat.name}</div>\r\n                      {currentCall?.isGroup && (\r\n                        <div className=\"text-muted h7 mt-1\">\r\n                          Kaline, Vinicius, Lucas, Romero, Daniel e 2+\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </Link>\r\n                </h5>\r\n              </Media>\r\n            </Media>\r\n          </Col>\r\n          <Col sm={8} xs={4}>\r\n            <ul className=\"list-inline user-chat-nav text-right mb-0\">\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <div className=\"d-flex justify-content-center align-items-center\">\r\n                  {currentCall?.callStatus === CallStatus.CONNECTING && (\r\n                    <span className=\"h4 mr-3\">{t(\"Connecting...\")}</span>\r\n                  )}\r\n                  {currentCall?.callStatus === CallStatus.CALLING && (\r\n                    <span className=\"h4 mr-3\">{t(\"Calling...\")}</span>\r\n                  )}\r\n                  {currentCall?.callStatus === CallStatus.ON_GOING && (\r\n                    <>\r\n                      <span className=\"h4 mr-3\">{t(\"Call In Progress\")}</span>\r\n                      <span\r\n                        className=\"h4 d-flex justify-content-center align-items-center\"\r\n                        style={{ width: \"100px\" }}\r\n                      >\r\n                        {segundosParaHora(\r\n                          currentCall?.seconds ? currentCall?.seconds : 0\r\n                        )}\r\n                      </span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </li>\r\n              <li className=\"list-inline-item d-none d-lg-inline-block ml-3\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => currentCall?.endCall && currentCall.endCall()}\r\n                  className=\"nav-btn user-profile-show btn-head-conference red\"\r\n                >\r\n                  <i className=\"ri-phone-line\"></i>\r\n                </Button>\r\n              </li>\r\n\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    if (mute) currentCall?.unMuteMic();\r\n                    else currentCall?.muteMic();\r\n                    setMute(!mute);\r\n                  }}\r\n                  className={`nav-btn user-profile-show btn-head-conference ${\r\n                    mute ? \"red\" : \"white\"\r\n                  }`}\r\n                >\r\n                  {!mute ? (\r\n                    <i className=\"ri-mic-line\"></i>\r\n                  ) : (\r\n                    <i className=\"ri-mic-off-line\"></i>\r\n                  )}\r\n                </Button>\r\n              </li>\r\n\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    setCallInWait(!callInWait);\r\n                  }}\r\n                  className={`nav-btn user-profile-show btn-head-conference ${\r\n                    callInWait ? \"red\" : \"white\"\r\n                  }`}\r\n                >\r\n                  {callInWait ? (\r\n                    <i className=\"ri-play-line\"></i>\r\n                  ) : (\r\n                    <i className=\"ri-pause-line\"></i>\r\n                  )}\r\n                </Button>\r\n              </li>\r\n\r\n              <li className=\"list-inline-item d-none d-lg-inline-block mr-3\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    if (currentCall?.sendingVideo) {\r\n                      if (video) currentCall?.enableCam();\r\n                      else currentCall?.disableCam();\r\n                      setVideo(!video);\r\n                    } else {\r\n                      alert(\r\n                        \"Mudança de tipo de chamada ainda não está disponivel :(\"\r\n                      );\r\n                    }\r\n                  }}\r\n                  className=\"nav-btn user-profile-show btn-head-conference white\"\r\n                >\r\n                  <i className=\"ri-vidicon-line\"></i>\r\n                </Button>\r\n              </li>\r\n\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => ChatProfileSidebar()}\r\n                  className=\"nav-btn user-profile-show d-flex justify-content-center align-items-center h-100\"\r\n                >\r\n                  <i className=\"ri-user-2-line\"></i>\r\n                </Button>\r\n              </li>\r\n            </ul>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ChatHeadConference;\r\n"]},"metadata":{},"sourceType":"module"}