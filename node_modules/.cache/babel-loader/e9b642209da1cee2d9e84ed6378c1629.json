{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\contexts\\\\GroupContext.tsx\";\nimport React, { createContext, useContext, useState } from \"react\";\nimport { useChat } from \"./ChatContext\"; //alias\n\nimport ChatType from \"../enuns/ChatType\";\nexport const GroupContext = createContext({});\nexport const GroupProvider = ({\n  children\n}) => {\n  const [groups, setGroups] = useState([]);\n  const {\n    activeChat,\n    chats,\n    setChats,\n    setActiveChat,\n    setShowChat\n  } = useChat();\n  const [memberQuit, setMemberQuit] = useState();\n  const [groupIdOfLeaveRequest, setGroupIdOfLeaveRequest] = useState('');\n  const [groupToRemoveContact, setGroupToRemoveContact] = useState();\n  const [removedMember, setRemovedMember] = useState();\n  const [members, setMembers] = useState(undefined);\n  const [toggleMemberRole, setToggleMemberRole] = useState(undefined);\n  const [changeGroupData, setChangeGroupData] = useState(undefined);\n  const [groupToCreate, setGroupToCreate] = useState(undefined);\n\n  const openGroup = obj => {\n    if ((activeChat === null || activeChat === void 0 ? void 0 : activeChat.jid) === obj.jid) return;\n    let find = false;\n    setChats(chats.map(item => {\n      if (item.jid === obj.jid) {\n        item.unRead = 0;\n        item.messageLoaded = item.messages.length >= 20 ? false : true;\n        setShowChat(true);\n        setActiveChat(item);\n        find = true;\n      }\n\n      return item;\n    }));\n\n    if (!find) {\n      let newChat = {\n        id: obj.jid.split(\"@\")[0],\n        jid: obj.jid,\n        name: obj.name,\n        profilePicture: obj.profilePicture,\n        messageLoaded: true,\n        unRead: 1,\n        chatType: ChatType.GROUP,\n        inputMessage: \"\",\n        isTyping: false,\n        messages: [],\n        favorite: obj.favorite,\n        added: obj.added,\n        members: obj.members\n      };\n      setShowChat(true);\n      setActiveChat(newChat);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(GroupContext.Provider, {\n    value: {\n      openGroup,\n      groups,\n      setGroups,\n      memberQuit,\n      setMemberQuit,\n      groupIdOfLeaveRequest,\n      setGroupIdOfLeaveRequest,\n      groupToRemoveContact,\n      setGroupToRemoveContact,\n      removedMember,\n      setRemovedMember,\n      members,\n      setMembers,\n      toggleMemberRole,\n      setToggleMemberRole,\n      changeGroupData,\n      setChangeGroupData,\n      groupToCreate,\n      setGroupToCreate\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport function useGroup() {\n  return useContext(GroupContext);\n}","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/contexts/GroupContext.tsx"],"names":["React","createContext","useContext","useState","useChat","ChatType","GroupContext","GroupProvider","children","groups","setGroups","activeChat","chats","setChats","setActiveChat","setShowChat","memberQuit","setMemberQuit","groupIdOfLeaveRequest","setGroupIdOfLeaveRequest","groupToRemoveContact","setGroupToRemoveContact","removedMember","setRemovedMember","members","setMembers","undefined","toggleMemberRole","setToggleMemberRole","changeGroupData","setChangeGroupData","groupToCreate","setGroupToCreate","openGroup","obj","jid","find","map","item","unRead","messageLoaded","messages","length","newChat","id","split","name","profilePicture","chatType","GROUP","inputMessage","isTyping","favorite","added","useGroup"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useState } from \"react\";\r\nimport { useChat } from \"./ChatContext\";\r\n\r\n//alias\r\nimport IGroup from \"./../alias/IGroup\";\r\nimport ChatType from \"../enuns/ChatType\";\r\nimport IMember from \"../alias/IMember\";\r\nimport UserType from \"../enuns/UserType\";\r\nimport INewGroup from '../alias/INewGroup';\r\n\r\n\r\ninterface IGroupContextData {\r\n  openGroup(obj: IGroup): void;\r\n  groups: IGroup[];\r\n  setGroups(value: IGroup[]): void;\r\n  memberQuit : IMember | undefined;\r\n  setMemberQuit(value: IMember | undefined): void;\r\n  groupIdOfLeaveRequest : string;\r\n  setGroupIdOfLeaveRequest(value: string): void;\r\n  groupToRemoveContact : string  | undefined;\r\n  setGroupToRemoveContact(value: string  | undefined): void;\r\n  removedMember: IMember | undefined;\r\n  setRemovedMember(value: IMember | undefined): void;\r\n  members: IMember[] | undefined;\r\n  setMembers(value: IMember[] | undefined): void;\r\n  toggleMemberRole : IToggleMemberRole | undefined;\r\n  setToggleMemberRole(value: IToggleMemberRole | undefined): void;\r\n  changeGroupData: IChangeGroupData | undefined;\r\n  setChangeGroupData(value: IChangeGroupData | undefined): void;\r\n  groupToCreate: INewGroup | undefined;\r\n  setGroupToCreate(value: INewGroup | undefined): void;\r\n}\r\n\r\nexport const GroupContext = createContext<IGroupContextData>(\r\n  {} as IGroupContextData\r\n);\r\n\r\nexport interface IToggleMemberRole {\r\n  mbId: string;\r\n  gpId: string;\r\n  mbRole: UserType;\r\n  mb: IMember;\r\n}\r\n\r\nexport interface IChangeGroupData{\r\n  groupId: string | undefined;\r\n  groupName: string;\r\n  members: string[] | undefined;\r\n  description: string;\r\n}\r\n\r\nexport const GroupProvider: React.FC = ({ children }) => {\r\n  const [groups, setGroups] = useState<IGroup[]>([]);\r\n  const { activeChat, chats, setChats, setActiveChat, setShowChat } = useChat();\r\n  const [memberQuit, setMemberQuit] = useState<IMember | undefined>();\r\n  const [groupIdOfLeaveRequest, setGroupIdOfLeaveRequest] = useState<string>('');\r\n  const [groupToRemoveContact, setGroupToRemoveContact] = useState<string | undefined>();\r\n  const [removedMember, setRemovedMember] = useState<IMember | undefined>();\r\n  const [members, setMembers] = useState<IMember[] | undefined>(undefined);\r\n  const [toggleMemberRole, setToggleMemberRole] = useState<IToggleMemberRole | undefined>(undefined);\r\n  const [changeGroupData, setChangeGroupData] = useState<IChangeGroupData | undefined>(undefined);\r\n  const [groupToCreate, setGroupToCreate] = useState<INewGroup | undefined>(undefined);\r\n\r\n  const openGroup = (obj: IGroup) => {\r\n    if (activeChat?.jid === obj.jid) return;\r\n    let find = false;\r\n\r\n    setChats(\r\n      chats.map((item) => {\r\n        if (item.jid === obj.jid) {\r\n          item.unRead = 0;\r\n          item.messageLoaded = item.messages.length >= 20 ? false : true;\r\n          setShowChat(true);\r\n          setActiveChat(item);\r\n          find = true;\r\n        }\r\n        return item;\r\n      })\r\n    );\r\n\r\n    if (!find) {\r\n      let newChat = {\r\n        id: obj.jid.split(\"@\")[0],\r\n        jid: obj.jid,\r\n        name: obj.name,\r\n        profilePicture: obj.profilePicture,\r\n        messageLoaded: true,\r\n        unRead: 1,\r\n        chatType: ChatType.GROUP,\r\n        inputMessage: \"\",\r\n        isTyping: false,\r\n        messages: [],\r\n        favorite: obj.favorite,\r\n        added: obj.added,\r\n        members: obj.members,\r\n      };\r\n      setShowChat(true);\r\n      setActiveChat(newChat);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <GroupContext.Provider\r\n      value={{\r\n        openGroup,\r\n        groups,\r\n        setGroups,\r\n        memberQuit,\r\n        setMemberQuit,\r\n        groupIdOfLeaveRequest,\r\n        setGroupIdOfLeaveRequest,\r\n        groupToRemoveContact,\r\n        setGroupToRemoveContact,\r\n        removedMember,\r\n        setRemovedMember,\r\n        members,\r\n        setMembers,\r\n        toggleMemberRole, \r\n        setToggleMemberRole,\r\n        changeGroupData, \r\n        setChangeGroupData,\r\n        groupToCreate,\r\n        setGroupToCreate\r\n      }}\r\n    >\r\n      {children}\r\n    </GroupContext.Provider>\r\n  );\r\n};\r\n\r\nexport function useGroup() {\r\n  return useContext(GroupContext);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}