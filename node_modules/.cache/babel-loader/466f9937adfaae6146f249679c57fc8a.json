{"ast":null,"code":"export var getContactName=function getContactName(chatMessage,contacts,groups,user){var _groups$get,_groups$get$members$f,_contacts$get,_contacts$get2;if(chatMessage.toDomain.includes(\"@conference.\"))return((_groups$get=groups.get(chatMessage.to))===null||_groups$get===void 0?void 0:(_groups$get$members$f=_groups$get.members.find(function(member){return member.userId===chatMessage.from;}))===null||_groups$get$members$f===void 0?void 0:_groups$get$members$f.name)||\"\";if(chatMessage.from===user.id)return user.name;return chatMessage.fromName||((_contacts$get=contacts.get(chatMessage.from))===null||_contacts$get===void 0?void 0:_contacts$get.name)||((_contacts$get2=contacts.get(chatMessage.to))===null||_contacts$get2===void 0?void 0:_contacts$get2.name)||\"\";};export var getUserProfilePicture=function getUserProfilePicture(chatMessage,contacts,groups,user){var _groups$get2,_groups$get2$members$,_contacts$get3,_contacts$get4;if(chatMessage.toDomain.includes(\"@conference.\"))return(_groups$get2=groups.get(chatMessage.to))===null||_groups$get2===void 0?void 0:(_groups$get2$members$=_groups$get2.members.find(function(member){return member.userId===chatMessage.from;}))===null||_groups$get2$members$===void 0?void 0:_groups$get2$members$.profilePicture;return((_contacts$get3=contacts.get(chatMessage.from))===null||_contacts$get3===void 0?void 0:_contacts$get3.profilePicture)||((_contacts$get4=contacts.get(chatMessage.to))===null||_contacts$get4===void 0?void 0:_contacts$get4.profilePicture)||user.profilePicture||undefined;};export var getFileUrlStr=function getFileUrlStr(fileParams,msg){return\"fileUrl\"in msg&&fileParams.isFile?msg.fileUrl:fileParams.isFile?msg.message:\"\";};// function imageExists(image_url: string) {\n//   var http = new XMLHttpRequest();\n//   try {\n//     http.open(\"HEAD\", image_url, false);\n//     http.send();\n//     return http.status !== 404;\n//   } catch {\n//     return undefined;\n//   }\n// }\n// export const getProfilePicture = (profilePicture: string) => {\n//   if (imageExists(profilePicture)) {\n//     return profilePicture;\n//   }\n//   return undefined;\n// };","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/services/utils/formatUtils.ts"],"names":["getContactName","chatMessage","contacts","groups","user","toDomain","includes","get","to","members","find","member","userId","from","name","id","fromName","getUserProfilePicture","profilePicture","undefined","getFileUrlStr","fileParams","msg","isFile","fileUrl","message"],"mappings":"AAMA,MAAO,IAAMA,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAC5BC,WAD4B,CAE5BC,QAF4B,CAG5BC,MAH4B,CAI5BC,IAJ4B,CAKzB,oEACH,GAAIH,WAAW,CAACI,QAAZ,CAAqBC,QAArB,CAA8B,cAA9B,CAAJ,CACE,MACE,cAAAH,MAAM,CACHI,GADH,CACON,WAAW,CAACO,EADnB,0EAEIC,OAFJ,CAEYC,IAFZ,CAEiB,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACC,MAAP,GAAkBX,WAAW,CAACY,IAA1C,EAFjB,uEAEkEC,IAFlE,GAGA,EAJF,CAMF,GAAIb,WAAW,CAACY,IAAZ,GAAqBT,IAAI,CAACW,EAA9B,CAAkC,MAAOX,CAAAA,IAAI,CAACU,IAAZ,CAClC,MACEb,CAAAA,WAAW,CAACe,QAAZ,kBACAd,QAAQ,CAACK,GAAT,CAAaN,WAAW,CAACY,IAAzB,CADA,wCACA,cAAgCC,IADhC,oBAEAZ,QAAQ,CAACK,GAAT,CAAaN,WAAW,CAACO,EAAzB,CAFA,yCAEA,eAA8BM,IAF9B,GAGA,EAJF,CAMD,CApBM,CAqBP,MAAO,IAAMG,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CACnChB,WADmC,CAEnCC,QAFmC,CAGnCC,MAHmC,CAInCC,IAJmC,CAKhC,sEACH,GAAIH,WAAW,CAACI,QAAZ,CAAqBC,QAArB,CAA8B,cAA9B,CAAJ,CACE,oBAAOH,MAAM,CACVI,GADI,CACAN,WAAW,CAACO,EADZ,CAAP,8DAAO,aAEHC,OAFG,CAEKC,IAFL,CAEU,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACC,MAAP,GAAkBX,WAAW,CAACY,IAA1C,EAFV,CAAP,gDAAO,sBAGHK,cAHJ,CAIF,MACE,iBAAAhB,QAAQ,CAACK,GAAT,CAAaN,WAAW,CAACY,IAAzB,yDAAgCK,cAAhC,oBACAhB,QAAQ,CAACK,GAAT,CAAaN,WAAW,CAACO,EAAzB,CADA,yCACA,eAA8BU,cAD9B,GAEAd,IAAI,CAACc,cAFL,EAGAC,SAJF,CAMD,CAjBM,CAkBP,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAC3BC,UAD2B,CAE3BC,GAF2B,CAGxB,CACH,MAAO,WAAaA,CAAAA,GAAb,EAAoBD,UAAU,CAACE,MAA/B,CACFD,GAAD,CAAqBE,OADlB,CAEHH,UAAU,CAACE,MAAX,CACAD,GAAG,CAACG,OADJ,CAEA,EAJJ,CAKD,CATM,CAUP;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { Message } from \"@digivox/apicommunicator/dist/types/types/types\";\r\nimport IContact from \"../../alias/IContact\";\r\nimport IGroup from \"../../alias/IGroup\";\r\nimport IUser from \"../../alias/IUser\";\r\nimport { Message as XMPPMessage, FileMessage } from \"../chat/types/types\";\r\n\r\nexport const getContactName = (\r\n  chatMessage: Message,\r\n  contacts: Map<string, IContact>,\r\n  groups: Map<string, IGroup>,\r\n  user: IUser\r\n) => {\r\n  if (chatMessage.toDomain.includes(\"@conference.\"))\r\n    return (\r\n      groups\r\n        .get(chatMessage.to)\r\n        ?.members.find((member) => member.userId === chatMessage.from)?.name ||\r\n      \"\"\r\n    );\r\n  if (chatMessage.from === user.id) return user.name;\r\n  return (\r\n    chatMessage.fromName ||\r\n    contacts.get(chatMessage.from)?.name ||\r\n    contacts.get(chatMessage.to)?.name ||\r\n    \"\"\r\n  );\r\n};\r\nexport const getUserProfilePicture = (\r\n  chatMessage: Message,\r\n  contacts: Map<string, IContact>,\r\n  groups: Map<string, IGroup>,\r\n  user: IUser\r\n) => {\r\n  if (chatMessage.toDomain.includes(\"@conference.\"))\r\n    return groups\r\n      .get(chatMessage.to)\r\n      ?.members.find((member) => member.userId === chatMessage.from)\r\n      ?.profilePicture;\r\n  return (\r\n    contacts.get(chatMessage.from)?.profilePicture ||\r\n    contacts.get(chatMessage.to)?.profilePicture ||\r\n    user.profilePicture ||\r\n    undefined\r\n  );\r\n};\r\nexport const getFileUrlStr = (\r\n  fileParams: any,\r\n  msg: XMPPMessage | FileMessage\r\n) => {\r\n  return \"fileUrl\" in msg && fileParams.isFile\r\n    ? (msg as FileMessage).fileUrl\r\n    : fileParams.isFile\r\n    ? msg.message\r\n    : \"\";\r\n};\r\n// function imageExists(image_url: string) {\r\n//   var http = new XMLHttpRequest();\r\n//   try {\r\n//     http.open(\"HEAD\", image_url, false);\r\n\r\n//     http.send();\r\n//     return http.status !== 404;\r\n//   } catch {\r\n//     return undefined;\r\n//   }\r\n// }\r\n// export const getProfilePicture = (profilePicture: string) => {\r\n//   if (imageExists(profilePicture)) {\r\n//     return profilePicture;\r\n//   }\r\n//   return undefined;\r\n// };\r\n"]},"metadata":{},"sourceType":"module"}