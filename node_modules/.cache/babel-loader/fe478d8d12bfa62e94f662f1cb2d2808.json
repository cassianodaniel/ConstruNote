{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\DathApp\\\\ConstruNote\\\\src\\\\components\\\\ChatHeadConference.tsx\";\nimport React from \"react\";\nimport { Media, Button, Row, Col } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useChat } from \"../contexts/ChatContext\";\nimport { useTranslation } from \"react-i18next\";\nimport ReactImageFallback from \"react-image-fallback\";\nimport defaultAvatar from \"../assets/images/default.png\";\nimport { onImgError } from \"../helpers/ImageUtils\";\nimport { useGroup } from \"../contexts/GroupContext\";\nimport { useContact } from \"../contexts/ContactContext\";\n/* import { zeroLeft } from \"../helpers/zeroLeft\"; */\n\nimport { useCall } from \"../contexts/CallContext\";\nimport CallStatus from \"../enuns/CallStatus\";\nimport ScreenType from \"../enuns/ScreenType\";\nimport { useMainBox } from \"../contexts/MainBoxContext\";\n\nconst ChatHeadConference = ({\n  chatProfileSidebarOpen,\n  setChatProfileSidebarOpen\n}) => {\n  var _activeChat$members;\n\n  const {\n    chats,\n    activeChat,\n    setChats\n  } = useChat();\n  const {\n    groups,\n    setGroups\n  } = useGroup();\n  const {\n    contacts,\n    setContacts\n  } = useContact();\n  const {\n    currentCalls\n  } = useCall();\n  const {\n    setScreen\n  } = useMainBox();\n\n  const ChatProfileSidebar = () => {\n    setChatProfileSidebarOpen(!chatProfileSidebarOpen);\n  };\n\n  function closeUserChat() {\n    setScreen(ScreenType.CHAT);\n  }\n  /* function segundosParaHora(sec: number) {\r\n    var horas = Math.floor(sec / (60 * 60));\r\n      var resto = sec % (60 * 60);\r\n    var minutos = Math.floor(sec / 60);\r\n      resto %= 60;\r\n    var segundos = Math.ceil(resto);\r\n      return `${zeroLeft(horas, 2)}:${zeroLeft(minutos, 2)}:${zeroLeft(\r\n      segundos,\r\n      2\r\n    )}`;\r\n  } */\n\n\n  const {\n    t\n  } = useTranslation();\n  const currentCall = Array.from(currentCalls.values()).find(call => {\n    var _call$callerObject;\n\n    return ((_call$callerObject = call.callerObject) === null || _call$callerObject === void 0 ? void 0 : _call$callerObject.jid) === activeChat.jid;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-3 border-bottom\",\n    style: {\n      backgroundColor: \"#e6ebf5\",\n      height: \"89px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 8,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Media, {\n    className: \"align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-block d-lg-none mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: () => closeUserChat(),\n    className: \"user-chat-remove text-muted font-size-16 p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-arrow-left-s-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }))), activeChat.profilePicture ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ReactImageFallback, {\n    src: activeChat.profilePicture,\n    onError: () => {\n      if (activeChat.jid.includes(\"@conference.\")) onImgError(chats, groups, contacts, setChats, setGroups, setContacts, activeChat);\n    },\n    style: {\n      maxHeight: \"40px\",\n      maxWidth: \"40px\"\n    },\n    fallbackImage: defaultAvatar,\n    className: \"rounded-circle avatar-lg img-thumbnail\",\n    alt: \"chatvia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-user-img align-self-center mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatar-xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"avatar-title rounded-circle bg-soft-primary text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, activeChat.name.trim().charAt(0)))), /*#__PURE__*/React.createElement(Media, {\n    body: true,\n    className: \"overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"font-size-16 mb-0 text-truncate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"#\",\n    onClick: () => ChatProfileSidebar(),\n    className: \"text-reset user-profile-show\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 23\n    }\n  }, activeChat.name), (currentCall === null || currentCall === void 0 ? void 0 : currentCall.isGroup) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-muted h7 mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, (_activeChat$members = activeChat.members) === null || _activeChat$members === void 0 ? void 0 : _activeChat$members.map(gpmbr => {\n    return gpmbr.name.split(' ')[0] + '; ';\n  })))))))), /*#__PURE__*/React.createElement(Col, {\n    sm: 4,\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-inline user-chat-nav text-right mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, (currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.CONNECTING && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, t(\"Connecting...\")), (currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.CALLING && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, t(\"Calling...\")), (currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.ON_GOING && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"h4 mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }\n  }, t(\"Call In Progress\"))))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => (currentCall === null || currentCall === void 0 ? void 0 : currentCall.endCall) && currentCall.endCall(),\n    className: \"nav-btn user-profile-show btn-head-conference red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-phone-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }))), !((currentCall === null || currentCall === void 0 ? void 0 : currentCall.callStatus) === CallStatus.CONNECTING) && !((currentCall === null || currentCall === void 0 ? void 0 : currentCall.receivingVideo) || (currentCall === null || currentCall === void 0 ? void 0 : currentCall.sendingVideo)) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => {\n      if (currentCall === null || currentCall === void 0 ? void 0 : currentCall.micMuted) currentCall === null || currentCall === void 0 ? void 0 : currentCall.unMuteMic();else currentCall === null || currentCall === void 0 ? void 0 : currentCall.muteMic();\n    },\n    className: `nav-btn user-profile-show btn-head-conference ${(currentCall === null || currentCall === void 0 ? void 0 : currentCall.micMuted) ? \"red\" : \"white\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 23\n    }\n  }, !(currentCall === null || currentCall === void 0 ? void 0 : currentCall.micMuted) ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-mic-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-mic-off-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 27\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => {\n      if (currentCall === null || currentCall === void 0 ? void 0 : currentCall.hold) currentCall === null || currentCall === void 0 ? void 0 : currentCall.unHoldCall();else currentCall === null || currentCall === void 0 ? void 0 : currentCall.holdCall();\n    },\n    className: `nav-btn user-profile-show btn-head-conference ${(currentCall === null || currentCall === void 0 ? void 0 : currentCall.hold) ? \"red\" : \"white\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 23\n    }\n  }, (currentCall === null || currentCall === void 0 ? void 0 : currentCall.hold) ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-play-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-pause-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 27\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => {\n      if (currentCall === null || currentCall === void 0 ? void 0 : currentCall.sendingVideo) {\n        if (currentCall === null || currentCall === void 0 ? void 0 : currentCall.videoMuted) currentCall === null || currentCall === void 0 ? void 0 : currentCall.enableCam();else currentCall === null || currentCall === void 0 ? void 0 : currentCall.disableCam();\n      } else {\n        alert(\"Mudança de tipo de chamada ainda não está disponivel :(\");\n      }\n    },\n    className: `nav-btn user-profile-show btn-head-conference white ${(currentCall === null || currentCall === void 0 ? void 0 : currentCall.videoMuted) ? \"red\" : \"white\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 23\n    }\n  }, (currentCall === null || currentCall === void 0 ? void 0 : currentCall.videoMuted) ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-camera-off-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 27\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-camera-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 27\n    }\n  })))), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-inline-item d-none d-lg-inline-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"none\",\n    onClick: () => ChatProfileSidebar(),\n    className: \"nav-btn user-profile-show d-flex justify-content-center align-items-center h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-user-2-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default ChatHeadConference;","map":{"version":3,"sources":["C:/Users/Digivox/dev/DathApp/ConstruNote/src/components/ChatHeadConference.tsx"],"names":["React","Media","Button","Row","Col","Link","useChat","useTranslation","ReactImageFallback","defaultAvatar","onImgError","useGroup","useContact","useCall","CallStatus","ScreenType","useMainBox","ChatHeadConference","chatProfileSidebarOpen","setChatProfileSidebarOpen","chats","activeChat","setChats","groups","setGroups","contacts","setContacts","currentCalls","setScreen","ChatProfileSidebar","closeUserChat","CHAT","t","currentCall","Array","from","values","find","call","callerObject","jid","backgroundColor","height","profilePicture","includes","maxHeight","maxWidth","name","trim","charAt","isGroup","members","map","gpmbr","split","callStatus","CONNECTING","CALLING","ON_GOING","endCall","receivingVideo","sendingVideo","micMuted","unMuteMic","muteMic","hold","unHoldCall","holdCall","videoMuted","enableCam","disableCam","alert"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Media, Button, Row, Col } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport ReactImageFallback from \"react-image-fallback\";\r\nimport defaultAvatar from \"../assets/images/default.png\";\r\nimport { onImgError } from \"../helpers/ImageUtils\";\r\nimport { useGroup } from \"../contexts/GroupContext\";\r\nimport { useContact } from \"../contexts/ContactContext\";\r\n/* import { zeroLeft } from \"../helpers/zeroLeft\"; */\r\nimport { useCall } from \"../contexts/CallContext\";\r\nimport CallStatus from \"../enuns/CallStatus\";\r\nimport ScreenType from \"../enuns/ScreenType\";\r\nimport { useMainBox } from \"../contexts/MainBoxContext\";\r\n\r\ninterface IProps {\r\n  chatProfileSidebarOpen: boolean;\r\n  setChatProfileSidebarOpen(value: boolean): void;\r\n}\r\n\r\nconst ChatHeadConference: React.FC<IProps> = ({\r\n  chatProfileSidebarOpen,\r\n  setChatProfileSidebarOpen,\r\n}) => {\r\n  const { chats, activeChat, setChats } = useChat();\r\n  const { groups, setGroups } = useGroup();\r\n  const { contacts, setContacts } = useContact();\r\n  const { currentCalls } = useCall();\r\n  const { setScreen } = useMainBox();\r\n\r\n  const ChatProfileSidebar = () => {\r\n    setChatProfileSidebarOpen(!chatProfileSidebarOpen);\r\n  };\r\n\r\n  function closeUserChat() {\r\n    setScreen(ScreenType.CHAT);\r\n  }\r\n\r\n  /* function segundosParaHora(sec: number) {\r\n    var horas = Math.floor(sec / (60 * 60));\r\n\r\n    var resto = sec % (60 * 60);\r\n    var minutos = Math.floor(sec / 60);\r\n\r\n    resto %= 60;\r\n    var segundos = Math.ceil(resto);\r\n\r\n    return `${zeroLeft(horas, 2)}:${zeroLeft(minutos, 2)}:${zeroLeft(\r\n      segundos,\r\n      2\r\n    )}`;\r\n  } */\r\n\r\n  const { t } = useTranslation();\r\n  const currentCall = Array.from(currentCalls.values()).find(\r\n    (call) => call.callerObject?.jid === activeChat.jid\r\n  );\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        className=\"p-3 border-bottom\"\r\n        style={{ backgroundColor: \"#e6ebf5\", height: \"89px\" }}\r\n      >\r\n        <Row className=\"align-items-center\">\r\n          <Col sm={8} xs={4}>\r\n            <Media className=\"align-items-center\">\r\n              <div className=\"d-block d-lg-none mr-2\">\r\n                <Link\r\n                  to=\"#\"\r\n                  onClick={() => closeUserChat()}\r\n                  className=\"user-chat-remove text-muted font-size-16 p-2\"\r\n                >\r\n                  <i className=\"ri-arrow-left-s-line\"></i>\r\n                </Link>\r\n              </div>\r\n              {activeChat.profilePicture ? (\r\n                <div className=\"mr-3\">\r\n                  <ReactImageFallback\r\n                    src={activeChat.profilePicture}\r\n                    onError={() => {\r\n                      if (activeChat.jid.includes(\"@conference.\"))\r\n                        onImgError(\r\n                          chats,\r\n                          groups,\r\n                          contacts,\r\n                          setChats,\r\n                          setGroups,\r\n                          setContacts,\r\n                          activeChat\r\n                        );\r\n                    }}\r\n                    style={{ maxHeight: \"40px\", maxWidth: \"40px\" }}\r\n                    fallbackImage={defaultAvatar}\r\n                    className=\"rounded-circle avatar-lg img-thumbnail\"\r\n                    alt=\"chatvia\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"chat-user-img align-self-center mr-3\">\r\n                  <div className=\"avatar-xs\">\r\n                    <span className=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n                      {activeChat.name.trim().charAt(0)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <Media body className=\"overflow-hidden\">\r\n                <h5 className=\"font-size-16 mb-0 text-truncate\">\r\n                  <Link\r\n                    to=\"#\"\r\n                    onClick={() => ChatProfileSidebar()}\r\n                    className=\"text-reset user-profile-show\"\r\n                  >\r\n                    <div className=\"p-1\">\r\n                      <div>{activeChat.name}</div>\r\n                      {currentCall?.isGroup && (\r\n                        <div className=\"text-muted h7 mt-1\">\r\n                          {activeChat.members?.map((gpmbr) => {\r\n                              return(\r\n                                gpmbr.name.split(' ')[0] + '; '\r\n                              )\r\n                          })}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </Link>\r\n                </h5>\r\n              </Media>\r\n            </Media>\r\n          </Col>\r\n          <Col sm={4} xs={8}>\r\n            <ul className=\"list-inline user-chat-nav text-right mb-0\">\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <div className=\"d-flex justify-content-center align-items-center\">\r\n                  {currentCall?.callStatus === CallStatus.CONNECTING && (\r\n                    <span className=\"h4 mr-3\">{t(\"Connecting...\")}</span>\r\n                  )}\r\n                  {currentCall?.callStatus === CallStatus.CALLING && (\r\n                    <span className=\"h4 mr-3\">{t(\"Calling...\")}</span>\r\n                  )}\r\n                  {currentCall?.callStatus === CallStatus.ON_GOING && (\r\n                    <>\r\n                      <span className=\"h4 mr-3\">{t(\"Call In Progress\")}</span>\r\n                     {/*  <span\r\n                        className=\"h4 d-flex justify-content-center align-items-center\"\r\n                        style={{ width: \"100px\" }}\r\n                      >\r\n                        {segundosParaHora(\r\n                          currentCall?.seconds ? currentCall?.seconds : 0\r\n                        )}\r\n                      </span> */}\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </li>\r\n              <li className=\"list-inline-item d-none d-lg-inline-block ml-3\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => currentCall?.endCall && currentCall.endCall()}\r\n                  className=\"nav-btn user-profile-show btn-head-conference red\"\r\n                >\r\n                  <i className=\"ri-phone-line\"></i>\r\n                </Button>\r\n              </li>\r\n\r\n              {!(currentCall?.callStatus === CallStatus.CONNECTING) &&\r\n                !(currentCall?.receivingVideo || currentCall?.sendingVideo) && (\r\n                  <>\r\n                    <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        color=\"none\"\r\n                        onClick={() => {\r\n                          if (currentCall?.micMuted) currentCall?.unMuteMic();\r\n                          else currentCall?.muteMic();\r\n                        }}\r\n                        className={`nav-btn user-profile-show btn-head-conference ${\r\n                          currentCall?.micMuted ? \"red\" : \"white\"\r\n                        }`}\r\n                      >\r\n                        {!currentCall?.micMuted ? (\r\n                          <i className=\"ri-mic-line\"></i>\r\n                        ) : (\r\n                          <i className=\"ri-mic-off-line\"></i>\r\n                        )}\r\n                      </Button>\r\n                    </li>\r\n\r\n                    <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        color=\"none\"\r\n                        onClick={() => {\r\n                          if (currentCall?.hold) currentCall?.unHoldCall();\r\n                          else currentCall?.holdCall();\r\n                        }}\r\n                        className={`nav-btn user-profile-show btn-head-conference ${\r\n                          currentCall?.hold ? \"red\" : \"white\"\r\n                        }`}\r\n                      >\r\n                        {currentCall?.hold ? (\r\n                          <i className=\"ri-play-line\"></i>\r\n                        ) : (\r\n                          <i className=\"ri-pause-line\"></i>\r\n                        )}\r\n                      </Button>\r\n                    </li>\r\n\r\n                    <li className=\"list-inline-item d-none d-lg-inline-block mr-3\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        color=\"none\"\r\n                        onClick={() => {\r\n                          if (currentCall?.sendingVideo) {\r\n                            if (currentCall?.videoMuted)\r\n                              currentCall?.enableCam();\r\n                            else currentCall?.disableCam();\r\n                          } else {\r\n                            alert(\r\n                              \"Mudança de tipo de chamada ainda não está disponivel :(\"\r\n                            );\r\n                          }\r\n                        }}\r\n                        className={`nav-btn user-profile-show btn-head-conference white ${\r\n                          currentCall?.videoMuted ? \"red\" : \"white\"\r\n                        }`}\r\n                      >\r\n                        {currentCall?.videoMuted ? (\r\n                          <i className=\"ri-camera-off-line\"></i>\r\n                        ) : (\r\n                          <i className=\"ri-camera-line\"></i>\r\n                        )}\r\n                      </Button>\r\n                    </li>\r\n                  </>\r\n                )}\r\n\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => ChatProfileSidebar()}\r\n                  className=\"nav-btn user-profile-show d-flex justify-content-center align-items-center h-100\"\r\n                >\r\n                  <i className=\"ri-user-2-line\"></i>\r\n                </Button>\r\n              </li>\r\n            </ul>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ChatHeadConference;\r\n"]},"metadata":{},"sourceType":"module"}