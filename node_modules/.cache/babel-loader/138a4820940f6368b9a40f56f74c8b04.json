{"ast":null,"code":"import ChatType from \"../../enuns/ChatType\";\nimport { getAuthorization } from \"../utils/localStorageUtils\";\nimport { getAttachmentType } from \"../utils/parseUtils\";\nexport default class AttachmentsBusiness {\n  constructor(api, settings) {\n    this.api = api;\n    this.settings = settings;\n\n    this.list = (chat, callback) => {\n      if (!this.api) return;\n      this.settings.get(settings => {\n        const paramsUrl = {\n          kind: chat.chatType === ChatType.USER ? \"chat\" : \"group\",\n          src: `${getAuthorization().user_name}@${settings.xmppDomain}`,\n          dst: chat.jid\n        };\n        this.api.getAttachments({\n          paramsUrl\n        }, attachments => {\n          if (attachments === null || attachments === void 0 ? void 0 : attachments.attachments) {\n            const parsedAttachments = attachments === null || attachments === void 0 ? void 0 : attachments.attachments.map(attachment => {\n              const booleans = getAttachmentType(attachment.fileExtension);\n              return {\n                name: attachment.fileName,\n                // size: \"any\",\n                thumbnail: \"default\",\n                ...booleans\n              };\n            });\n            callback(parsedAttachments);\n          }\n        });\n      });\n    };\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/services/business/Attachments.ts"],"names":["ChatType","getAuthorization","getAttachmentType","AttachmentsBusiness","constructor","api","settings","list","chat","callback","get","paramsUrl","kind","chatType","USER","src","user_name","xmppDomain","dst","jid","getAttachments","attachments","parsedAttachments","map","attachment","booleans","fileExtension","name","fileName","thumbnail"],"mappings":"AACA,OAAOA,QAAP,MAAqB,sBAArB;AAGA,SAASC,gBAAT,QAAiC,4BAAjC;AACA,SAASC,iBAAT,QAAkC,qBAAlC;AAMA,eAAe,MAAMC,mBAAN,CAA0B;AACvCC,EAAAA,WAAW,CAASC,GAAT,EAA2BC,QAA3B,EAAuD;AAAA,SAA9CD,GAA8C,GAA9CA,GAA8C;AAAA,SAA5BC,QAA4B,GAA5BA,QAA4B;;AAAA,SAClEC,IADkE,GAC3D,CAACC,IAAD,EAAcC,QAAd,KAAmD;AACxD,UAAI,CAAC,KAAKJ,GAAV,EAAe;AACf,WAAKC,QAAL,CAAcI,GAAd,CAAmBJ,QAAD,IAAc;AAC9B,cAAMK,SAAS,GAAG;AAChBC,UAAAA,IAAI,EAAEJ,IAAI,CAACK,QAAL,KAAkBb,QAAQ,CAACc,IAA3B,GAAkC,MAAlC,GAA2C,OADjC;AAEhBC,UAAAA,GAAG,EAAG,GAAEd,gBAAgB,GAAGe,SAAU,IAAGV,QAAQ,CAACW,UAAW,EAF5C;AAGhBC,UAAAA,GAAG,EAAEV,IAAI,CAACW;AAHM,SAAlB;AAKA,aAAKd,GAAL,CAASe,cAAT,CAAwB;AAAET,UAAAA;AAAF,SAAxB,EAAwCU,WAAD,IAAiB;AACtD,cAAIA,WAAJ,aAAIA,WAAJ,uBAAIA,WAAW,CAAEA,WAAjB,EAA8B;AAC5B,kBAAMC,iBAAmC,GAAGD,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAEA,WAAb,CAAyBE,GAAzB,CACzCC,UAAD,IAAgB;AACd,oBAAMC,QAAQ,GAAGvB,iBAAiB,CAACsB,UAAU,CAACE,aAAZ,CAAlC;AACA,qBAAO;AACLC,gBAAAA,IAAI,EAAEH,UAAU,CAACI,QADZ;AAEL;AACAC,gBAAAA,SAAS,EAAE,SAHN;AAIL,mBAAGJ;AAJE,eAAP;AAMD,aATyC,CAA5C;AAWAhB,YAAAA,QAAQ,CAACa,iBAAD,CAAR;AACD;AACF,SAfD;AAgBD,OAtBD;AAuBD,KA1BiE;AAAE;;AAD7B","sourcesContent":["import API from \"@digivox/apicommunicator\";\r\nimport ChatType from \"../../enuns/ChatType\";\r\nimport IAttachedFiles from \"../../alias/IAttachedFiles\";\r\nimport IChat from \"../../alias/IChat\";\r\nimport { getAuthorization } from \"../utils/localStorageUtils\";\r\nimport { getAttachmentType } from \"../utils/parseUtils\";\r\nimport SettingsBusiness from \"./Settings\";\r\n\r\ninterface GetAttachmentsCallback {\r\n  (attachment: IAttachedFiles[]): void;\r\n}\r\nexport default class AttachmentsBusiness {\r\n  constructor(private api: API, private settings: SettingsBusiness) {}\r\n  list = (chat: IChat, callback: GetAttachmentsCallback) => {\r\n    if (!this.api) return;\r\n    this.settings.get((settings) => {\r\n      const paramsUrl = {\r\n        kind: chat.chatType === ChatType.USER ? \"chat\" : \"group\",\r\n        src: `${getAuthorization().user_name}@${settings.xmppDomain}`,\r\n        dst: chat.jid,\r\n      };\r\n      this.api.getAttachments({ paramsUrl }, (attachments) => {\r\n        if (attachments?.attachments) {\r\n          const parsedAttachments: IAttachedFiles[] = attachments?.attachments.map(\r\n            (attachment) => {\r\n              const booleans = getAttachmentType(attachment.fileExtension);\r\n              return {\r\n                name: attachment.fileName,\r\n                // size: \"any\",\r\n                thumbnail: \"default\",\r\n                ...booleans,\r\n              };\r\n            }\r\n          );\r\n          callback(parsedAttachments);\r\n        }\r\n      });\r\n    });\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}