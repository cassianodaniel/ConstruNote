{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\components\\\\ChatMessage.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { DropdownMenu, DropdownItem, DropdownToggle, UncontrolledDropdown } from \"reactstrap\";\nimport ImageList from \"./ImageList\";\nimport FileList from \"./FileList\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport Linkify from \"react-linkify\";\nimport DeliverStatus from \"./../enuns/DeliverStatus\";\nimport ReadStatus from \"./../enuns/ReadStatus\";\nimport VideoMessage from \"./VideoMessage\";\nimport ImageMessage from \"./ImageMessage\";\nimport AudioMessage from \"./AudioMessage\";\nimport FileMessage from \"./FileMessage\";\n\nconst ChatMessage = ({\n  activeChat,\n  message\n}) => {\n  var {\n    DateTime\n  } = require(\"luxon\");\n\n  const [show, setShow] = useState(false);\n\n  const toggle = () => setShow(!show);\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    user\n  } = useAuth(); //ao sair do chat atual, esconda o texto de +165 caracteres aberto\n\n  useEffect(() => {\n    setShow(false);\n  }, [activeChat]);\n\n  const deleteMessage = id => {};\n\n  var labelToReadALongerText = \".. Ler mais\";\n  var smallerMessage = \"\";\n  var biggerMessage = \"\";\n  const MAXNUMBEROFCHARACTERSONAMESSAGE = 10000;\n  const MAXNUMBERTODISPLAYMESSAGE = 165;\n\n  const messageText = () => {\n    if (message.message) {\n      if (message.message.length > MAXNUMBERTODISPLAYMESSAGE) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          className: \"mb-0\",\n          style: {\n            wordBreak: \"break-word\",\n            textAlign: \"justify\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 11\n          }\n        }, !show ? (smallerMessage = message.message.slice(0, MAXNUMBERTODISPLAYMESSAGE)) && smallerMessage : null, show ? (biggerMessage = message.message.slice(MAXNUMBERTODISPLAYMESSAGE, MAXNUMBEROFCHARACTERSONAMESSAGE)) && message.message.slice(0, MAXNUMBERTODISPLAYMESSAGE) + biggerMessage : null, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"hover\",\n          style: {\n            border: 0,\n            background: 0,\n            color: \"rgb(217, 237, 250)\"\n          },\n          onClick: toggle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }\n        }, !show ? labelToReadALongerText : null));\n      }\n\n      if (message.message.length <= 164) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          className: \"mb-0\",\n          style: {\n            wordBreak: \"break-word\",\n            textAlign: \"justify\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 11\n          }\n        }, message.isAudioMessage && /*#__PURE__*/React.createElement(AudioMessage, {\n          url: message.fileUrl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 40\n          }\n        }), message.isFileMessage && /*#__PURE__*/React.createElement(FileMessage, {\n          url: message.fileUrl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 39\n          }\n        }), message.isVideoMessage && /*#__PURE__*/React.createElement(VideoMessage, {\n          url: message.fileUrl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 40\n          }\n        }), message.isImageMessage && /*#__PURE__*/React.createElement(ImageMessage, {\n          url: message.fileUrl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 40\n          }\n        }), /*#__PURE__*/React.createElement(\"text\", {\n          style: message.fromUser ? {\n            color: \"white\"\n          } : {\n            color: \"rgb(35, 198, 10)\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }\n        }, !message.isAudioMessage && !message.isFileMessage && !message.isVideoMessage && !message.isImageMessage && /*#__PURE__*/React.createElement(Linkify, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 42\n          }\n        }, message.message)));\n      }\n    }\n  }; //clock: <i className=\"ri-time-line align-middle\"></i>\n\n\n  const messageFooter = () => {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: \"chat-time mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        position: \"relative\",\n        right: 8,\n        top: 1,\n        color: \"rgb(114, 105, 239)\"\n      },\n      className: message.deliverStatus === DeliverStatus.SENDING && user.id === message.fromUser ? \"ri-time-line align-middle\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        position: \"relative\",\n        right: 8,\n        top: 1,\n        color: \"rgb(114, 105, 239)\"\n      },\n      className: message.deliverStatus === DeliverStatus.QUEUED && message.readStatus === ReadStatus.UNREAD && user.id === message.fromUser ? \"ri-check-line align-middle\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        position: \"relative\",\n        right: 8,\n        top: 1,\n        color: \"rgb(114, 105, 239)\"\n      },\n      className: message.deliverStatus === DeliverStatus.DELIVERED && message.readStatus === ReadStatus.UNREAD && user.id === message.fromUser ? \"ri-check-double-line align-middle\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        position: \"relative\",\n        right: 8,\n        top: 1,\n        color: \"rgb(35, 198, 10)\"\n      },\n      className: message.readStatus === ReadStatus.READ && user.id === message.fromUser ? \"ri-check-double-line align-middle\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"align-middle\",\n      style: {\n        position: \"relative\",\n        right: 4\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, message.time === \"\" || message.time === \"—:—\" ? message.time = \"—:—\" : null, message.time !== (\"\" || \"—:—\") && DateTime.fromISO(message.time).toFormat(\"HH:mm\")));\n  };\n\n  const option = () => {\n    if (!activeChat.isTyping) {\n      return /*#__PURE__*/React.createElement(UncontrolledDropdown, {\n        className: \"align-self-start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DropdownToggle, {\n        tag: \"a\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ri-more-2-fill\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(DropdownMenu, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(DropdownItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }\n      }, t(\"Copy\"), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ri-file-copy-line float-right text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(DropdownItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }, t(\"Save\"), \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ri-save-line float-right text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(DropdownItem, {\n        onClick: toggle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, \"Forward\", \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ri-chat-forward-line float-right text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(DropdownItem, {\n        onClick: () => deleteMessage(message.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }\n      }, \"Delete\", \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"ri-delete-bin-line float-right text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }\n      }))));\n    }\n  };\n\n  const photo = () => {\n    if (activeChat.profilePicture) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        src: activeChat.profilePicture,\n        alt: \"chatvia\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 14\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"chat-user-img align-self-center mr-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"avatar-xs\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"avatar-title rounded-circle bg-soft-primary text-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }\n      }, message.userName && message.userName.trim().charAt(0))));\n    }\n  };\n  /* const isTyping = () => {\r\n   if (activeChat.isTyping)\r\n     return (\r\n       <p className=\"mb-0\">\r\n         typing\r\n         <span className=\"animate-typing\">\r\n           <span className=\"dot ml-1\"></span>\r\n           <span className=\"dot ml-1\"></span>\r\n           <span className=\"dot ml-1\"></span>\r\n         </span>\r\n       </p>\r\n     );\r\n  };  */\n\n\n  const image = () => {\n    if (message.isImageMessage && false) return /*#__PURE__*/React.createElement(ImageList, {\n      image: message.fileUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 14\n      }\n    });\n  };\n\n  const file = () => {\n    if (message.isFileMessage && false) return /*#__PURE__*/React.createElement(FileList, {\n      fileName: message.fileUrl,\n      fileSize: message.fileUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 14\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: user.id === message.fromUser ? \"right\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conversation-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }\n  }, photo()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-chat-content \" + (user.id === message.fromUser ? \"message-chat-left\" : \"message-chat-right\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ctext-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ctext-wrap-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }, messageText(), image(), file(), messageFooter()), option()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conversation-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 11\n    }\n  }, message.userName))));\n};\n\nexport default ChatMessage;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatMessage.tsx"],"names":["React","useState","useEffect","DropdownMenu","DropdownItem","DropdownToggle","UncontrolledDropdown","ImageList","FileList","useTranslation","useAuth","Linkify","DeliverStatus","ReadStatus","VideoMessage","ImageMessage","AudioMessage","FileMessage","ChatMessage","activeChat","message","DateTime","require","show","setShow","toggle","t","user","deleteMessage","id","labelToReadALongerText","smallerMessage","biggerMessage","MAXNUMBEROFCHARACTERSONAMESSAGE","MAXNUMBERTODISPLAYMESSAGE","messageText","length","wordBreak","textAlign","slice","border","background","color","isAudioMessage","fileUrl","isFileMessage","isVideoMessage","isImageMessage","fromUser","messageFooter","position","right","top","deliverStatus","SENDING","QUEUED","readStatus","UNREAD","DELIVERED","READ","time","fromISO","toFormat","option","isTyping","photo","profilePicture","userName","trim","charAt","image","file"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  DropdownToggle,\r\n  UncontrolledDropdown,\r\n} from \"reactstrap\";\r\n\r\nimport IChat from \"../alias/IChat\";\r\nimport IMessage from \"../alias/IMessage\";\r\n\r\nimport ImageList from \"./ImageList\";\r\nimport FileList from \"./FileList\";\r\n\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nimport Linkify from \"react-linkify\";\r\n\r\nimport DeliverStatus from \"./../enuns/DeliverStatus\";\r\nimport ReadStatus from \"./../enuns/ReadStatus\";\r\n\r\nimport VideoMessage from \"./VideoMessage\";\r\nimport ImageMessage from \"./ImageMessage\";\r\nimport AudioMessage from \"./AudioMessage\";\r\nimport FileMessage from \"./FileMessage\";\r\n\r\ninterface IProps {\r\n  activeChat: IChat;\r\n  message: IMessage;\r\n}\r\n\r\nconst ChatMessage: React.FC<IProps> = ({ activeChat, message }) => {\r\n  var { DateTime } = require(\"luxon\");\r\n  const [show, setShow] = useState(false);\r\n\r\n  const toggle = () => setShow(!show);\r\n\r\n  const { t } = useTranslation();\r\n  const { user } = useAuth();\r\n\r\n  //ao sair do chat atual, esconda o texto de +165 caracteres aberto\r\n  useEffect(() => {\r\n    setShow(false);\r\n  }, [activeChat]);\r\n\r\n  const deleteMessage = (id: string) => {};\r\n\r\n  var labelToReadALongerText = \".. Ler mais\";\r\n  var smallerMessage = \"\";\r\n  var biggerMessage = \"\";\r\n  const MAXNUMBEROFCHARACTERSONAMESSAGE = 10000;\r\n  const MAXNUMBERTODISPLAYMESSAGE = 165;\r\n\r\n  const messageText = () => {\r\n    if (message.message) {\r\n      if (message.message.length > MAXNUMBERTODISPLAYMESSAGE) {\r\n        return (\r\n          <p\r\n            className=\"mb-0\"\r\n            style={{ wordBreak: \"break-word\", textAlign: \"justify\" }}\r\n          >\r\n            {!show\r\n              ? (smallerMessage = message.message.slice(\r\n                  0,\r\n                  MAXNUMBERTODISPLAYMESSAGE\r\n                )) && smallerMessage\r\n              : null}\r\n            {show\r\n              ? (biggerMessage = message.message.slice(\r\n                  MAXNUMBERTODISPLAYMESSAGE,\r\n                  MAXNUMBEROFCHARACTERSONAMESSAGE\r\n                )) &&\r\n                message.message.slice(0, MAXNUMBERTODISPLAYMESSAGE) +\r\n                  biggerMessage\r\n              : null}\r\n\r\n            <button\r\n              className=\"hover\"\r\n              style={{\r\n                border: 0,\r\n                background: 0,\r\n                color: \"rgb(217, 237, 250)\",\r\n              }}\r\n              onClick={toggle}\r\n            >\r\n              {!show ? labelToReadALongerText : null}\r\n            </button>\r\n          </p>\r\n        );\r\n      }\r\n      if (message.message.length <= 164) {\r\n        return (\r\n          <p\r\n            className=\"mb-0\"\r\n            style={{ wordBreak: \"break-word\", textAlign: \"justify\" }}\r\n          >\r\n            {message.isAudioMessage && <AudioMessage url={message.fileUrl} />}\r\n            {message.isFileMessage && <FileMessage url={message.fileUrl} />}\r\n            {message.isVideoMessage && <VideoMessage url={message.fileUrl} />}\r\n            {message.isImageMessage && <ImageMessage url={message.fileUrl} />}\r\n            <text style={message.fromUser ? {color: \"white\"} : {color: \"rgb(35, 198, 10)\"}}>{!message.isAudioMessage &&\r\n              !message.isFileMessage &&\r\n              !message.isVideoMessage &&\r\n              !message.isImageMessage && <Linkify>{message.message}</Linkify>}\r\n            </text>\r\n          </p>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  //clock: <i className=\"ri-time-line align-middle\"></i>\r\n\r\n  const messageFooter = () => {\r\n    return (\r\n      <p className=\"chat-time mb-0\">\r\n        <i\r\n          style={{\r\n            position: \"relative\",\r\n            right: 8,\r\n            top: 1,\r\n            color: \"rgb(114, 105, 239)\",\r\n          }}\r\n          className={\r\n            message.deliverStatus === DeliverStatus.SENDING &&\r\n            user.id === message.fromUser\r\n              ? \"ri-time-line align-middle\"\r\n              : \"\"\r\n          }\r\n        ></i>\r\n        <i\r\n          style={{\r\n            position: \"relative\",\r\n            right: 8,\r\n            top: 1,\r\n            color: \"rgb(114, 105, 239)\",\r\n          }}\r\n          className={\r\n            (message.deliverStatus === DeliverStatus.QUEUED && message.readStatus === ReadStatus.UNREAD) &&\r\n            user.id === message.fromUser\r\n              ? \"ri-check-line align-middle\"\r\n              : \"\"\r\n          }\r\n        ></i>\r\n        <i\r\n          style={{\r\n            position: \"relative\",\r\n            right: 8,\r\n            top: 1,\r\n            color: \"rgb(114, 105, 239)\",\r\n          }}\r\n          className={\r\n            message.deliverStatus === DeliverStatus.DELIVERED &&\r\n            message.readStatus === ReadStatus.UNREAD &&\r\n            user.id === message.fromUser\r\n              ? \"ri-check-double-line align-middle\"\r\n              : \"\"\r\n          }\r\n        ></i>\r\n        <i\r\n          style={{\r\n            position: \"relative\",\r\n            right: 8,\r\n            top: 1,\r\n            color: \"rgb(35, 198, 10)\",\r\n          }}\r\n          className={\r\n            message.readStatus === ReadStatus.READ &&\r\n            user.id === message.fromUser\r\n              ? \"ri-check-double-line align-middle\"\r\n              : \"\"\r\n          }\r\n        ></i>\r\n        <span\r\n          className=\"align-middle\"\r\n          style={{ position: \"relative\", right: 4 }}\r\n        >\r\n          {/* Necessário fazer o parse para mensagens da api */}\r\n          {/* {DateTime.fromISO(new Date(message.time).toISOString()).toFormat(\r\n            \"HH:mm\"\r\n          )} */}\r\n          {(message.time === \"\" || message.time === \"—:—\") ? message.time = \"—:—\" : null}\r\n          {message.time !== (\"\" || \"—:—\") && DateTime.fromISO(message.time).toFormat(\"HH:mm\")}\r\n        </span>\r\n      </p>\r\n    );\r\n  };\r\n\r\n  const option = () => {\r\n    if (!activeChat.isTyping) {\r\n      return (\r\n        <UncontrolledDropdown className=\"align-self-start\">\r\n          <DropdownToggle tag=\"a\">\r\n            <i className=\"ri-more-2-fill\"></i>\r\n          </DropdownToggle>\r\n          <DropdownMenu>\r\n            <DropdownItem>\r\n              {t(\"Copy\")}\r\n              <i className=\"ri-file-copy-line float-right text-muted\"></i>\r\n            </DropdownItem>\r\n            <DropdownItem>\r\n              {t(\"Save\")}{\" \"}\r\n              <i className=\"ri-save-line float-right text-muted\"></i>\r\n            </DropdownItem>\r\n            <DropdownItem onClick={toggle}>\r\n              Forward{\" \"}\r\n              <i className=\"ri-chat-forward-line float-right text-muted\"></i>\r\n            </DropdownItem>\r\n            <DropdownItem onClick={() => deleteMessage(message.id)}>\r\n              Delete{\" \"}\r\n              <i className=\"ri-delete-bin-line float-right text-muted\"></i>\r\n            </DropdownItem>\r\n          </DropdownMenu>\r\n        </UncontrolledDropdown>\r\n      );\r\n    }\r\n  };\r\n\r\n  const photo = () => {\r\n    if (activeChat.profilePicture) {\r\n      return <img src={activeChat.profilePicture} alt=\"chatvia\" />;\r\n    } else {\r\n      return (\r\n        <div className=\"chat-user-img align-self-center mr-3\">\r\n          <div className=\"avatar-xs\">\r\n            <span className=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n              {message.userName && message.userName.trim().charAt(0)}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n   /* const isTyping = () => {\r\n    if (activeChat.isTyping)\r\n      return (\r\n        <p className=\"mb-0\">\r\n          typing\r\n          <span className=\"animate-typing\">\r\n            <span className=\"dot ml-1\"></span>\r\n            <span className=\"dot ml-1\"></span>\r\n            <span className=\"dot ml-1\"></span>\r\n          </span>\r\n        </p>\r\n      );\r\n  };  */\r\n\r\n  const image = () => {\r\n    if (message.isImageMessage && false)\r\n      return <ImageList image={message.fileUrl} />;\r\n  };\r\n\r\n  const file = () => {\r\n    if (message.isFileMessage && false)\r\n      return <FileList fileName={message.fileUrl} fileSize={message.fileUrl} />;\r\n  };\r\n\r\n  return (\r\n    <li className={user.id === message.fromUser ? \"right\" : \"\"}>\r\n      <div className=\"conversation-list\">\r\n        <div className=\"chat-avatar\">{photo()}</div>\r\n\r\n        <div\r\n          className={\r\n            \"user-chat-content \" +\r\n            (user.id === message.fromUser\r\n              ? \"message-chat-left\"\r\n              : \"message-chat-right\")\r\n          }\r\n        >\r\n          <div className=\"ctext-wrap\">\r\n            <div className=\"ctext-wrap-content\">\r\n              {messageText()}\r\n              {image()}\r\n              {file()}\r\n              {messageFooter()}{/* \r\n               {isTyping()} */}\r\n            </div>\r\n            {option()}\r\n          </div>\r\n          <div className=\"conversation-name\">{message.userName}</div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ChatMessage;\r\n"]},"metadata":{},"sourceType":"module"}