{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Button}from\"reactstrap\";import SimpleBar from\"simplebar-react\";import{useChat}from\"../contexts/ChatContext\";import AttachedFilesOnSidebar from\"./AttachedFilesOnSidebar\";import ReactImageFallback from\"react-image-fallback\";import defaultAvatar from\"../assets/images/default.png\";import{onImgError}from\"../helpers/ImageUtils\";import{useGroup}from\"../contexts/GroupContext\";import{useContact}from\"../contexts/ContactContext\";import{useAuth}from\"../contexts/AuthContext\";import{useModal}from\"./../contexts/ModalContext\";import ModalAddMember from\"./ModalAddMember\";import{Input}from\"@material-ui/core\";import UserStatusOnProfileSidebar from\"./UserStatusOnProfileSidebar\";import ChangeGroupNameButton from\"./ChangeGroupNameButton\";import LeaveGroupButton from'./LeaveGroupButton';import InfoHeadOnSidebar from'./InfoHeadOnSidebar';import MembersOnSidebar from'./MembersOnSidebar';import FavoritedMessages from\"./FavoritedMessages\";var ChatProfileSidebar=function ChatProfileSidebar(_ref){var _activeChat$members,_activeChat$members2,_activeChat$members3;var show=_ref.show,setShow=_ref.setShow;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isOpen1=_useState2[0],setIsOpen1=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpen2=_useState4[0],setIsOpen2=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isOpen3=_useState6[0],setIsOpen3=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newGroupName=_useState8[0],setGroupName=_useState8[1];var _useAuth=useAuth(),user=_useAuth.user;var _useChat=useChat(),activeChat=_useChat.activeChat,chats=_useChat.chats,setChats=_useChat.setChats,setActiveChat=_useChat.setActiveChat;var _useGroup=useGroup(),groups=_useGroup.groups,setGroups=_useGroup.setGroups;var _useContact=useContact(),contacts=_useContact.contacts,setContacts=_useContact.setContacts;var _useModal=useModal(),setShowModalAddMember=_useModal.setShowModalAddMember;var toggleCollapse1=function toggleCollapse1(){setIsOpen1(!isOpen1);};var toggleCollapse2=function toggleCollapse2(){setIsOpen2(!isOpen2);};var toggleCollapse3=function toggleCollapse3(){setIsOpen3(!isOpen3);};var closeUserSidebar=function closeUserSidebar(){setShow(false);};var getAttachedFiles=function getAttachedFiles(){if(show&&activeChat.attachedFileList===undefined){setActiveChat(_objectSpread(_objectSpread({},activeChat),{},{attachedFileList:[]}));}else if(!show){setActiveChat(_objectSpread(_objectSpread({},activeChat),{},{attachedFileList:undefined}));}};useEffect(getAttachedFiles,[show]);var closeUserSidebarOnActiveChatChange=function closeUserSidebarOnActiveChatChange(){if(show&&activeChat.attachedFileList===undefined)closeUserSidebar();};useEffect(closeUserSidebarOnActiveChatChange,[activeChat]);var actualMember=(_activeChat$members=activeChat.members)===null||_activeChat$members===void 0?void 0:_activeChat$members.find(function(member){return member.userId===user.id;});var isAdmin=(actualMember===null||actualMember===void 0?void 0:actualMember.role)===\"admin\";//const groupAdmins = activeChat.members?.filter((member) => member.role === \"admin\");\nvar actualMembers=(_activeChat$members2=activeChat.members)===null||_activeChat$members2===void 0?void 0:_activeChat$members2.map(function(mb){return mb.userId;});var isGroup=activeChat.groupId;var membersArrayPreventingDuplicateDisplayMember=(_activeChat$members3=activeChat.members)===null||_activeChat$members3===void 0?void 0:_activeChat$members3.filter(function(item,index,arrayCompleto){return arrayCompleto.findIndex(function(item2){return item.userId===item2.userId;})===index;});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:{display:show?\"block\":\"none\"},className:\"user-profile-sidebar \"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\",style:{justifyContent:\"center\"}},isGroup&&isAdmin&&/*#__PURE__*/React.createElement(\"div\",{className:\"px-3 px-lg-4 pt-3 pt-lg-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-nav text-right\"},/*#__PURE__*/React.createElement(Button,{color:\"none\",type:\"button\",className:\"nav-btn\",onClick:function onClick(){return setShowModalAddMember(true);}},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-user-add-line\"})))),/*#__PURE__*/React.createElement(ModalAddMember,null),isGroup&&/*#__PURE__*/React.createElement(LeaveGroupButton,{activeChat:activeChat,actualMember:actualMember}),isGroup&&/*#__PURE__*/React.createElement(\"div\",{className:\"px-3 px-lg-4 pt-3 pt-lg-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-chat-nav text-right\"},/*#__PURE__*/React.createElement(Button,{color:\"none\",type:\"button\",onClick:closeUserSidebar,className:\"nav-btn\",id:\"user-profile-hide\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-close-line\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center p-4 border-bottom\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-4 d-flex justify-content-center\"},!activeChat.profilePicture?/*#__PURE__*/React.createElement(\"div\",{className:\"avatar-lg\"},/*#__PURE__*/React.createElement(\"span\",{className:\"avatar-title rounded-circle bg-soft-primary text-primary font-size-24\"},activeChat.name.trim().charAt(0))):/*#__PURE__*/React.createElement(ReactImageFallback,{src:activeChat.profilePicture,onError:function onError(){if(activeChat.jid.includes(\"@conference.\"))onImgError(chats,groups,contacts,setChats,setGroups,setContacts,activeChat);},fallbackImage:defaultAvatar,className:\"rounded-circle avatar-lg img-thumbnail\",alt:\"chatvia\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},isGroup?/*#__PURE__*/React.createElement(Input,{inputProps:{min:0,style:{textAlign:\"center\"}},placeholder:activeChat.name,disableUnderline:true,fullWidth:true,onChange:function onChange(e){return setGroupName(e.target.value);}}):/*#__PURE__*/React.createElement(\"div\",null,activeChat.name)),isGroup&&newGroupName.length>0?/*#__PURE__*/React.createElement(ChangeGroupNameButton,{newGroupName:newGroupName,setGroupName:setGroupName,actualMembers:actualMembers}):isGroup&&/*#__PURE__*/React.createElement(\"i\",{className:\"ri-edit-line\"}),activeChat.status&&/*#__PURE__*/React.createElement(UserStatusOnProfileSidebar,null)),/*#__PURE__*/React.createElement(SimpleBar,{style:{maxHeight:\"100%\"},className:\"p-4 user-profile-desc\"},/*#__PURE__*/React.createElement(\"div\",{id:\"profile-user-accordion\",className:\"custom-accordion\"},/*#__PURE__*/React.createElement(InfoHeadOnSidebar,{activeChat:activeChat,toggleCollapse1:toggleCollapse1,isOpen1:isOpen1}),activeChat.jid.includes(\"@conference.\")&&/*#__PURE__*/React.createElement(MembersOnSidebar,{isAdmin:isAdmin,isOpen2:isOpen2,defaultAvatar:defaultAvatar,toggleCollapse2:toggleCollapse2,membersArrayPreventingDuplicateDisplayMember:membersArrayPreventingDuplicateDisplayMember}),/*#__PURE__*/React.createElement(FavoritedMessages,{isOpen3:isOpen3,toggleCollapse3:toggleCollapse3,membersArrayPreventingDuplicateDisplayMember:membersArrayPreventingDuplicateDisplayMember}),/*#__PURE__*/React.createElement(AttachedFilesOnSidebar,null)))));};export default ChatProfileSidebar;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatProfileSidebar.tsx"],"names":["React","useEffect","useState","Button","SimpleBar","useChat","AttachedFilesOnSidebar","ReactImageFallback","defaultAvatar","onImgError","useGroup","useContact","useAuth","useModal","ModalAddMember","Input","UserStatusOnProfileSidebar","ChangeGroupNameButton","LeaveGroupButton","InfoHeadOnSidebar","MembersOnSidebar","FavoritedMessages","ChatProfileSidebar","show","setShow","isOpen1","setIsOpen1","isOpen2","setIsOpen2","isOpen3","setIsOpen3","newGroupName","setGroupName","user","activeChat","chats","setChats","setActiveChat","groups","setGroups","contacts","setContacts","setShowModalAddMember","toggleCollapse1","toggleCollapse2","toggleCollapse3","closeUserSidebar","getAttachedFiles","attachedFileList","undefined","closeUserSidebarOnActiveChatChange","actualMember","members","find","member","userId","id","isAdmin","role","actualMembers","map","mb","isGroup","groupId","membersArrayPreventingDuplicateDisplayMember","filter","item","index","arrayCompleto","findIndex","item2","display","justifyContent","profilePicture","name","trim","charAt","jid","includes","min","style","textAlign","e","target","value","length","status","maxHeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Button } from \"reactstrap\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport AttachedFilesOnSidebar from \"./AttachedFilesOnSidebar\";\r\nimport ReactImageFallback from \"react-image-fallback\";\r\nimport defaultAvatar from \"../assets/images/default.png\";\r\nimport { onImgError } from \"../helpers/ImageUtils\";\r\nimport { useGroup } from \"../contexts/GroupContext\";\r\nimport { useContact } from \"../contexts/ContactContext\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useModal } from \"./../contexts/ModalContext\";\r\nimport ModalAddMember from \"./ModalAddMember\";\r\nimport { Input } from \"@material-ui/core\";\r\nimport UserStatusOnProfileSidebar from \"./UserStatusOnProfileSidebar\";\r\nimport ChangeGroupNameButton from \"./ChangeGroupNameButton\";\r\nimport LeaveGroupButton from './LeaveGroupButton';\r\nimport InfoHeadOnSidebar from './InfoHeadOnSidebar';\r\nimport MembersOnSidebar from './MembersOnSidebar';\r\nimport FavoritedMessages from \"./FavoritedMessages\";\r\ninterface IProps {\r\n  show: boolean;\r\n  setShow(value: boolean): void;\r\n}\r\nconst ChatProfileSidebar: React.FC<IProps> = ({ show, setShow }) => {\r\n  const [isOpen1, setIsOpen1] = useState(true);\r\n  const [isOpen2, setIsOpen2] = useState(false);\r\n  const [isOpen3, setIsOpen3] = useState(false);\r\n  const [newGroupName, setGroupName] = useState(\"\");\r\n  const { user } = useAuth();\r\n  const {\r\n    activeChat,\r\n    chats,\r\n    setChats,\r\n    setActiveChat,\r\n  } = useChat();\r\n  const {\r\n    groups,\r\n    setGroups,\r\n  } = useGroup();\r\n  const {\r\n    contacts,\r\n    setContacts,\r\n  } = useContact();\r\n  const { setShowModalAddMember } = useModal();\r\n  const toggleCollapse1 = () => {\r\n      setIsOpen1(!isOpen1);\r\n  };\r\n  const toggleCollapse2 = () => {\r\n    setIsOpen2(!isOpen2);\r\n  };\r\n  const toggleCollapse3 = () => {\r\n    setIsOpen3(!isOpen3);\r\n  };\r\n\r\n  const closeUserSidebar = () => {\r\n    setShow(false);\r\n  };\r\n  const getAttachedFiles = () => {\r\n    if (show && activeChat.attachedFileList === undefined) {\r\n      setActiveChat({ ...activeChat, attachedFileList: [] });\r\n    } else if (!show) {\r\n      setActiveChat({ ...activeChat, attachedFileList: undefined });\r\n    }\r\n  };\r\n  useEffect(getAttachedFiles, [show]);\r\n  const closeUserSidebarOnActiveChatChange = () => {\r\n    if (show && activeChat.attachedFileList === undefined) closeUserSidebar();\r\n  };\r\n  useEffect(closeUserSidebarOnActiveChatChange, [activeChat]);\r\n  const actualMember = activeChat.members?.find(\r\n    (member) => member.userId === user.id\r\n  );\r\n  const isAdmin = actualMember?.role === \"admin\";\r\n  //const groupAdmins = activeChat.members?.filter((member) => member.role === \"admin\");\r\n  const actualMembers = activeChat.members?.map((mb) => {\r\n    return mb.userId;\r\n  });\r\n  const isGroup = activeChat.groupId;\r\n  const membersArrayPreventingDuplicateDisplayMember = activeChat.members?.filter(\r\n  (item,index,arrayCompleto) => \r\n  arrayCompleto.findIndex(item2 => \r\n  (item.userId === item2.userId)) === index);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        style={{ display: show ? \"block\" : \"none\" }}\r\n        className=\"user-profile-sidebar \"\r\n      >\r\n        <div className=\"d-flex\" style={{ justifyContent: \"center\" }}>\r\n          {isGroup && isAdmin && (\r\n            <div className=\"px-3 px-lg-4 pt-3 pt-lg-4\">\r\n              <div className=\"user-chat-nav text-right\">\r\n                <Button\r\n                  color=\"none\"\r\n                  type=\"button\"\r\n                  className=\"nav-btn\"\r\n                  onClick={() => setShowModalAddMember(true)}\r\n                >\r\n                  <i className=\"ri-user-add-line\"></i>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <ModalAddMember />\r\n          {isGroup && (\r\n            <LeaveGroupButton activeChat={activeChat} actualMember={actualMember}/>\r\n          )}\r\n          {isGroup && (\r\n            <div className=\"px-3 px-lg-4 pt-3 pt-lg-4\">\r\n              <div className=\"user-chat-nav text-right\">\r\n                <Button\r\n                  color=\"none\"\r\n                  type=\"button\"\r\n                  onClick={closeUserSidebar}\r\n                  className=\"nav-btn\"\r\n                  id=\"user-profile-hide\"\r\n                >\r\n                  <i className=\"ri-close-line\"></i>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"text-center p-4 border-bottom\">\r\n          <div className=\"mb-4 d-flex justify-content-center\">\r\n            {!activeChat.profilePicture ? (\r\n              <div className=\"avatar-lg\">\r\n                <span className=\"avatar-title rounded-circle bg-soft-primary text-primary font-size-24\">\r\n                  {activeChat.name.trim().charAt(0)}\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <ReactImageFallback\r\n                src={activeChat.profilePicture}\r\n                onError={() => {\r\n                  if (activeChat.jid.includes(\"@conference.\"))\r\n                    onImgError(\r\n                      chats,\r\n                      groups,\r\n                      contacts,\r\n                      setChats,\r\n                      setGroups,\r\n                      setContacts,\r\n                      activeChat\r\n                    );\r\n                }}\r\n                fallbackImage={defaultAvatar}\r\n                className=\"rounded-circle avatar-lg img-thumbnail\"\r\n                alt=\"chatvia\"\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            {isGroup ? (\r\n              <Input\r\n                inputProps={{ min: 0, style: { textAlign: \"center\" } }}\r\n                placeholder={activeChat.name}\r\n                disableUnderline\r\n                fullWidth\r\n                onChange={(e) => setGroupName(e.target.value)}\r\n              />\r\n            ) : (\r\n              <div>{activeChat.name}</div>\r\n            )}\r\n          </div>\r\n          {isGroup && newGroupName.length > 0 ? (\r\n            <ChangeGroupNameButton newGroupName={newGroupName} setGroupName={setGroupName} actualMembers={actualMembers}/>\r\n          ) : (\r\n            isGroup && <i className=\"ri-edit-line\"></i>\r\n          )}\r\n          {activeChat.status && (\r\n            <UserStatusOnProfileSidebar/>\r\n          )}\r\n        </div>\r\n        <SimpleBar\r\n          style={{ maxHeight: \"100%\" }}\r\n          className=\"p-4 user-profile-desc\"\r\n        >\r\n          <div id=\"profile-user-accordion\" className=\"custom-accordion\">\r\n            <InfoHeadOnSidebar activeChat={activeChat} toggleCollapse1={toggleCollapse1} isOpen1={isOpen1} />\r\n            {activeChat.jid.includes(\"@conference.\") && (\r\n              <MembersOnSidebar isAdmin={isAdmin} \r\n              isOpen2={isOpen2} \r\n              defaultAvatar={defaultAvatar} \r\n              toggleCollapse2={toggleCollapse2} \r\n              membersArrayPreventingDuplicateDisplayMember={membersArrayPreventingDuplicateDisplayMember}/>\r\n            )}\r\n            <FavoritedMessages\r\n              isOpen3={isOpen3} \r\n              toggleCollapse3={toggleCollapse3} \r\n              membersArrayPreventingDuplicateDisplayMember={membersArrayPreventingDuplicateDisplayMember}/>\r\n            <AttachedFilesOnSidebar />\r\n          </div>\r\n        </SimpleBar>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ChatProfileSidebar;"]},"metadata":{},"sourceType":"module"}