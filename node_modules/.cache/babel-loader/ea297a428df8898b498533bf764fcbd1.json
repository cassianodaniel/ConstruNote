{"ast":null,"code":"import { parseChats } from \"../utils/parseUtils\";\nexport default class ChatsBusiness {\n  constructor(api, contacts, groups, user) {\n    this.api = api;\n    this.contacts = contacts;\n    this.groups = groups;\n    this.user = user;\n  }\n\n  list(callback) {\n    if (!this.api) return;\n    this.contacts.list(__ => {\n      this.groups.list(__ => {\n        this.api.getChats({\n          paramsUrl: {\n            limit: 5000\n          }\n        }, response => {\n          //Retornando os Chats\n          if (!this.api) {\n            return;\n          }\n\n          this.user.get(user => {\n            this.contacts.listAllUsers(ctcs => {\n              const returnChats = parseChats(response.chats, this.groups.getGroups(), ctcs, user);\n              callback(returnChats);\n            });\n          });\n        });\n      });\n    });\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/services/business/Chats.ts"],"names":["parseChats","ChatsBusiness","constructor","api","contacts","groups","user","list","callback","__","getChats","paramsUrl","limit","response","get","listAllUsers","ctcs","returnChats","chats","getGroups"],"mappings":"AAEA,SAASA,UAAT,QAA2B,qBAA3B;AASA,eAAe,MAAMC,aAAN,CAAoB;AACjCC,EAAAA,WAAW,CACDC,GADC,EAEDC,QAFC,EAGDC,MAHC,EAIDC,IAJC,EAKT;AAAA,SAJQH,GAIR,GAJQA,GAIR;AAAA,SAHQC,QAGR,GAHQA,QAGR;AAAA,SAFQC,MAER,GAFQA,MAER;AAAA,SADQC,IACR,GADQA,IACR;AAAE;;AACJC,EAAAA,IAAI,CAACC,QAAD,EAA0B;AAC5B,QAAI,CAAC,KAAKL,GAAV,EAAe;AACf,SAAKC,QAAL,CAAcG,IAAd,CAAoBE,EAAD,IAAQ;AACzB,WAAKJ,MAAL,CAAYE,IAAZ,CAAkBE,EAAD,IAAQ;AACvB,aAAKN,GAAL,CAASO,QAAT,CAAkB;AAAEC,UAAAA,SAAS,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT;AAAb,SAAlB,EAAmDC,QAAD,IAAmB;AACnE;AACA,cAAI,CAAC,KAAKV,GAAV,EAAe;AACb;AACD;;AACD,eAAKG,IAAL,CAAUQ,GAAV,CAAeR,IAAD,IAAU;AACtB,iBAAKF,QAAL,CAAcW,YAAd,CAA4BC,IAAD,IAAU;AACnC,oBAAMC,WAAoB,GAAGjB,UAAU,CACrCa,QAAQ,CAACK,KAD4B,EAErC,KAAKb,MAAL,CAAYc,SAAZ,EAFqC,EAGrCH,IAHqC,EAIrCV,IAJqC,CAAvC;AAMAE,cAAAA,QAAQ,CAACS,WAAD,CAAR;AACD,aARD;AASD,WAVD;AAWD,SAhBD;AAiBD,OAlBD;AAmBD,KApBD;AAqBD;;AA9BgC","sourcesContent":["import API from \"@digivox/apicommunicator\";\r\nimport IChat from \"../../alias/IChat\";\r\nimport { parseChats } from \"../utils/parseUtils\";\r\nimport ContactsBusiness from \"./Contacts\";\r\nimport GroupsBusiness from \"./Groups\";\r\nimport UserBusiness from \"./User\";\r\n\r\ninterface ChatsCallBack {\r\n  (chats: IChat[]): void;\r\n}\r\nexport default interface ChatsBusiness {}\r\nexport default class ChatsBusiness {\r\n  constructor(\r\n    private api: API,\r\n    private contacts: ContactsBusiness,\r\n    private groups: GroupsBusiness,\r\n    private user: UserBusiness\r\n  ) {}\r\n  list(callback: ChatsCallBack) {\r\n    if (!this.api) return;\r\n    this.contacts.list((__) => {\r\n      this.groups.list((__) => {\r\n        this.api.getChats({ paramsUrl: { limit: 5000 } }, (response: any) => {\r\n          //Retornando os Chats\r\n          if (!this.api) {\r\n            return;\r\n          }\r\n          this.user.get((user) => {\r\n            this.contacts.listAllUsers((ctcs) => {\r\n              const returnChats: IChat[] = parseChats(\r\n                response.chats,\r\n                this.groups.getGroups(),\r\n                ctcs,\r\n                user\r\n              );\r\n              callback(returnChats);\r\n            });\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}