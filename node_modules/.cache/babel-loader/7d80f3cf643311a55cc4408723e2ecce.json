{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useCall}from\"../contexts/CallContext\";import{tagsRange}from\"../services/voice/voicecommunicator\";import{motion}from\"framer-motion\";import{height,width}from\"../helpers/windowSize\";import{Button}from\"reactstrap\";import Swal from\"sweetalert2\";import{useTranslation}from\"react-i18next\";var VideoBox=function VideoBox(){var _useTranslation=useTranslation(),t=_useTranslation.t;var toggleOpacity=function toggleOpacity(){if(flagToTimeOut===true){setFlagToOpacity(true);setFlagToTimeOut(false);setTimeout(function(){setFlagToOpacity(false);setFlagToTimeOut(true);},6000);}};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),flagToOpacity=_useState2[0],setFlagToOpacity=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),flagToTimeOut=_useState4[0],setFlagToTimeOut=_useState4[1];var _useState5=useState(400),_useState6=_slicedToArray(_useState5,2),widthBox=_useState6[0],setWidthBox=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),pictureInPictureEnabled=_useState8[0],setPictureInPictureEnabled=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),pictureInPictureTag=_useState10[0],setPictureInPictureTag=_useState10[1];var _useCall=useCall(),currentCalls=_useCall.currentCalls,setConferenceCommand=_useCall.setConferenceCommand;var togglePictureInPicture=function togglePictureInPicture(tagId){var doc=document;if(!doc.pictureInPictureElement&&doc.pictureInPictureEnabled){var _video=document.querySelector(\"#remote-stream-\".concat(tagId));_video===null||_video===void 0?void 0:_video.requestPictureInPicture().catch(function(error){});}else{if(doc.pictureInPictureEnabled){document.exitPictureInPicture().catch(function(error){});}}};var listenPictureInPictureChanges=function listenPictureInPictureChanges(){tagsRange.forEach(function(tagId){var videoEl=document.querySelector(\"#remote-stream-\".concat(tagId));if(videoEl&&!videoEl.disablePictureInPicture){videoEl.addEventListener(\"enterpictureinpicture\",function(){// Video entered Picture-in-Picture mode.\nsetPictureInPictureEnabled(true);setPictureInPictureTag(tagId);});videoEl.addEventListener(\"leavepictureinpicture\",function(){// Video left Picture-in-Picture mode.\nsetPictureInPictureEnabled(false);setPictureInPictureTag(undefined);});}});};var removeListeners=function removeListeners(){tagsRange.forEach(function(tagId){var videoEl=document.querySelector(\"#remote-stream-\".concat(tagId));if(videoEl){videoEl.removeEventListener(\"enterpictureinpicture\",function(){});videoEl.removeEventListener(\"leavepictureinpicture\",function(){});}});};var isVisible=function isVisible(tagId){var callTag=getCallByTag(tagId);return callTag&&pictureInPictureTag!==tagId&&(callTag.sendingVideo||(callTag===null||callTag===void 0?void 0:callTag.receivingVideo));};var getCallByTag=function getCallByTag(tagId){return Array.from(currentCalls.values()).find(function(call){return call.tagId===\"remote-stream-\".concat(tagId);});};var sendConfCommand=function sendConfCommand(call,command){var _call$conferenceParti;if(call&&((_call$conferenceParti=call.conferenceParticipants)===null||_call$conferenceParti===void 0?void 0:_call$conferenceParti.length)){var callName=call.session.remoteIdentity.uri.aor.split(\"@\")[0];var participant=call.conferenceParticipants.find(function(p){return p.callName===callName;});if(participant){setConferenceCommand({command:command,conferenceId:participant.conferenceName,extraParam:\"\".concat(participant.memberId)});}}};removeListeners();listenPictureInPictureChanges();var boxVideo={position:\"fixed\",right:\"50px\",bottom:\"50px\",zIndex:100,maxWidth:\"\".concat(widthBox,\"px\"),borderRadius:\"2px\",backgroundColor:\"#000000\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\"};var video={position:\"relative\",width:\"\".concat(widthBox,\"px\")};var optionBox={position:\"absolute\",zIndex:10,top:\"2%\",right:\"2%\",color:\"#ffffff\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"};var option={cursor:\"pointer\",marginLeft:\"5px\",fontSize:\"18px\",padding:\"5px\"};var buttonBox={position:\"absolute\",zIndex:10,width:\"100%\",bottom:0,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",flexDirection:\"row\"};var plus={position:\"absolute\",bottom:\"10px\",right:\"10px\",zIndex:13,color:\"black\"};var minus={position:\"absolute\",bottom:\"10px\",right:\"30px\",zIndex:13,color:\"black\"};return/*#__PURE__*/React.createElement(\"div\",null,tagsRange.map(function(tagId){var _getCallByTag4,_getCallByTag5,_getCallByTag9,_getCallByTag10,_getCallByTag15,_getCallByTag16,_getCallByTag17,_getCallByTag17$confe;return/*#__PURE__*/React.createElement(motion.div,{drag:true,dragConstraints:{top:(height()-300)*-1,bottom:0,left:(width()-400)*-1,right:0},style:_objectSpread(_objectSpread({},boxVideo),{},{display:isVisible(tagId)?boxVideo.display:\"none\"}),key:\"remote-stream-\".concat(tagId)},/*#__PURE__*/React.createElement(\"div\",{style:optionBox},flagToOpacity&&document.pictureInPictureEnabled?/*#__PURE__*/React.createElement(React.Fragment,null,!pictureInPictureEnabled&&/*#__PURE__*/React.createElement(\"div\",{style:option,onClick:function onClick(){return togglePictureInPicture(tagId);}},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundColor:\"white\",borderRadius:4,color:\"black\"},className:\"ri-picture-in-picture-2-line\"})),pictureInPictureTag===tagId&&/*#__PURE__*/React.createElement(\"div\",{style:option,onClick:function onClick(){return togglePictureInPicture(tagId);}},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundColor:\"white\",borderRadius:4,color:\"black\"},className:\"ri-picture-in-picture-exit-line\"})),/*#__PURE__*/React.createElement(\"div\",{style:option,onClick:function onClick(){if(widthBox===width()-300){setWidthBox(400);}else{setWidthBox(width()-300);}}},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundColor:\"white\",borderRadius:4,color:\"black\"},className:\"ri-window-2-fill\"}))):null,flagToOpacity&&/*#__PURE__*/React.createElement(\"div\",{style:option,onClick:function onClick(){var call=getCallByTag(tagId);(call===null||call===void 0?void 0:call.endCall)&&call.endCall();}},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundColor:\"white\",borderRadius:4,color:\"black\"},className:\"ri-close-line\"}))),flagToOpacity&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{style:buttonBox},/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){var call=getCallByTag(tagId);(call===null||call===void 0?void 0:call.endCall)&&call.endCall();},className:\"nav-btn user-profile-show btn-head-conference red\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-phone-line\"})),/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){var _getCallByTag;if((_getCallByTag=getCallByTag(tagId))===null||_getCallByTag===void 0?void 0:_getCallByTag.micMuted){var _getCallByTag2;(_getCallByTag2=getCallByTag(tagId))===null||_getCallByTag2===void 0?void 0:_getCallByTag2.unMuteMic();}else{var _getCallByTag3;(_getCallByTag3=getCallByTag(tagId))===null||_getCallByTag3===void 0?void 0:_getCallByTag3.muteMic();}sendConfCommand(getCallByTag(tagId),\"tmute\");},className:\"nav-btn user-profile-show btn-head-conference \".concat(((_getCallByTag4=getCallByTag(tagId))===null||_getCallByTag4===void 0?void 0:_getCallByTag4.micMuted)?\"red\":\"white\")},!((_getCallByTag5=getCallByTag(tagId))===null||_getCallByTag5===void 0?void 0:_getCallByTag5.micMuted)?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-mic-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-mic-off-line\"})),/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){var _getCallByTag6,_getCallByTag7,_getCallByTag8;if((_getCallByTag6=getCallByTag(tagId))===null||_getCallByTag6===void 0?void 0:_getCallByTag6.hold)(_getCallByTag7=getCallByTag(tagId))===null||_getCallByTag7===void 0?void 0:_getCallByTag7.unHoldCall();else(_getCallByTag8=getCallByTag(tagId))===null||_getCallByTag8===void 0?void 0:_getCallByTag8.holdCall();},className:\"nav-btn user-profile-show btn-head-conference \".concat(((_getCallByTag9=getCallByTag(tagId))===null||_getCallByTag9===void 0?void 0:_getCallByTag9.hold)?\"red\":\"white\")},((_getCallByTag10=getCallByTag(tagId))===null||_getCallByTag10===void 0?void 0:_getCallByTag10.hold)?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-play-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-pause-line\"})),/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){var _getCallByTag11;if((_getCallByTag11=getCallByTag(tagId))===null||_getCallByTag11===void 0?void 0:_getCallByTag11.sendingVideo){var _getCallByTag12;if((_getCallByTag12=getCallByTag(tagId))===null||_getCallByTag12===void 0?void 0:_getCallByTag12.videoMuted){var _getCallByTag13;(_getCallByTag13=getCallByTag(tagId))===null||_getCallByTag13===void 0?void 0:_getCallByTag13.enableCam();}else{var _getCallByTag14;(_getCallByTag14=getCallByTag(tagId))===null||_getCallByTag14===void 0?void 0:_getCallByTag14.disableCam();}sendConfCommand(getCallByTag(tagId),\"tvmute\");}else{alert(\"Mudança de tipo de chamada ainda não está disponivel :(\");}},className:\"nav-btn user-profile-show btn-head-conference white \".concat(((_getCallByTag15=getCallByTag(tagId))===null||_getCallByTag15===void 0?void 0:_getCallByTag15.videoMuted)?\"red\":\"white\")},((_getCallByTag16=getCallByTag(tagId))===null||_getCallByTag16===void 0?void 0:_getCallByTag16.videoMuted)?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-camera-off-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-camera-line\"}))),/*#__PURE__*/React.createElement(\"div\",{style:plus},/*#__PURE__*/React.createElement(\"span\",{style:_objectSpread(_objectSpread({},option),{},{fontSize:\"14px\"}),onClick:function onClick(){setWidthBox(widthBox+100);}},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundColor:\"white\",borderRadius:4},className:\"ri-add-line\"}))),/*#__PURE__*/React.createElement(\"div\",{style:minus},/*#__PURE__*/React.createElement(\"span\",{style:_objectSpread(_objectSpread({},option),{},{fontSize:\"14px\"}),onClick:function onClick(){if(widthBox>400){setWidthBox(widthBox-100);}else{Swal.fire({position:\"top-end\",icon:\"error\",title:t(\"Size can not be smaller\"),showConfirmButton:false,timer:3000,customClass:{popup:\"swal-mini-popup\"}});}}},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundColor:\"white\",borderRadius:4},className:\"ri-subtract-line\"})))),/*#__PURE__*/React.createElement(\"video\",{style:video,onMouseOver:toggleOpacity,id:\"remote-stream-\".concat(tagId),hidden:!isVisible(tagId)}),/*#__PURE__*/React.createElement(\"ul\",{style:{position:\"absolute\",background:\"white\",border:\"1px solid #000\",width:\"100%\",minHeight:\"100px\",left:0,bottom:\"-116px\"}},(_getCallByTag17=getCallByTag(tagId))===null||_getCallByTag17===void 0?void 0:(_getCallByTag17$confe=_getCallByTag17.conferenceParticipants)===null||_getCallByTag17$confe===void 0?void 0:_getCallByTag17$confe.map(function(participant){return/*#__PURE__*/React.createElement(\"li\",{key:participant.memberId},participant.callerName,\" -\",/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(e){e.preventDefault();setConferenceCommand({command:\"tmute\",conferenceId:participant.conferenceName,extraParam:\"\".concat(participant.memberId)});}},!participant.mute?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-mic-off-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-mic-line\"}),\" \",\"|\"),/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(e){e.preventDefault();setConferenceCommand({command:\"tvmute\",conferenceId:participant.conferenceName,extraParam:\"\".concat(participant.memberId)});}},\" \",!participant.video?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-camera-off-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-camera-line\"}),\" \"),participant.talking?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-volume-up-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-volume-down-line\"}));})));}));};export default VideoBox;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/VideoBox.tsx"],"names":["React","useState","useCall","tagsRange","motion","height","width","Button","Swal","useTranslation","VideoBox","t","toggleOpacity","flagToTimeOut","setFlagToOpacity","setFlagToTimeOut","setTimeout","flagToOpacity","widthBox","setWidthBox","pictureInPictureEnabled","setPictureInPictureEnabled","undefined","pictureInPictureTag","setPictureInPictureTag","currentCalls","setConferenceCommand","togglePictureInPicture","tagId","doc","document","pictureInPictureElement","video","querySelector","requestPictureInPicture","catch","error","exitPictureInPicture","listenPictureInPictureChanges","forEach","videoEl","disablePictureInPicture","addEventListener","removeListeners","removeEventListener","isVisible","callTag","getCallByTag","sendingVideo","receivingVideo","Array","from","values","find","call","sendConfCommand","command","conferenceParticipants","length","callName","session","remoteIdentity","uri","aor","split","participant","p","conferenceId","conferenceName","extraParam","memberId","boxVideo","position","right","bottom","zIndex","maxWidth","borderRadius","backgroundColor","display","justifyContent","alignItems","optionBox","top","color","option","cursor","marginLeft","fontSize","padding","buttonBox","flexDirection","plus","minus","map","left","endCall","micMuted","unMuteMic","muteMic","hold","unHoldCall","holdCall","videoMuted","enableCam","disableCam","alert","fire","icon","title","showConfirmButton","timer","customClass","popup","background","border","minHeight","callerName","e","preventDefault","mute","talking"],"mappings":"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","sourcesContent":["import React, { CSSProperties, useState } from \"react\";\r\nimport { useCall } from \"../contexts/CallContext\";\r\nimport { tagsRange } from \"../services/voice/voicecommunicator\";\r\nimport { motion } from \"framer-motion\";\r\nimport { height, width } from \"../helpers/windowSize\";\r\nimport { Button } from \"reactstrap\";\r\nimport Swal from \"sweetalert2\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport ICall from \"../alias/ICall\";\r\n\r\ninterface DocumentPictureInPicture extends Document {\r\n  pictureInPictureEnabled: boolean;\r\n  pictureInPictureElement: HTMLVideoElementPictureInPicture;\r\n  exitPictureInPicture(): Promise<any>;\r\n}\r\n\r\ninterface HTMLVideoElementPictureInPicture extends HTMLVideoElement {\r\n  requestPictureInPicture(): Promise<any>;\r\n  disablePictureInPicture: any;\r\n}\r\n\r\nconst VideoBox: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const toggleOpacity = () => {\r\n    if (flagToTimeOut === true) {\r\n      setFlagToOpacity(true);\r\n      setFlagToTimeOut(false);\r\n      setTimeout(() => {\r\n        setFlagToOpacity(false);\r\n        setFlagToTimeOut(true);\r\n      }, 6000);\r\n    }\r\n  };\r\n\r\n  const [flagToOpacity, setFlagToOpacity] = useState<boolean>(false);\r\n  const [flagToTimeOut, setFlagToTimeOut] = useState<boolean>(true);\r\n  const [widthBox, setWidthBox] = useState(400);\r\n  const [\r\n    pictureInPictureEnabled,\r\n    setPictureInPictureEnabled,\r\n  ] = useState<boolean>(false);\r\n\r\n  const [pictureInPictureTag, setPictureInPictureTag] = useState<\r\n    number | undefined\r\n  >(undefined);\r\n\r\n  const { currentCalls, setConferenceCommand } = useCall();\r\n\r\n  const togglePictureInPicture = (tagId: number) => {\r\n    const doc = document as DocumentPictureInPicture;\r\n    if (!doc.pictureInPictureElement && doc.pictureInPictureEnabled) {\r\n      const video = document.querySelector(\r\n        `#remote-stream-${tagId}`\r\n      ) as HTMLVideoElementPictureInPicture;\r\n      video?.requestPictureInPicture().catch((error) => {});\r\n    } else {\r\n      if (doc.pictureInPictureEnabled) {\r\n        (document as DocumentPictureInPicture)\r\n          .exitPictureInPicture()\r\n          .catch((error) => {});\r\n      }\r\n    }\r\n  };\r\n\r\n  const listenPictureInPictureChanges = () => {\r\n    tagsRange.forEach((tagId) => {\r\n      const videoEl = document.querySelector(`#remote-stream-${tagId}`);\r\n      if (\r\n        videoEl &&\r\n        !(videoEl as HTMLVideoElementPictureInPicture).disablePictureInPicture\r\n      ) {\r\n        videoEl.addEventListener(\"enterpictureinpicture\", () => {\r\n          // Video entered Picture-in-Picture mode.\r\n          setPictureInPictureEnabled(true);\r\n          setPictureInPictureTag(tagId);\r\n        });\r\n        videoEl.addEventListener(\"leavepictureinpicture\", () => {\r\n          // Video left Picture-in-Picture mode.\r\n          setPictureInPictureEnabled(false);\r\n          setPictureInPictureTag(undefined);\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const removeListeners = () => {\r\n    tagsRange.forEach((tagId) => {\r\n      const videoEl = document.querySelector(`#remote-stream-${tagId}`);\r\n      if (videoEl) {\r\n        videoEl.removeEventListener(\"enterpictureinpicture\", () => {});\r\n        videoEl.removeEventListener(\"leavepictureinpicture\", () => {});\r\n      }\r\n    });\r\n  };\r\n\r\n  const isVisible = (tagId: number) => {\r\n    const callTag = getCallByTag(tagId);\r\n    return (\r\n      callTag &&\r\n      pictureInPictureTag !== tagId &&\r\n      (callTag.sendingVideo || callTag?.receivingVideo)\r\n    );\r\n  };\r\n\r\n  const getCallByTag = (tagId: number) => {\r\n    return Array.from(currentCalls.values()).find(\r\n      (call) => call.tagId === `remote-stream-${tagId}`\r\n    );\r\n  };\r\n  const sendConfCommand = (\r\n    call: ICall | undefined,\r\n    command: \"tvmute\" | \"tmute\"\r\n  ) => {\r\n    if (call && call.conferenceParticipants?.length) {\r\n      const callName = call.session.remoteIdentity.uri.aor.split(\"@\")[0];\r\n      const participant = call.conferenceParticipants.find(\r\n        (p) => p.callName === callName\r\n      );\r\n      if (participant) {\r\n        setConferenceCommand({\r\n          command,\r\n          conferenceId: participant.conferenceName,\r\n          extraParam: `${participant.memberId}`,\r\n        });\r\n      }\r\n    }\r\n  };\r\n  removeListeners();\r\n  listenPictureInPictureChanges();\r\n\r\n  const boxVideo: CSSProperties = {\r\n    position: \"fixed\",\r\n    right: \"50px\",\r\n    bottom: \"50px\",\r\n    zIndex: 100,\r\n    maxWidth: `${widthBox}px`,\r\n    borderRadius: \"2px\",\r\n    backgroundColor: \"#000000\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  };\r\n\r\n  const video: CSSProperties = {\r\n    position: \"relative\",\r\n    width: `${widthBox}px`,\r\n  };\r\n\r\n  const optionBox: CSSProperties = {\r\n    position: \"absolute\",\r\n    zIndex: 10,\r\n    top: \"2%\",\r\n    right: \"2%\",\r\n    color: \"#ffffff\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  };\r\n\r\n  const option: CSSProperties = {\r\n    cursor: \"pointer\",\r\n    marginLeft: \"5px\",\r\n    fontSize: \"18px\",\r\n    padding: \"5px\",\r\n  };\r\n\r\n  const buttonBox: CSSProperties = {\r\n    position: \"absolute\",\r\n    zIndex: 10,\r\n    width: \"100%\",\r\n    bottom: 0,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"row\",\r\n  };\r\n\r\n  const plus: CSSProperties = {\r\n    position: \"absolute\",\r\n    bottom: \"10px\",\r\n    right: \"10px\",\r\n    zIndex: 13,\r\n    color: \"black\",\r\n  };\r\n\r\n  const minus: CSSProperties = {\r\n    position: \"absolute\",\r\n    bottom: \"10px\",\r\n    right: \"30px\",\r\n    zIndex: 13,\r\n    color: \"black\",\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {tagsRange.map((tagId) => (\r\n        <motion.div\r\n          drag\r\n          dragConstraints={{\r\n            top: (height() - 300) * -1,\r\n            bottom: 0,\r\n            left: (width() - 400) * -1,\r\n            right: 0,\r\n          }}\r\n          style={{\r\n            ...boxVideo,\r\n            display: isVisible(tagId) ? boxVideo.display : \"none\",\r\n          }}\r\n          key={`remote-stream-${tagId}`}\r\n        >\r\n          <div style={optionBox}>\r\n            {flagToOpacity &&\r\n            (document as DocumentPictureInPicture).pictureInPictureEnabled ? (\r\n              <>\r\n                {!pictureInPictureEnabled && (\r\n                  <div\r\n                    style={option}\r\n                    onClick={() => togglePictureInPicture(tagId)}\r\n                  >\r\n                    <i\r\n                      style={{\r\n                        backgroundColor: \"white\",\r\n                        borderRadius: 4,\r\n                        color: \"black\",\r\n                      }}\r\n                      className=\"ri-picture-in-picture-2-line\"\r\n                    ></i>\r\n                  </div>\r\n                )}\r\n                {pictureInPictureTag === tagId && (\r\n                  <div\r\n                    style={option}\r\n                    onClick={() => togglePictureInPicture(tagId)}\r\n                  >\r\n                    <i\r\n                      style={{\r\n                        backgroundColor: \"white\",\r\n                        borderRadius: 4,\r\n                        color: \"black\",\r\n                      }}\r\n                      className=\"ri-picture-in-picture-exit-line\"\r\n                    ></i>\r\n                  </div>\r\n                )}\r\n                <div\r\n                  style={option}\r\n                  onClick={() => {\r\n                    if (widthBox === width() - 300) {\r\n                      setWidthBox(400);\r\n                    } else {\r\n                      setWidthBox(width() - 300);\r\n                    }\r\n                  }}\r\n                >\r\n                  <i\r\n                    style={{\r\n                      backgroundColor: \"white\",\r\n                      borderRadius: 4,\r\n                      color: \"black\",\r\n                    }}\r\n                    className=\"ri-window-2-fill\"\r\n                  ></i>\r\n                </div>\r\n              </>\r\n            ) : null}\r\n\r\n            {flagToOpacity && (\r\n              <div\r\n                style={option}\r\n                onClick={() => {\r\n                  const call = getCallByTag(tagId);\r\n                  call?.endCall && call.endCall();\r\n                }}\r\n              >\r\n                <i\r\n                  style={{\r\n                    backgroundColor: \"white\",\r\n                    borderRadius: 4,\r\n                    color: \"black\",\r\n                  }}\r\n                  className=\"ri-close-line\"\r\n                ></i>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {flagToOpacity && (\r\n            <>\r\n              <div style={buttonBox}>\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    const call = getCallByTag(tagId);\r\n                    call?.endCall && call.endCall();\r\n                  }}\r\n                  className=\"nav-btn user-profile-show btn-head-conference red\"\r\n                >\r\n                  <i className=\"ri-phone-line\"></i>\r\n                </Button>\r\n\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    if (getCallByTag(tagId)?.micMuted) {\r\n                      getCallByTag(tagId)?.unMuteMic();\r\n                    } else {\r\n                      getCallByTag(tagId)?.muteMic();\r\n                    }\r\n                    sendConfCommand(getCallByTag(tagId), \"tmute\");\r\n                  }}\r\n                  className={`nav-btn user-profile-show btn-head-conference ${\r\n                    getCallByTag(tagId)?.micMuted ? \"red\" : \"white\"\r\n                  }`}\r\n                >\r\n                  {!getCallByTag(tagId)?.micMuted ? (\r\n                    <i className=\"ri-mic-line\"></i>\r\n                  ) : (\r\n                    <i className=\"ri-mic-off-line\"></i>\r\n                  )}\r\n                </Button>\r\n\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    if (getCallByTag(tagId)?.hold)\r\n                      getCallByTag(tagId)?.unHoldCall();\r\n                    else getCallByTag(tagId)?.holdCall();\r\n                  }}\r\n                  className={`nav-btn user-profile-show btn-head-conference ${\r\n                    getCallByTag(tagId)?.hold ? \"red\" : \"white\"\r\n                  }`}\r\n                >\r\n                  {getCallByTag(tagId)?.hold ? (\r\n                    <i className=\"ri-play-line\"></i>\r\n                  ) : (\r\n                    <i className=\"ri-pause-line\"></i>\r\n                  )}\r\n                </Button>\r\n\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => {\r\n                    if (getCallByTag(tagId)?.sendingVideo) {\r\n                      if (getCallByTag(tagId)?.videoMuted) {\r\n                        getCallByTag(tagId)?.enableCam();\r\n                      } else {\r\n                        getCallByTag(tagId)?.disableCam();\r\n                      }\r\n                      sendConfCommand(getCallByTag(tagId), \"tvmute\");\r\n                    } else {\r\n                      alert(\r\n                        \"Mudança de tipo de chamada ainda não está disponivel :(\"\r\n                      );\r\n                    }\r\n                  }}\r\n                  className={`nav-btn user-profile-show btn-head-conference white ${\r\n                    getCallByTag(tagId)?.videoMuted ? \"red\" : \"white\"\r\n                  }`}\r\n                >\r\n                  {getCallByTag(tagId)?.videoMuted ? (\r\n                    <i className=\"ri-camera-off-line\"></i>\r\n                  ) : (\r\n                    <i className=\"ri-camera-line\"></i>\r\n                  )}\r\n                </Button>\r\n              </div>\r\n\r\n              <div style={plus}>\r\n                <span\r\n                  style={{ ...option, fontSize: \"14px\" }}\r\n                  onClick={() => {\r\n                    setWidthBox(widthBox + 100);\r\n                  }}\r\n                >\r\n                  <i\r\n                    style={{ backgroundColor: \"white\", borderRadius: 4 }}\r\n                    className=\"ri-add-line\"\r\n                  ></i>\r\n                </span>\r\n              </div>\r\n\r\n              <div style={minus}>\r\n                <span\r\n                  style={{ ...option, fontSize: \"14px\" }}\r\n                  onClick={() => {\r\n                    if (widthBox > 400) {\r\n                      setWidthBox(widthBox - 100);\r\n                    } else {\r\n                      Swal.fire({\r\n                        position: \"top-end\",\r\n                        icon: \"error\",\r\n                        title: t(\"Size can not be smaller\"),\r\n                        showConfirmButton: false,\r\n                        timer: 3000,\r\n                        customClass: {\r\n                          popup: \"swal-mini-popup\",\r\n                        },\r\n                      });\r\n                    }\r\n                  }}\r\n                >\r\n                  <i\r\n                    style={{ backgroundColor: \"white\", borderRadius: 4 }}\r\n                    className=\"ri-subtract-line\"\r\n                  ></i>\r\n                </span>\r\n              </div>\r\n            </>\r\n          )}\r\n          <video\r\n            style={video}\r\n            onMouseOver={toggleOpacity}\r\n            id={`remote-stream-${tagId}`}\r\n            hidden={!isVisible(tagId)}\r\n          />\r\n          <ul\r\n            style={{\r\n              position: \"absolute\",\r\n              background: \"white\",\r\n              border: \"1px solid #000\",\r\n              width: \"100%\",\r\n              minHeight: \"100px\",\r\n              left: 0,\r\n              bottom: \"-116px\",\r\n            }}\r\n          >\r\n            {getCallByTag(tagId)?.conferenceParticipants?.map((participant) => {\r\n              return (\r\n                <li key={participant.memberId}>\r\n                  {participant.callerName} -\r\n                  <span\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      setConferenceCommand({\r\n                        command: \"tmute\",\r\n                        conferenceId: participant.conferenceName,\r\n                        extraParam: `${participant.memberId}`,\r\n                      });\r\n                    }}\r\n                  >\r\n                    {!participant.mute ? (\r\n                      <i className=\"ri-mic-off-line\" />\r\n                    ) : (\r\n                      <i className=\"ri-mic-line\" />\r\n                    )}{\" \"}\r\n                    |\r\n                  </span>\r\n                  <span\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      setConferenceCommand({\r\n                        command: \"tvmute\",\r\n                        conferenceId: participant.conferenceName,\r\n                        extraParam: `${participant.memberId}`,\r\n                      });\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    {!participant.video ? (\r\n                      <i className=\"ri-camera-off-line\" />\r\n                    ) : (\r\n                      <i className=\"ri-camera-line\" />\r\n                    )}{\" \"}\r\n                  </span>\r\n                  {participant.talking ? (\r\n                    <i className=\"ri-volume-up-line\" />\r\n                  ) : (\r\n                    <i className=\"ri-volume-down-line\" />\r\n                  )}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoBox;\r\n"]},"metadata":{},"sourceType":"module"}