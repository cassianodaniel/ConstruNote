{"ast":null,"code":"import React from\"react\";import{Media,Button,Row,Col}from\"reactstrap\";import{Link}from\"react-router-dom\";import{useChat}from\"../contexts/ChatContext\";import{useTranslation}from\"react-i18next\";import ReactImageFallback from\"react-image-fallback\";import defaultAvatar from\"../assets/images/default.png\";import{onImgError}from\"../helpers/ImageUtils\";import{useGroup}from\"../contexts/GroupContext\";import{useContact}from\"../contexts/ContactContext\";import{zeroLeft}from\"../helpers/zeroLeft\";import{useCall}from\"../contexts/CallContext\";import CallStatus from\"../enuns/CallStatus\";var ChatHeadConference=function ChatHeadConference(_ref){var chatProfileSidebarOpen=_ref.chatProfileSidebarOpen,setChatProfileSidebarOpen=_ref.setChatProfileSidebarOpen;var _useChat=useChat(),chats=_useChat.chats,activeChat=_useChat.activeChat,setChats=_useChat.setChats,setShowChat=_useChat.setShowChat;var _useGroup=useGroup(),groups=_useGroup.groups,setGroups=_useGroup.setGroups;var _useContact=useContact(),contacts=_useContact.contacts,setContacts=_useContact.setContacts;var _useCall=useCall(),currentCalls=_useCall.currentCalls;var ChatProfileSidebar=function ChatProfileSidebar(){setChatProfileSidebarOpen(!chatProfileSidebarOpen);};function closeUserChat(){setShowChat(false);}function segundosParaHora(sec){var horas=Math.floor(sec/(60*60));var resto=sec%(60*60);var minutos=Math.floor(sec/60);resto%=60;var segundos=Math.ceil(resto);return\"\".concat(zeroLeft(horas,2),\":\").concat(zeroLeft(minutos,2),\":\").concat(zeroLeft(segundos,2));}var _useTranslation=useTranslation(),t=_useTranslation.t;var currentCall=Array.from(currentCalls.values()).find(function(call){var _call$callerObject;return((_call$callerObject=call.callerObject)===null||_call$callerObject===void 0?void 0:_call$callerObject.jid)===activeChat.jid;});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p-3 border-bottom\",style:{backgroundColor:\"#e6ebf5\",height:\"89px\"}},/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,{sm:4,xs:8},/*#__PURE__*/React.createElement(Media,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-block d-lg-none mr-2\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:function onClick(){return closeUserChat();},className:\"user-chat-remove text-muted font-size-16 p-2\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-arrow-left-s-line\"}))),activeChat.profilePicture?/*#__PURE__*/React.createElement(\"div\",{className:\"mr-3\"},/*#__PURE__*/React.createElement(ReactImageFallback,{src:activeChat.profilePicture,onError:function onError(){if(activeChat.jid.includes(\"@conference.\"))onImgError(chats,groups,contacts,setChats,setGroups,setContacts,activeChat);},style:{maxHeight:\"40px\",maxWidth:\"40px\"},fallbackImage:defaultAvatar,className:\"rounded-circle avatar-lg img-thumbnail\",alt:\"chatvia\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"chat-user-img align-self-center mr-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar-xs\"},/*#__PURE__*/React.createElement(\"span\",{className:\"avatar-title rounded-circle bg-soft-primary text-primary\"},activeChat.name.trim().charAt(0)))),/*#__PURE__*/React.createElement(Media,{body:true,className:\"overflow-hidden\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"font-size-16 mb-0 text-truncate\"},/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:function onClick(){return ChatProfileSidebar();},className:\"text-reset user-profile-show\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-1\"},/*#__PURE__*/React.createElement(\"div\",null,activeChat.name),(currentCall===null||currentCall===void 0?void 0:currentCall.isGroup)&&/*#__PURE__*/React.createElement(\"div\",{className:\"text-muted h7 mt-1\"},\"Kaline, Vinicius, Lucas, Romero, Daniel e 2+\"))))))),/*#__PURE__*/React.createElement(Col,{sm:8,xs:4},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-inline user-chat-nav text-right mb-0\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item d-none d-lg-inline-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center align-items-center\"},(currentCall===null||currentCall===void 0?void 0:currentCall.callStatus)===CallStatus.CONNECTING&&/*#__PURE__*/React.createElement(\"span\",{className:\"h4 mr-3\"},t(\"Connecting...\")),(currentCall===null||currentCall===void 0?void 0:currentCall.callStatus)===CallStatus.CALLING&&/*#__PURE__*/React.createElement(\"span\",{className:\"h4 mr-3\"},t(\"Calling...\")),(currentCall===null||currentCall===void 0?void 0:currentCall.callStatus)===CallStatus.ON_GOING&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{className:\"h4 mr-3\"},t(\"Call In Progress\")),/*#__PURE__*/React.createElement(\"span\",{className:\"h4 d-flex justify-content-center align-items-center\",style:{width:\"100px\"}},segundosParaHora((currentCall===null||currentCall===void 0?void 0:currentCall.seconds)?currentCall===null||currentCall===void 0?void 0:currentCall.seconds:0))))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item d-none d-lg-inline-block ml-3\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){return(currentCall===null||currentCall===void 0?void 0:currentCall.endCall)&&currentCall.endCall();},className:\"nav-btn user-profile-show btn-head-conference red\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-phone-line\"}))),!((currentCall===null||currentCall===void 0?void 0:currentCall.callStatus)===CallStatus.CONNECTING)&&!((currentCall===null||currentCall===void 0?void 0:currentCall.receivingVideo)||(currentCall===null||currentCall===void 0?void 0:currentCall.sendingVideo))&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item d-none d-lg-inline-block\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){if(currentCall===null||currentCall===void 0?void 0:currentCall.micMuted)currentCall===null||currentCall===void 0?void 0:currentCall.unMuteMic();else currentCall===null||currentCall===void 0?void 0:currentCall.muteMic();},className:\"nav-btn user-profile-show btn-head-conference \".concat((currentCall===null||currentCall===void 0?void 0:currentCall.micMuted)?\"red\":\"white\")},!(currentCall===null||currentCall===void 0?void 0:currentCall.micMuted)?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-mic-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-mic-off-line\"}))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item d-none d-lg-inline-block\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){if(currentCall===null||currentCall===void 0?void 0:currentCall.hold)currentCall===null||currentCall===void 0?void 0:currentCall.unHoldCall();else currentCall===null||currentCall===void 0?void 0:currentCall.holdCall();},className:\"nav-btn user-profile-show btn-head-conference \".concat((currentCall===null||currentCall===void 0?void 0:currentCall.hold)?\"red\":\"white\")},(currentCall===null||currentCall===void 0?void 0:currentCall.hold)?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-play-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-pause-line\"}))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item d-none d-lg-inline-block mr-3\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){if(currentCall===null||currentCall===void 0?void 0:currentCall.sendingVideo){if(currentCall===null||currentCall===void 0?void 0:currentCall.videoMuted)currentCall===null||currentCall===void 0?void 0:currentCall.enableCam();else currentCall===null||currentCall===void 0?void 0:currentCall.disableCam();}else{alert(\"Mudança de tipo de chamada ainda não está disponivel :(\");}},className:\"nav-btn user-profile-show btn-head-conference white \".concat((currentCall===null||currentCall===void 0?void 0:currentCall.videoMuted)?\"red\":\"white\")},(currentCall===null||currentCall===void 0?void 0:currentCall.videoMuted)?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-camera-off-line\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"ri-camera-line\"})))),/*#__PURE__*/React.createElement(\"li\",{className:\"list-inline-item d-none d-lg-inline-block\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"none\",onClick:function onClick(){return ChatProfileSidebar();},className:\"nav-btn user-profile-show d-flex justify-content-center align-items-center h-100\"},/*#__PURE__*/React.createElement(\"i\",{className:\"ri-user-2-line\"}))))))));};export default ChatHeadConference;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatHeadConference.tsx"],"names":["React","Media","Button","Row","Col","Link","useChat","useTranslation","ReactImageFallback","defaultAvatar","onImgError","useGroup","useContact","zeroLeft","useCall","CallStatus","ChatHeadConference","chatProfileSidebarOpen","setChatProfileSidebarOpen","chats","activeChat","setChats","setShowChat","groups","setGroups","contacts","setContacts","currentCalls","ChatProfileSidebar","closeUserChat","segundosParaHora","sec","horas","Math","floor","resto","minutos","segundos","ceil","t","currentCall","Array","from","values","find","call","callerObject","jid","backgroundColor","height","profilePicture","includes","maxHeight","maxWidth","name","trim","charAt","isGroup","callStatus","CONNECTING","CALLING","ON_GOING","width","seconds","endCall","receivingVideo","sendingVideo","micMuted","unMuteMic","muteMic","hold","unHoldCall","holdCall","videoMuted","enableCam","disableCam","alert"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Media, Button, Row, Col } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport ReactImageFallback from \"react-image-fallback\";\r\nimport defaultAvatar from \"../assets/images/default.png\";\r\nimport { onImgError } from \"../helpers/ImageUtils\";\r\nimport { useGroup } from \"../contexts/GroupContext\";\r\nimport { useContact } from \"../contexts/ContactContext\";\r\nimport { zeroLeft } from \"../helpers/zeroLeft\";\r\nimport { useCall } from \"../contexts/CallContext\";\r\nimport CallStatus from \"../enuns/CallStatus\";\r\n\r\ninterface IProps {\r\n  chatProfileSidebarOpen: boolean;\r\n  setChatProfileSidebarOpen(value: boolean): void;\r\n}\r\n\r\nconst ChatHeadConference: React.FC<IProps> = ({\r\n  chatProfileSidebarOpen,\r\n  setChatProfileSidebarOpen,\r\n}) => {\r\n  const { chats, activeChat, setChats, setShowChat } = useChat();\r\n  const { groups, setGroups } = useGroup();\r\n  const { contacts, setContacts } = useContact();\r\n  const { currentCalls } = useCall();\r\n\r\n  const ChatProfileSidebar = () => {\r\n    setChatProfileSidebarOpen(!chatProfileSidebarOpen);\r\n  };\r\n\r\n  function closeUserChat() {\r\n    setShowChat(false);\r\n  }\r\n\r\n  function segundosParaHora(sec: number) {\r\n    var horas = Math.floor(sec / (60 * 60));\r\n\r\n    var resto = sec % (60 * 60);\r\n    var minutos = Math.floor(sec / 60);\r\n\r\n    resto %= 60;\r\n    var segundos = Math.ceil(resto);\r\n\r\n    return `${zeroLeft(horas, 2)}:${zeroLeft(minutos, 2)}:${zeroLeft(\r\n      segundos,\r\n      2\r\n    )}`;\r\n  }\r\n\r\n  const { t } = useTranslation();\r\n  const currentCall = Array.from(currentCalls.values()).find(\r\n    (call) => call.callerObject?.jid === activeChat.jid\r\n  );\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        className=\"p-3 border-bottom\"\r\n        style={{ backgroundColor: \"#e6ebf5\", height: \"89px\" }}\r\n      >\r\n        <Row className=\"align-items-center\">\r\n          <Col sm={4} xs={8}>\r\n            <Media className=\"align-items-center\">\r\n              <div className=\"d-block d-lg-none mr-2\">\r\n                <Link\r\n                  to=\"#\"\r\n                  onClick={() => closeUserChat()}\r\n                  className=\"user-chat-remove text-muted font-size-16 p-2\"\r\n                >\r\n                  <i className=\"ri-arrow-left-s-line\"></i>\r\n                </Link>\r\n              </div>\r\n              {activeChat.profilePicture ? (\r\n                <div className=\"mr-3\">\r\n                  <ReactImageFallback\r\n                    src={activeChat.profilePicture}\r\n                    onError={() => {\r\n                      if (activeChat.jid.includes(\"@conference.\"))\r\n                        onImgError(\r\n                          chats,\r\n                          groups,\r\n                          contacts,\r\n                          setChats,\r\n                          setGroups,\r\n                          setContacts,\r\n                          activeChat\r\n                        );\r\n                    }}\r\n                    style={{ maxHeight: \"40px\", maxWidth: \"40px\" }}\r\n                    fallbackImage={defaultAvatar}\r\n                    className=\"rounded-circle avatar-lg img-thumbnail\"\r\n                    alt=\"chatvia\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"chat-user-img align-self-center mr-3\">\r\n                  <div className=\"avatar-xs\">\r\n                    <span className=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n                      {activeChat.name.trim().charAt(0)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <Media body className=\"overflow-hidden\">\r\n                <h5 className=\"font-size-16 mb-0 text-truncate\">\r\n                  <Link\r\n                    to=\"#\"\r\n                    onClick={() => ChatProfileSidebar()}\r\n                    className=\"text-reset user-profile-show\"\r\n                  >\r\n                    <div className=\"p-1\">\r\n                      <div>{activeChat.name}</div>\r\n                      {currentCall?.isGroup && (\r\n                        <div className=\"text-muted h7 mt-1\">\r\n                          Kaline, Vinicius, Lucas, Romero, Daniel e 2+\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </Link>\r\n                </h5>\r\n              </Media>\r\n            </Media>\r\n          </Col>\r\n          <Col sm={8} xs={4}>\r\n            <ul className=\"list-inline user-chat-nav text-right mb-0\">\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <div className=\"d-flex justify-content-center align-items-center\">\r\n                  {currentCall?.callStatus === CallStatus.CONNECTING && (\r\n                    <span className=\"h4 mr-3\">{t(\"Connecting...\")}</span>\r\n                  )}\r\n                  {currentCall?.callStatus === CallStatus.CALLING && (\r\n                    <span className=\"h4 mr-3\">{t(\"Calling...\")}</span>\r\n                  )}\r\n                  {currentCall?.callStatus === CallStatus.ON_GOING && (\r\n                    <>\r\n                      <span className=\"h4 mr-3\">{t(\"Call In Progress\")}</span>\r\n                      <span\r\n                        className=\"h4 d-flex justify-content-center align-items-center\"\r\n                        style={{ width: \"100px\" }}\r\n                      >\r\n                        {segundosParaHora(\r\n                          currentCall?.seconds ? currentCall?.seconds : 0\r\n                        )}\r\n                      </span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </li>\r\n              <li className=\"list-inline-item d-none d-lg-inline-block ml-3\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => currentCall?.endCall && currentCall.endCall()}\r\n                  className=\"nav-btn user-profile-show btn-head-conference red\"\r\n                >\r\n                  <i className=\"ri-phone-line\"></i>\r\n                </Button>\r\n              </li>\r\n\r\n              {!(currentCall?.callStatus === CallStatus.CONNECTING) &&\r\n                !(currentCall?.receivingVideo || currentCall?.sendingVideo) && (\r\n                  <>\r\n                    <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        color=\"none\"\r\n                        onClick={() => {\r\n                          if (currentCall?.micMuted) currentCall?.unMuteMic();\r\n                          else currentCall?.muteMic();\r\n                        }}\r\n                        className={`nav-btn user-profile-show btn-head-conference ${\r\n                          currentCall?.micMuted ? \"red\" : \"white\"\r\n                        }`}\r\n                      >\r\n                        {!currentCall?.micMuted ? (\r\n                          <i className=\"ri-mic-line\"></i>\r\n                        ) : (\r\n                          <i className=\"ri-mic-off-line\"></i>\r\n                        )}\r\n                      </Button>\r\n                    </li>\r\n\r\n                    <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        color=\"none\"\r\n                        onClick={() => {\r\n                          if (currentCall?.hold) currentCall?.unHoldCall();\r\n                          else currentCall?.holdCall();\r\n                        }}\r\n                        className={`nav-btn user-profile-show btn-head-conference ${\r\n                          currentCall?.hold ? \"red\" : \"white\"\r\n                        }`}\r\n                      >\r\n                        {currentCall?.hold ? (\r\n                          <i className=\"ri-play-line\"></i>\r\n                        ) : (\r\n                          <i className=\"ri-pause-line\"></i>\r\n                        )}\r\n                      </Button>\r\n                    </li>\r\n\r\n                    <li className=\"list-inline-item d-none d-lg-inline-block mr-3\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        color=\"none\"\r\n                        onClick={() => {\r\n                          if (currentCall?.sendingVideo) {\r\n                            if (currentCall?.videoMuted)\r\n                              currentCall?.enableCam();\r\n                            else currentCall?.disableCam();\r\n                          } else {\r\n                            alert(\r\n                              \"Mudança de tipo de chamada ainda não está disponivel :(\"\r\n                            );\r\n                          }\r\n                        }}\r\n                        className={`nav-btn user-profile-show btn-head-conference white ${\r\n                          currentCall?.videoMuted ? \"red\" : \"white\"\r\n                        }`}\r\n                      >\r\n                        {currentCall?.videoMuted ? (\r\n                          <i className=\"ri-camera-off-line\"></i>\r\n                        ) : (\r\n                          <i className=\"ri-camera-line\"></i>\r\n                        )}\r\n                      </Button>\r\n                    </li>\r\n                  </>\r\n                )}\r\n\r\n              <li className=\"list-inline-item d-none d-lg-inline-block\">\r\n                <Button\r\n                  type=\"button\"\r\n                  color=\"none\"\r\n                  onClick={() => ChatProfileSidebar()}\r\n                  className=\"nav-btn user-profile-show d-flex justify-content-center align-items-center h-100\"\r\n                >\r\n                  <i className=\"ri-user-2-line\"></i>\r\n                </Button>\r\n              </li>\r\n            </ul>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ChatHeadConference;\r\n"]},"metadata":{},"sourceType":"module"}