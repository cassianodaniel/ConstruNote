{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\DathApp\\\\ConstruNote\\\\src\\\\contexts\\\\GroupContext.tsx\";\nimport React, { createContext, useContext, useState } from \"react\";\nimport { useChat } from \"./ChatContext\"; //alias\n\nimport ChatType from \"../enuns/ChatType\";\nimport { useMainBox } from \"./MainBoxContext\";\nimport ScreenType from \"../enuns/ScreenType\";\nexport const GroupContext = createContext({});\nexport const GroupProvider = ({\n  children\n}) => {\n  const [groups, setGroups] = useState([]);\n  const {\n    activeChat,\n    chats,\n    setChats,\n    setActiveChat\n  } = useChat();\n  const [memberQuit, setMemberQuit] = useState();\n  const [groupIdOfLeaveRequest, setGroupIdOfLeaveRequest] = useState(\"\");\n  const [groupToRemoveContact, setGroupToRemoveContact] = useState();\n  const [removedMember, setRemovedMember] = useState();\n  const [members, setMembers] = useState(undefined);\n  const [toggleMemberRole, setToggleMemberRole] = useState(undefined);\n  const [changeGroupData, setChangeGroupData] = useState(undefined);\n  const [groupToCreate, setGroupToCreate] = useState(undefined);\n  const [groupJid, setGroupJid] = useState(undefined);\n  const {\n    setScreen\n  } = useMainBox();\n\n  const openGroup = obj => {\n    if ((activeChat === null || activeChat === void 0 ? void 0 : activeChat.jid) === obj.jid) return;\n    let find = false;\n    setChats(chats.map(item => {\n      if (item.jid === obj.jid) {\n        if (item.messageLoaded !== null) item.messageLoaded = item.messages.length >= 20 ? false : true;\n        setScreen(ScreenType.CHAT);\n        setActiveChat(item);\n        find = true;\n      }\n\n      return item;\n    }));\n\n    if (!find) {\n      let newChat = {\n        id: obj.jid.split(\"@\")[0],\n        jid: obj.jid,\n        name: obj.name,\n        profilePicture: obj.profilePicture,\n        messageLoaded: true,\n        unRead: 1,\n        chatType: ChatType.GROUP,\n        inputMessage: \"\",\n        isTyping: false,\n        messages: [],\n        favorite: obj.favorite,\n        added: obj.added,\n        members: obj.members,\n        groupId: obj.groupId,\n        mencioned: 0\n      };\n      setScreen(ScreenType.CHAT);\n      setActiveChat(newChat);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(GroupContext.Provider, {\n    value: {\n      openGroup,\n      groups,\n      setGroups,\n      memberQuit,\n      setMemberQuit,\n      groupIdOfLeaveRequest,\n      setGroupIdOfLeaveRequest,\n      groupToRemoveContact,\n      setGroupToRemoveContact,\n      removedMember,\n      setRemovedMember,\n      members,\n      setMembers,\n      toggleMemberRole,\n      setToggleMemberRole,\n      changeGroupData,\n      setChangeGroupData,\n      groupToCreate,\n      setGroupToCreate,\n      groupJid,\n      setGroupJid\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport function useGroup() {\n  return useContext(GroupContext);\n}","map":{"version":3,"sources":["C:/Users/Digivox/dev/DathApp/ConstruNote/src/contexts/GroupContext.tsx"],"names":["React","createContext","useContext","useState","useChat","ChatType","useMainBox","ScreenType","GroupContext","GroupProvider","children","groups","setGroups","activeChat","chats","setChats","setActiveChat","memberQuit","setMemberQuit","groupIdOfLeaveRequest","setGroupIdOfLeaveRequest","groupToRemoveContact","setGroupToRemoveContact","removedMember","setRemovedMember","members","setMembers","undefined","toggleMemberRole","setToggleMemberRole","changeGroupData","setChangeGroupData","groupToCreate","setGroupToCreate","groupJid","setGroupJid","setScreen","openGroup","obj","jid","find","map","item","messageLoaded","messages","length","CHAT","newChat","id","split","name","profilePicture","unRead","chatType","GROUP","inputMessage","isTyping","favorite","added","groupId","mencioned","useGroup"],"mappings":"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","sourcesContent":["import React, { createContext, useContext, useState } from \"react\";\r\nimport { useChat } from \"./ChatContext\";\r\n\r\n//alias\r\nimport IGroup from \"./../alias/IGroup\";\r\nimport ChatType from \"../enuns/ChatType\";\r\nimport IMember from \"../alias/IMember\";\r\nimport UserType from \"../enuns/UserType\";\r\nimport INewGroup from \"../alias/INewGroup\";\r\nimport { useMainBox } from \"./MainBoxContext\";\r\nimport ScreenType from \"../enuns/ScreenType\";\r\n\r\ninterface IGroupContextData {\r\n  openGroup(obj: IGroup): void;\r\n  groups: IGroup[];\r\n  setGroups(value: IGroup[]): void;\r\n  memberQuit: IMember | undefined;\r\n  setMemberQuit(value: IMember | undefined): void;\r\n  groupIdOfLeaveRequest: string;\r\n  setGroupIdOfLeaveRequest(value: string): void;\r\n  groupToRemoveContact: string | undefined;\r\n  setGroupToRemoveContact(value: string | undefined): void;\r\n  removedMember: IMember | undefined;\r\n  setRemovedMember(value: IMember | undefined): void;\r\n  members: IMember[] | undefined;\r\n  setMembers(value: IMember[] | undefined): void;\r\n  toggleMemberRole: IToggleMemberRole | undefined;\r\n  setToggleMemberRole(value: IToggleMemberRole | undefined): void;\r\n  changeGroupData: IChangeGroupData | undefined;\r\n  setChangeGroupData(value: IChangeGroupData | undefined): void;\r\n  groupToCreate: INewGroup | undefined;\r\n  setGroupToCreate(value: INewGroup | undefined): void;\r\n  groupJid: string | undefined;\r\n  setGroupJid(value: string | undefined): any;\r\n}\r\n\r\nexport const GroupContext = createContext<IGroupContextData>(\r\n  {} as IGroupContextData\r\n);\r\n\r\nexport interface IToggleMemberRole {\r\n  mbId: string;\r\n  gpId: string;\r\n  mbRole: UserType;\r\n  mb: IMember;\r\n}\r\n\r\nexport interface IChangeGroupData {\r\n  groupId: string | undefined;\r\n  groupName: string;\r\n  members: string[] | undefined;\r\n  description: string;\r\n}\r\n\r\nexport const GroupProvider: React.FC = ({ children }) => {\r\n  const [groups, setGroups] = useState<IGroup[]>([]);\r\n  const { activeChat, chats, setChats, setActiveChat } = useChat();\r\n  const [memberQuit, setMemberQuit] = useState<IMember | undefined>();\r\n  const [groupIdOfLeaveRequest, setGroupIdOfLeaveRequest] = useState<string>(\r\n    \"\"\r\n  );\r\n  const [groupToRemoveContact, setGroupToRemoveContact] = useState<\r\n    string | undefined\r\n  >();\r\n  const [removedMember, setRemovedMember] = useState<IMember | undefined>();\r\n  const [members, setMembers] = useState<IMember[] | undefined>(undefined);\r\n  const [toggleMemberRole, setToggleMemberRole] = useState<\r\n    IToggleMemberRole | undefined\r\n  >(undefined);\r\n  const [changeGroupData, setChangeGroupData] = useState<\r\n    IChangeGroupData | undefined\r\n  >(undefined);\r\n  const [groupToCreate, setGroupToCreate] = useState<INewGroup | undefined>(\r\n    undefined\r\n  );\r\n  const [groupJid, setGroupJid] = useState<string | undefined>(undefined);\r\n\r\n  const { setScreen } = useMainBox();\r\n\r\n  const openGroup = (obj: IGroup) => {\r\n    if (activeChat?.jid === obj.jid) return;\r\n    let find = false;\r\n\r\n    setChats(\r\n      chats.map((item) => {\r\n        if (item.jid === obj.jid) {\r\n          if (item.messageLoaded !== null)\r\n            item.messageLoaded = item.messages.length >= 20 ? false : true;\r\n          setScreen(ScreenType.CHAT);\r\n          setActiveChat(item);\r\n          find = true;\r\n        }\r\n        return item;\r\n      })\r\n    );\r\n\r\n    if (!find) {\r\n      let newChat = {\r\n        id: obj.jid.split(\"@\")[0],\r\n        jid: obj.jid,\r\n        name: obj.name,\r\n        profilePicture: obj.profilePicture,\r\n        messageLoaded: true,\r\n        unRead: 1,\r\n        chatType: ChatType.GROUP,\r\n        inputMessage: \"\",\r\n        isTyping: false,\r\n        messages: [],\r\n        favorite: obj.favorite,\r\n        added: obj.added,\r\n        members: obj.members,\r\n        groupId: obj.groupId,\r\n        mencioned: 0,\r\n      };\r\n      setScreen(ScreenType.CHAT);\r\n      setActiveChat(newChat);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <GroupContext.Provider\r\n      value={{\r\n        openGroup,\r\n        groups,\r\n        setGroups,\r\n        memberQuit,\r\n        setMemberQuit,\r\n        groupIdOfLeaveRequest,\r\n        setGroupIdOfLeaveRequest,\r\n        groupToRemoveContact,\r\n        setGroupToRemoveContact,\r\n        removedMember,\r\n        setRemovedMember,\r\n        members,\r\n        setMembers,\r\n        toggleMemberRole,\r\n        setToggleMemberRole,\r\n        changeGroupData,\r\n        setChangeGroupData,\r\n        groupToCreate,\r\n        setGroupToCreate,\r\n        groupJid,\r\n        setGroupJid,\r\n      }}\r\n    >\r\n      {children}\r\n    </GroupContext.Provider>\r\n  );\r\n};\r\n\r\nexport function useGroup() {\r\n  return useContext(GroupContext);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}