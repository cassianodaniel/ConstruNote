{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\components\\\\DragNDropUpload.tsx\";\nimport React, { useState } from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useChat } from \"../contexts/ChatContext\";\nimport DeliverStatus from \"../enuns/DeliverStatus\";\nimport ReadStatus from \"../enuns/ReadStatus\";\nimport './../assets/css/dragndrop.css';\nimport Swal from 'sweetalert2';\n\nconst DragNDropUpload = ({\n  addFile,\n  files\n}) => {\n  const {\n    chats,\n    setChats,\n    activeChat\n  } = useChat();\n  const {\n    user\n  } = useAuth();\n\n  const onAddMessage = file => {\n    setChats(chats.map(item => {\n      if (activeChat) if (item.id === (activeChat === null || activeChat === void 0 ? void 0 : activeChat.id)) {\n        item.messages.push({\n          id: `${item.messages.length + 1}`,\n          userName: user.name,\n          message: \"Carregando...\",\n          time: \"\",\n          isImageMessage: false,\n          isFileMessage: false,\n          isVideoMessage: false,\n          isAudioMessage: false,\n          fileUrl: \"\",\n          sendFile: file,\n          toUser: activeChat.id,\n          fromUser: user.id,\n          deliverStatus: DeliverStatus.SENDING,\n          readStatus: ReadStatus.UNREAD,\n          deliverTimestamp: \"\",\n          readTimestamp: \"\",\n          content: \"metadata\",\n          contentType: \"type\",\n          isReplyMessage: false,\n          isForwardMessage: false\n        });\n      }\n      return item;\n    }));\n  };\n\n  const [warningMsg, setWarningMsg] = useState(\"\");\n\n  const onDrop = (accepted, rejected) => {\n    if (Object.keys(rejected).length !== 0) {\n      const message = \"Please submit valid file type\";\n      setWarningMsg(message);\n    } else {\n      addFile(accepted);\n      setWarningMsg(\"\");\n      var blobPromise = new Promise((resolve, reject) => {\n        const reader = new window.FileReader();\n        reader.readAsDataURL(accepted[0]);\n\n        reader.onloadend = () => {\n          const base64data = reader.result;\n          resolve(base64data);\n        };\n      });\n      blobPromise.then(value => {});\n      accepted.forEach(file => {\n        if (file && file.size > 15728640) {\n          Swal.fire({\n            icon: 'error',\n            title: 'Oops...',\n            text: 'File size must be less than 15mb!',\n            footer: ''\n          });\n          return;\n        } else {\n          onAddMessage(file);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"drag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, warningMsg), /*#__PURE__*/React.createElement(Dropzone, {\n    multiple: false,\n    noClick: true\n    /* accept=\"image/*\" */\n    ,\n    onDrop: (accepted, rejected) => onDrop(accepted, rejected),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, ({\n    getRootProps,\n    getInputProps\n  }) => /*#__PURE__*/React.createElement(\"div\", Object.assign({}, getRootProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  })))));\n};\n\nexport default DragNDropUpload;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/DragNDropUpload.tsx"],"names":["React","useState","Dropzone","useAuth","useChat","DeliverStatus","ReadStatus","Swal","DragNDropUpload","addFile","files","chats","setChats","activeChat","user","onAddMessage","file","map","item","id","messages","push","length","userName","name","message","time","isImageMessage","isFileMessage","isVideoMessage","isAudioMessage","fileUrl","sendFile","toUser","fromUser","deliverStatus","SENDING","readStatus","UNREAD","deliverTimestamp","readTimestamp","content","contentType","isReplyMessage","isForwardMessage","warningMsg","setWarningMsg","onDrop","accepted","rejected","Object","keys","blobPromise","Promise","resolve","reject","reader","window","FileReader","readAsDataURL","onloadend","base64data","result","then","value","forEach","size","fire","icon","title","text","footer","getRootProps","getInputProps"],"mappings":"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","sourcesContent":["import { red } from \"@material-ui/core/colors\";\r\nimport { forEach } from \"lodash\";\r\nimport React, {useState} from \"react\";\r\nimport Dropzone from \"react-dropzone\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport DeliverStatus from \"../enuns/DeliverStatus\";\r\nimport ReadStatus from \"../enuns/ReadStatus\";\r\nimport './../assets/css/dragndrop.css'\r\nimport Swal from 'sweetalert2'\r\n\r\ninterface IProps{\r\n    addFile(value: any): any;\r\n    files: any;\r\n}\r\n\r\nconst DragNDropUpload: React.FC<IProps> = ({ addFile, files }) => {\r\n    const { chats, setChats, activeChat } = useChat();\r\n    const { user } = useAuth();\r\n\r\n    const onAddMessage = (file: File) => {\r\n        setChats(\r\n        chats.map((item) => {\r\n            if (activeChat)\r\n            if (item.id === activeChat?.id) {\r\n                item.messages.push({\r\n                id: `${item.messages.length + 1}`,\r\n                userName: user.name,\r\n                message: \"Carregando...\",\r\n                time: \"\",\r\n                isImageMessage: false,\r\n                isFileMessage: false,\r\n                isVideoMessage: false,\r\n                isAudioMessage: false,\r\n                fileUrl: \"\",\r\n                sendFile: file,\r\n                toUser: activeChat.id,\r\n                fromUser: user.id,\r\n                deliverStatus: DeliverStatus.SENDING,\r\n                readStatus: ReadStatus.UNREAD,\r\n                deliverTimestamp: \"\",\r\n                readTimestamp: \"\",\r\n                content: \"metadata\",\r\n                contentType: \"type\",\r\n                isReplyMessage: false,\r\n                isForwardMessage: false,\r\n                });\r\n            }\r\n            return item;\r\n        })\r\n        );\r\n    };\r\n    const [warningMsg, setWarningMsg] = useState(\"\");\r\n    const onDrop = (accepted: any, rejected: any) => {\r\n        if (Object.keys(rejected).length !== 0) {\r\n        const message = \"Please submit valid file type\";\r\n        setWarningMsg(message);\r\n        } else {\r\n            addFile(accepted);\r\n            setWarningMsg(\"\");\r\n            var blobPromise = new Promise((resolve, reject) => {\r\n                const reader = new window.FileReader();\r\n                reader.readAsDataURL(accepted[0]);\r\n                reader.onloadend = () => {\r\n                const base64data = reader.result;\r\n                resolve(base64data);\r\n                };\r\n            });\r\n            blobPromise.then(value => {\r\n            });\r\n            accepted.forEach((file: File) => {\r\n            if (file && file.size > 15728640) {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Oops...',\r\n                    text: 'File size must be less than 15mb!',\r\n                    footer: ''\r\n                  })\r\n                return;\r\n                }else{\r\n                    onAddMessage(file)\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n        return (\r\n        <div className=\"drag\">\r\n            <p>{warningMsg}</p>\r\n\r\n            <Dropzone\r\n            multiple={false}\r\n            noClick\r\n            /* accept=\"image/*\" */\r\n            onDrop={(accepted, rejected) => onDrop(accepted, rejected)}\r\n            >\r\n            {({getRootProps, getInputProps}) => (\r\n                <div {...getRootProps()}>\r\n                <input {...getInputProps()} />\r\n                </div>\r\n            )}\r\n            </Dropzone>\r\n        </div>\r\n        );\r\n    }\r\n\r\nexport default DragNDropUpload;\r\n"]},"metadata":{},"sourceType":"module"}