{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Digivox\\\\dev\\\\Digivox\\\\Refatoracao\\\\squad\\\\src\\\\components\\\\ChatProfileSidebar.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Card } from \"reactstrap\";\nimport SimpleBar from \"simplebar-react\";\nimport CustomCollapse from \"./CustomCollapse\";\nimport { useChat } from \"../contexts/ChatContext\";\nimport AttachedFilesTab from \"./AttachedFilesTab\";\nimport ReactImageFallback from \"react-image-fallback\";\nimport defaultAvatar from \"../assets/images/default.png\";\nimport { onImgError } from \"../helpers/ImageUtils\";\nimport { useGroup } from \"../contexts/GroupContext\";\nimport { useContact } from \"../contexts/ContactContext\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { useModal } from \"./../contexts/ModalContext\";\nimport ModalAddMember from \"./ModalAddMember\";\nimport { Input } from \"@material-ui/core\";\nimport UserStatusOnProfileSidebar from \"./UserStatusOnProfileSidebar\";\nimport ChangeGroupNameButton from \"./ChangeGroupNameButton\";\nimport LeaveGroupButton from './LeaveGroupButton';\nimport InfoHeadOnSidebar from './InfoHeadOnSidebar';\nimport GroupMember from './GroupMember';\n\nconst ChatProfileSidebar = ({\n  show,\n  setShow\n}) => {\n  var _activeChat$members, _activeChat$members2, _activeChat$members3, _activeChat$members4;\n\n  const {\n    user\n  } = useAuth();\n  const {\n    activeChat,\n    chats,\n    setChats,\n    setActiveChat\n  } = useChat();\n  const [targetStorage, setTargetStorage] = useState(\"\");\n  const {\n    groups,\n    setGroups\n  } = useGroup();\n  const {\n    contacts,\n    setContacts\n  } = useContact();\n  const {\n    setShowModalAddMember\n  } = useModal();\n  const [isOpen1, setIsOpen1] = useState(true);\n  console.log('Checar usabilidade', isOpen1);\n  const [isOpen2, setIsOpen2] = useState(false);\n\n  const toggleCollapse2 = () => {\n    setIsOpen1(false);\n    setIsOpen2(!isOpen2);\n  };\n\n  const closeUserSidebar = () => {\n    setShow(false);\n  };\n\n  const getAttachedFiles = () => {\n    if (show && activeChat.attachedFileList === undefined) {\n      setActiveChat({ ...activeChat,\n        attachedFileList: []\n      });\n    } else if (!show) {\n      setActiveChat({ ...activeChat,\n        attachedFileList: undefined\n      });\n    }\n  };\n\n  useEffect(getAttachedFiles, [show]);\n\n  const closeUserSidebarOnActiveChatChange = () => {\n    if (show && activeChat.attachedFileList === undefined) closeUserSidebar();\n  };\n\n  useEffect(closeUserSidebarOnActiveChatChange, [activeChat]);\n  const actualMember = (_activeChat$members = activeChat.members) === null || _activeChat$members === void 0 ? void 0 : _activeChat$members.find(member => member.userId === user.id);\n  const isAdmin = (actualMember === null || actualMember === void 0 ? void 0 : actualMember.role) === \"admin\"; //const groupAdmins = activeChat.members?.filter((member) => member.role === \"admin\");\n\n  const actualMembers = (_activeChat$members2 = activeChat.members) === null || _activeChat$members2 === void 0 ? void 0 : _activeChat$members2.map(mb => {\n    return mb.userId;\n  });\n  const isGroup = activeChat.groupId;\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: show ? \"block\" : \"none\"\n    },\n    className: \"user-profile-sidebar \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    style: {\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, isGroup && isAdmin && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-3 px-lg-4 pt-3 pt-lg-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-chat-nav text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"none\",\n    type: \"button\",\n    className: \"nav-btn\",\n    onClick: () => setShowModalAddMember(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-user-add-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(ModalAddMember, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }), isGroup && /*#__PURE__*/React.createElement(LeaveGroupButton, {\n    activeChat: activeChat,\n    actualMember: actualMember,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), isGroup && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-3 px-lg-4 pt-3 pt-lg-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-chat-nav text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"none\",\n    type: \"button\",\n    onClick: closeUserSidebar,\n    className: \"nav-btn\",\n    id: \"user-profile-hide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-close-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center p-4 border-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4 d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, !activeChat.profilePicture ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatar-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"avatar-title rounded-circle bg-soft-primary text-primary font-size-24\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, activeChat.name.trim().charAt(0))) : /*#__PURE__*/React.createElement(ReactImageFallback, {\n    src: activeChat.profilePicture,\n    onError: () => {\n      if (activeChat.jid.includes(\"@conference.\")) onImgError(chats, groups, contacts, setChats, setGroups, setContacts, activeChat);\n    },\n    fallbackImage: defaultAvatar,\n    className: \"rounded-circle avatar-lg img-thumbnail\",\n    alt: \"chatvia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, isGroup ? /*#__PURE__*/React.createElement(Input, {\n    inputProps: {\n      min: 0,\n      style: {\n        textAlign: \"center\"\n      }\n    },\n    placeholder: activeChat.name,\n    disableUnderline: true,\n    fullWidth: true,\n    onChange: e => setTargetStorage(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, activeChat.name)), isGroup && targetStorage.length > 0 ? /*#__PURE__*/React.createElement(ChangeGroupNameButton, {\n    targetStorage: targetStorage,\n    setTargetStorage: setTargetStorage,\n    actualMembers: actualMembers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }) : isGroup && /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ri-edit-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 24\n    }\n  }), activeChat.status && /*#__PURE__*/React.createElement(UserStatusOnProfileSidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(SimpleBar, {\n    style: {\n      maxHeight: \"100%\"\n    },\n    className: \"p-4 user-profile-desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"profile-user-accordion\",\n    className: \"custom-accordion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InfoHeadOnSidebar, {\n    activeChat: activeChat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }), activeChat.jid.includes(\"@conference.\") && /*#__PURE__*/React.createElement(Card, {\n    className: \"mb-1 shadow-none border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CustomCollapse, {\n    title: `Members (${(_activeChat$members3 = activeChat.members) === null || _activeChat$members3 === void 0 ? void 0 : _activeChat$members3.filter((cadaMembroDoArrayInicial, indexInicial, arrayInicial) => arrayInicial.findIndex(membroAComparar => cadaMembroDoArrayInicial.userId === membroAComparar.userId) === indexInicial).length})`,\n    iconClass: \"ri-group-line\",\n    isOpen: isOpen2,\n    toggleCollapse: toggleCollapse2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, (_activeChat$members4 = activeChat.members) === null || _activeChat$members4 === void 0 ? void 0 : _activeChat$members4.filter((item, index, arrayCompleto) => arrayCompleto.findIndex(item2 => item.userId === item2.userId) === index).map(member => /*#__PURE__*/React.createElement(GroupMember, {\n    defaultAvatar: defaultAvatar,\n    isAdmin: isAdmin,\n    member: member,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(AttachedFilesTab, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default ChatProfileSidebar;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatProfileSidebar.tsx"],"names":["React","useEffect","useState","Button","Card","SimpleBar","CustomCollapse","useChat","AttachedFilesTab","ReactImageFallback","defaultAvatar","onImgError","useGroup","useContact","useAuth","useModal","ModalAddMember","Input","UserStatusOnProfileSidebar","ChangeGroupNameButton","LeaveGroupButton","InfoHeadOnSidebar","GroupMember","ChatProfileSidebar","show","setShow","user","activeChat","chats","setChats","setActiveChat","targetStorage","setTargetStorage","groups","setGroups","contacts","setContacts","setShowModalAddMember","isOpen1","setIsOpen1","console","log","isOpen2","setIsOpen2","toggleCollapse2","closeUserSidebar","getAttachedFiles","attachedFileList","undefined","closeUserSidebarOnActiveChatChange","actualMember","members","find","member","userId","id","isAdmin","role","actualMembers","map","mb","isGroup","groupId","display","justifyContent","profilePicture","name","trim","charAt","jid","includes","min","style","textAlign","e","target","value","length","status","maxHeight","filter","cadaMembroDoArrayInicial","indexInicial","arrayInicial","findIndex","membroAComparar","item","index","arrayCompleto","item2"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Button, Card, Media, Badge } from \"reactstrap\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport CustomCollapse from \"./CustomCollapse\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport AttachedFilesTab from \"./AttachedFilesTab\";\r\nimport ReactImageFallback from \"react-image-fallback\";\r\nimport defaultAvatar from \"../assets/images/default.png\";\r\nimport { onImgError } from \"../helpers/ImageUtils\";\r\nimport { useGroup } from \"../contexts/GroupContext\";\r\nimport { useContact } from \"../contexts/ContactContext\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { useModal } from \"./../contexts/ModalContext\";\r\nimport ModalAddMember from \"./ModalAddMember\";\r\nimport { Input } from \"@material-ui/core\";\r\nimport UserStatusOnProfileSidebar from \"./UserStatusOnProfileSidebar\";\r\nimport ChangeGroupNameButton from \"./ChangeGroupNameButton\";\r\nimport LeaveGroupButton from './LeaveGroupButton';\r\nimport InfoHeadOnSidebar from './InfoHeadOnSidebar';\r\nimport GroupMember from './GroupMember';\r\ninterface IPros {\r\n  show: boolean;\r\n  setShow(value: boolean): void;\r\n}\r\n\r\nconst ChatProfileSidebar: React.FC<IPros> = ({ show, setShow }) => {\r\n  const { user } = useAuth();\r\n  const {\r\n    activeChat,\r\n    chats,\r\n    setChats,\r\n    setActiveChat,\r\n  } = useChat();\r\n  const [targetStorage, setTargetStorage] = useState(\"\");\r\n  const {\r\n    groups,\r\n    setGroups,\r\n  } = useGroup();\r\n  const {\r\n    contacts,\r\n    setContacts,\r\n  } = useContact();\r\n  const { setShowModalAddMember } = useModal();\r\n  const [isOpen1, setIsOpen1] = useState(true);\r\n  console.log('Checar usabilidade', isOpen1);\r\n  const [isOpen2, setIsOpen2] = useState(false);\r\n  const toggleCollapse2 = () => {\r\n    setIsOpen1(false);\r\n    setIsOpen2(!isOpen2);\r\n  };\r\n  const closeUserSidebar = () => {\r\n    setShow(false);\r\n  };\r\n  \r\n  const getAttachedFiles = () => {\r\n    if (show && activeChat.attachedFileList === undefined) {\r\n      setActiveChat({ ...activeChat, attachedFileList: [] });\r\n    } else if (!show) {\r\n      setActiveChat({ ...activeChat, attachedFileList: undefined });\r\n    }\r\n  };\r\n  useEffect(getAttachedFiles, [show]);\r\n  const closeUserSidebarOnActiveChatChange = () => {\r\n    if (show && activeChat.attachedFileList === undefined) closeUserSidebar();\r\n  };\r\n  useEffect(closeUserSidebarOnActiveChatChange, [activeChat]);\r\n  const actualMember = activeChat.members?.find(\r\n    (member) => member.userId === user.id\r\n  );\r\n  const isAdmin = actualMember?.role === \"admin\";\r\n  //const groupAdmins = activeChat.members?.filter((member) => member.role === \"admin\");\r\n  const actualMembers = activeChat.members?.map((mb) => {\r\n    return mb.userId;\r\n  });\r\n  const isGroup = activeChat.groupId;\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        style={{ display: show ? \"block\" : \"none\" }}\r\n        className=\"user-profile-sidebar \"\r\n      >\r\n        <div className=\"d-flex\" style={{ justifyContent: \"center\" }}>\r\n          {isGroup && isAdmin && (\r\n            <div className=\"px-3 px-lg-4 pt-3 pt-lg-4\">\r\n              <div className=\"user-chat-nav text-right\">\r\n                <Button\r\n                  color=\"none\"\r\n                  type=\"button\"\r\n                  className=\"nav-btn\"\r\n                  onClick={() => setShowModalAddMember(true)}\r\n                >\r\n                  <i className=\"ri-user-add-line\"></i>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <ModalAddMember />\r\n\r\n          {isGroup && (\r\n            <LeaveGroupButton activeChat={activeChat} actualMember={actualMember}/>\r\n          )}\r\n\r\n          {isGroup && (\r\n            <div className=\"px-3 px-lg-4 pt-3 pt-lg-4\">\r\n              <div className=\"user-chat-nav text-right\">\r\n                <Button\r\n                  color=\"none\"\r\n                  type=\"button\"\r\n                  onClick={closeUserSidebar}\r\n                  className=\"nav-btn\"\r\n                  id=\"user-profile-hide\"\r\n                >\r\n                  <i className=\"ri-close-line\"></i>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"text-center p-4 border-bottom\">\r\n          <div className=\"mb-4 d-flex justify-content-center\">\r\n            {!activeChat.profilePicture ? (\r\n              <div className=\"avatar-lg\">\r\n                <span className=\"avatar-title rounded-circle bg-soft-primary text-primary font-size-24\">\r\n                  {activeChat.name.trim().charAt(0)}\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <ReactImageFallback\r\n                src={activeChat.profilePicture}\r\n                onError={() => {\r\n                  if (activeChat.jid.includes(\"@conference.\"))\r\n                    onImgError(\r\n                      chats,\r\n                      groups,\r\n                      contacts,\r\n                      setChats,\r\n                      setGroups,\r\n                      setContacts,\r\n                      activeChat\r\n                    );\r\n                }}\r\n                fallbackImage={defaultAvatar}\r\n                className=\"rounded-circle avatar-lg img-thumbnail\"\r\n                alt=\"chatvia\"\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            {isGroup ? (\r\n              <Input\r\n                inputProps={{ min: 0, style: { textAlign: \"center\" } }}\r\n                placeholder={activeChat.name}\r\n                disableUnderline\r\n                fullWidth\r\n                onChange={(e) => setTargetStorage(e.target.value)}\r\n              />\r\n            ) : (\r\n              <div>{activeChat.name}</div>\r\n            )}\r\n          </div>\r\n          \r\n          {isGroup && targetStorage.length > 0 ? (\r\n            <ChangeGroupNameButton targetStorage={targetStorage} setTargetStorage={setTargetStorage} actualMembers={actualMembers}/>\r\n          ) : (\r\n            isGroup && <i className=\"ri-edit-line\"></i>\r\n          )}\r\n\r\n          {activeChat.status && (\r\n            <UserStatusOnProfileSidebar/>\r\n          )}\r\n\r\n        </div>\r\n\r\n        <SimpleBar\r\n          style={{ maxHeight: \"100%\" }}\r\n          className=\"p-4 user-profile-desc\"\r\n        >\r\n          <div id=\"profile-user-accordion\" className=\"custom-accordion\">\r\n            <InfoHeadOnSidebar activeChat={activeChat}/>\r\n\r\n            {activeChat.jid.includes(\"@conference.\") && (\r\n              <Card className=\"mb-1 shadow-none border\">\r\n                <CustomCollapse\r\n                  title={`Members (${activeChat.members?.filter((cadaMembroDoArrayInicial,indexInicial,arrayInicial) => arrayInicial.findIndex(membroAComparar => (cadaMembroDoArrayInicial.userId === membroAComparar.userId)) === indexInicial).length})`}\r\n                  iconClass=\"ri-group-line\"\r\n                  isOpen={isOpen2}\r\n                  toggleCollapse={toggleCollapse2}\r\n                >\r\n                  {activeChat.members?.filter((item,index,arrayCompleto) => arrayCompleto.findIndex(item2 => (item.userId === item2.userId)) === index).map((member) => (\r\n                    <GroupMember defaultAvatar={defaultAvatar} isAdmin={isAdmin} member={member}/>\r\n                  ))}\r\n                </CustomCollapse>\r\n              </Card>\r\n            )}\r\n            <AttachedFilesTab />\r\n          </div>\r\n        </SimpleBar>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ChatProfileSidebar;\r\n"]},"metadata":{},"sourceType":"module"}