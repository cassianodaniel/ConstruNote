{"ast":null,"code":"import React from\"react\";import{Media}from\"reactstrap\";import{Link}from\"react-router-dom\";//simplebar\nimport SimpleBar from\"simplebar-react\";//context\nimport{useChat}from\"./../contexts/ChatContext\";import{useContact}from\"./../contexts/ContactContext\";//alias\nimport goldenstar from\"./../assets/images/ic-star-fill.svg\";import star from\"./../assets/images/ic-star.svg\";import ReactImageFallback from\"react-image-fallback\";import defaultAvatar from\"../assets/images/default.png\";import{useGroup}from\"../contexts/GroupContext\";import{onImgError}from\"../helpers/ImageUtils\";import{useTranslation}from\"react-i18next\";import ChatListDates from\"./ChatListDates\";import{TextMessageTagParseNotClickable}from\"../helpers/TextMessageTagParseNotClickable\";var ChatList=function ChatList(_ref){var recentChatList=_ref.recentChatList;var _useChat=useChat(),activeChat=_useChat.activeChat,chats=_useChat.chats,setChats=_useChat.setChats,openChat=_useChat.openChat,setShowChat=_useChat.setShowChat;var _useContact=useContact(),contacts=_useContact.contacts,setContacts=_useContact.setContacts;var _useGroup=useGroup(),groups=_useGroup.groups,setGroups=_useGroup.setGroups;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useContact2=useContact(),setNewFavorite=_useContact2.setNewFavorite;var openChatAction=function openChatAction(chat){openChat(chat);setShowChat(true);};return/*#__PURE__*/React.createElement(SimpleBar,{style:{maxHeight:\"100%\"},className:\"chat-message-list\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-unstyled chat-list chat-user-list\",id:\"chat-list\"},recentChatList.map(function(chat,key){return chat.favorite&&/*#__PURE__*/React.createElement(\"li\",{key:key,id:\"conversation\"+key,className:\"\".concat(chat.isTyping?\"typing\":\"\",\" \").concat(chat.id===activeChat.id?\"active\":\"\")},/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:function onClick(){return openChatAction(chat);}},/*#__PURE__*/React.createElement(Media,null,!chat.profilePicture?/*#__PURE__*/React.createElement(\"div\",{className:\"chat-user-img \"+chat.status+\" align-self-center mr-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar-xs\"},/*#__PURE__*/React.createElement(\"span\",{className:\"avatar-title rounded-circle bg-soft-primary text-primary\"},chat.name.charAt(0))),chat.status&&/*#__PURE__*/React.createElement(\"span\",{className:\"user-status\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"chat-user-img \"+chat.status+\" align-self-center mr-3\"},/*#__PURE__*/React.createElement(ReactImageFallback,{src:chat.profilePicture,className:\"rounded-circle avatar-xs\",alt:\"chatvia\",fallbackImage:defaultAvatar,onError:function onError(){console.log(\"imgError\");if(chat.jid.includes(\"@conference.\"))onImgError(chats,groups,contacts,setChats,setGroups,setContacts,chat);}}),chat.status&&/*#__PURE__*/React.createElement(\"span\",{className:\"user-status\"})),/*#__PURE__*/React.createElement(Media,{body:true,className:\"overflow-hidden\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-truncate font-size-15 mb-1\"},chat.name),/*#__PURE__*/React.createElement(\"p\",{className:\"chat-user-message text-truncate mb-0\"},chat.isTyping?/*#__PURE__*/React.createElement(React.Fragment,null,t(\"typing\"),/*#__PURE__*/React.createElement(\"span\",{className:\"animate-typing\"},/*#__PURE__*/React.createElement(\"span\",{className:\"dot ml-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"dot ml-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"dot ml-1\"}))):/*#__PURE__*/React.createElement(React.Fragment,null,chat.messages&&chat.messages.length>0&&chat.messages[chat.messages.length-1].isImageMessage===true?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-image-fill align-middle mr-1\"}):null,chat.messages&&chat.messages.length>0&&chat.messages[chat.messages.length-1].isFileMessage===true?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-file-text-fill align-middle mr-1\"}):null,chat.messages&&chat.messages.length>0?TextMessageTagParseNotClickable(chat.messages[chat.messages.length-1].message):null))),/*#__PURE__*/React.createElement(\"img\",{alt:\"star\",onClick:function onClick(){setNewFavorite(chat);},src:chat.favorite?goldenstar:star,style:{position:\"relative\",right:2,top:2}}),/*#__PURE__*/React.createElement(\"div\",{className:\"font-size-11\"},/*#__PURE__*/React.createElement(ChatListDates,{chat:chat})),chat.unRead?/*#__PURE__*/React.createElement(\"div\",{className:\"unread-message\"},/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-soft-danger badge-pill\"},chat.unRead),/*#__PURE__*/React.createElement(\"audio\",{src:\"https://m.toqueparacelular.com.br/a/download3/iPhone_Ding.mp3\",autoPlay:true,hidden:true})):null)));}),/*#__PURE__*/React.createElement(\"hr\",{className:\"mx-3\"}),recentChatList.map(function(chat,key){return chat.favorite===false&&/*#__PURE__*/React.createElement(\"li\",{key:key,id:\"conversation\"+key,className:\"\".concat(chat.isTyping?\"typing\":\"\",\" \").concat(chat.id===activeChat.id?\"active\":\"\")},/*#__PURE__*/React.createElement(Link,{to:\"#\",onClick:function onClick(){return openChatAction(chat);}},/*#__PURE__*/React.createElement(Media,null,!chat.profilePicture?/*#__PURE__*/React.createElement(\"div\",{className:\"chat-user-img \"+chat.status+\" align-self-center mr-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar-xs\"},/*#__PURE__*/React.createElement(\"span\",{className:\"avatar-title rounded-circle bg-soft-primary text-primary\"},chat.name.charAt(0))),chat.status&&/*#__PURE__*/React.createElement(\"span\",{className:\"user-status\"})):/*#__PURE__*/React.createElement(\"div\",{className:\"chat-user-img \"+chat.status+\" align-self-center mr-3\"},/*#__PURE__*/React.createElement(ReactImageFallback,{src:chat.profilePicture,className:\"rounded-circle avatar-xs\",alt:\"chatvia\",fallbackImage:defaultAvatar,onError:function onError(){console.log(\"imgError\");if(chat.jid.includes(\"@conference.\"))onImgError(chats,groups,contacts,setChats,setGroups,setContacts,chat);}}),chat.status&&/*#__PURE__*/React.createElement(\"span\",{className:\"user-status\"})),/*#__PURE__*/React.createElement(Media,{body:true,className:\"overflow-hidden\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"text-truncate font-size-15 mb-1\"},chat.name),/*#__PURE__*/React.createElement(\"p\",{className:\"chat-user-message text-truncate mb-0\"},chat.isTyping?/*#__PURE__*/React.createElement(React.Fragment,null,t(\"typing\"),/*#__PURE__*/React.createElement(\"span\",{className:\"animate-typing\"},/*#__PURE__*/React.createElement(\"span\",{className:\"dot ml-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"dot ml-1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"dot ml-1\"}))):/*#__PURE__*/React.createElement(React.Fragment,null,chat.messages&&chat.messages.length>0&&chat.messages[chat.messages.length-1].isImageMessage===true?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-image-fill align-middle mr-1\"}):null,chat.messages&&chat.messages.length>0&&chat.messages[chat.messages.length-1].isFileMessage===true?/*#__PURE__*/React.createElement(\"i\",{className:\"ri-file-text-fill align-middle mr-1\"}):null,chat.messages&&chat.messages.length>0?TextMessageTagParseNotClickable(chat.messages[chat.messages.length-1].message):null))),/*#__PURE__*/React.createElement(\"img\",{alt:\"star\",onClick:function onClick(){setNewFavorite(chat);},src:chat.favorite?goldenstar:star,style:{position:\"relative\",right:2,top:2}}),/*#__PURE__*/React.createElement(\"div\",{className:\"font-size-11\"},/*#__PURE__*/React.createElement(ChatListDates,{chat:chat})),chat.unRead?/*#__PURE__*/React.createElement(\"div\",{className:\"unread-message\"},/*#__PURE__*/React.createElement(\"span\",{className:\"badge badge-soft-danger badge-pill\"},chat.unRead),/*#__PURE__*/React.createElement(\"audio\",{src:\"https://m.toqueparacelular.com.br/a/download3/iPhone_Ding.mp3\",autoPlay:true,hidden:true})):null)));})));};export default ChatList;","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/components/ChatList.tsx"],"names":["React","Media","Link","SimpleBar","useChat","useContact","ReactImageFallback","defaultAvatar","useGroup","onImgError","useTranslation","ChatListDates","TextMessageTagParseNotClickable","ChatList","recentChatList","activeChat","chats","setChats","openChat","setShowChat","contacts","setContacts","groups","setGroups","t","setNewFavorite","openChatAction","chat","maxHeight","map","key","favorite","isTyping","id","profilePicture","status","name","charAt","console","log","jid","includes","messages","length","isImageMessage","isFileMessage","message","goldenstar","star","position","right","top","unRead"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Media } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n//simplebar\r\nimport SimpleBar from \"simplebar-react\";\r\n\r\n//context\r\nimport { useChat } from \"./../contexts/ChatContext\";\r\nimport { useContact } from \"./../contexts/ContactContext\";\r\n\r\n//alias\r\nimport IChat from \"../alias/IChat\";\r\n\r\nimport goldenstar from \"./../assets/images/ic-star-fill.svg\";\r\nimport star from \"./../assets/images/ic-star.svg\";\r\nimport ReactImageFallback from \"react-image-fallback\";\r\nimport defaultAvatar from \"../assets/images/default.png\";\r\nimport { useGroup } from \"../contexts/GroupContext\";\r\nimport { onImgError } from \"../helpers/ImageUtils\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport ChatListDates from \"./ChatListDates\";\r\nimport { TextMessageTagParseNotClickable } from \"../helpers/TextMessageTagParseNotClickable\";\r\n\r\ninterface IProps {\r\n  recentChatList: IChat[];\r\n}\r\n\r\nconst ChatList: React.FC<IProps> = ({ recentChatList }) => {\r\n  const { activeChat, chats, setChats, openChat, setShowChat } = useChat();\r\n  const { contacts, setContacts } = useContact();\r\n  const { groups, setGroups } = useGroup();\r\n  const { t } = useTranslation();\r\n  const { setNewFavorite } = useContact();\r\n\r\n  const openChatAction = (chat: IChat) => {\r\n    openChat(chat);\r\n    setShowChat(true);\r\n  };\r\n\r\n  return (\r\n    <SimpleBar style={{ maxHeight: \"100%\" }} className=\"chat-message-list\">\r\n      <ul className=\"list-unstyled chat-list chat-user-list\" id=\"chat-list\">\r\n        {recentChatList.map(\r\n          (chat, key) =>\r\n            chat.favorite && (\r\n              <li\r\n                key={key}\r\n                id={\"conversation\" + key}\r\n                className={`${chat.isTyping ? \"typing\" : \"\"} ${\r\n                  chat.id === activeChat.id ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link to=\"#\" onClick={() => openChatAction(chat)}>\r\n                  <Media>\r\n                    {!chat.profilePicture ? (\r\n                      <div\r\n                        className={\r\n                          \"chat-user-img \" +\r\n                          chat.status +\r\n                          \" align-self-center mr-3\"\r\n                        }\r\n                      >\r\n                        <div className=\"avatar-xs\">\r\n                          <span className=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n                            {chat.name.charAt(0)}\r\n                          </span>\r\n                        </div>\r\n                        {chat.status && <span className=\"user-status\"></span>}\r\n                      </div>\r\n                    ) : (\r\n                      <div\r\n                        className={\r\n                          \"chat-user-img \" +\r\n                          chat.status +\r\n                          \" align-self-center mr-3\"\r\n                        }\r\n                      >\r\n                        <ReactImageFallback\r\n                          src={chat.profilePicture}\r\n                          className=\"rounded-circle avatar-xs\"\r\n                          alt=\"chatvia\"\r\n                          fallbackImage={defaultAvatar}\r\n                          onError={() => {\r\n                            console.log(\"imgError\");\r\n                            if (chat.jid.includes(\"@conference.\"))\r\n                              onImgError(\r\n                                chats,\r\n                                groups,\r\n                                contacts,\r\n                                setChats,\r\n                                setGroups,\r\n                                setContacts,\r\n                                chat\r\n                              );\r\n                          }}\r\n                        />\r\n                        {chat.status && <span className=\"user-status\"></span>}\r\n                      </div>\r\n                    )}\r\n\r\n                    <Media body className=\"overflow-hidden\">\r\n                      <h5 className=\"text-truncate font-size-15 mb-1\">\r\n                        {chat.name}\r\n                      </h5>\r\n                      <p className=\"chat-user-message text-truncate mb-0\">\r\n                        {chat.isTyping ? (\r\n                          <>\r\n                            {t(\"typing\")}\r\n                            <span className=\"animate-typing\">\r\n                              <span className=\"dot ml-1\"></span>\r\n                              <span className=\"dot ml-1\"></span>\r\n                              <span className=\"dot ml-1\"></span>\r\n                            </span>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            {chat.messages &&\r\n                            chat.messages.length > 0 &&\r\n                            chat.messages[chat.messages.length - 1]\r\n                              .isImageMessage === true ? (\r\n                              <i className=\"ri-image-fill align-middle mr-1\"></i>\r\n                            ) : null}\r\n                            {chat.messages &&\r\n                            chat.messages.length > 0 &&\r\n                            chat.messages[chat.messages.length - 1]\r\n                              .isFileMessage === true ? (\r\n                              <i className=\"ri-file-text-fill align-middle mr-1\"></i>\r\n                            ) : null}\r\n                            {chat.messages && chat.messages.length > 0\r\n                              ? TextMessageTagParseNotClickable((chat.messages[chat.messages.length - 1].message))\r\n                              : null}\r\n                          </>\r\n                        )}\r\n                      </p>\r\n                    </Media>\r\n\r\n                    <img\r\n                      alt=\"star\"\r\n                      onClick={() => {\r\n                        setNewFavorite(chat);\r\n                      }}\r\n                      src={chat.favorite ? goldenstar : star}\r\n                      style={{ position: \"relative\", right: 2, top: 2 }}\r\n                    />\r\n\r\n                    <div className=\"font-size-11\">\r\n                      <ChatListDates chat={chat}/>\r\n                    </div>\r\n                    {/* chat.messages.findIndex((message) => message.readStatus === ReadStatus.UNREAD  && */ \r\n                    \r\n                    /* chat.messages.find((message) => message.message.includes(`{\"userId\":\"`)) && message.readStatus === ReadStatus.UNREAD ? (<div>@</div>) : null} */}    \r\n                 \r\n                    {chat.unRead ? (\r\n                      <div className=\"unread-message\">\r\n                        <span className=\"badge badge-soft-danger badge-pill\">\r\n                          {chat.unRead}\r\n                        </span>\r\n                        <audio\r\n                          src=\"https://m.toqueparacelular.com.br/a/download3/iPhone_Ding.mp3\"\r\n                          autoPlay={true}\r\n                          hidden={true}\r\n                        />\r\n                      </div>\r\n                    ) : null}\r\n                  </Media>\r\n                </Link>\r\n              </li>\r\n            )\r\n        )}\r\n\r\n        <hr className=\"mx-3\" />\r\n\r\n        {recentChatList.map(\r\n          (chat, key) =>\r\n            chat.favorite === false && (\r\n              <li\r\n                key={key}\r\n                id={\"conversation\" + key}\r\n                className={`${chat.isTyping ? \"typing\" : \"\"} ${\r\n                  chat.id === activeChat.id ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link to=\"#\" onClick={() => openChatAction(chat)}>\r\n                <Media>\r\n                    {!chat.profilePicture ? (\r\n                      <div\r\n                        className={\r\n                          \"chat-user-img \" +\r\n                          chat.status +\r\n                          \" align-self-center mr-3\"\r\n                        }\r\n                      >\r\n                        <div className=\"avatar-xs\">\r\n                          <span className=\"avatar-title rounded-circle bg-soft-primary text-primary\">\r\n                            {chat.name.charAt(0)}\r\n                          </span>\r\n                        </div>\r\n                        {chat.status && <span className=\"user-status\"></span>}\r\n                      </div>\r\n                    ) : (\r\n                      <div\r\n                        className={\r\n                          \"chat-user-img \" +\r\n                          chat.status +\r\n                          \" align-self-center mr-3\"\r\n                        }\r\n                      >\r\n                        <ReactImageFallback\r\n                          src={chat.profilePicture}\r\n                          className=\"rounded-circle avatar-xs\"\r\n                          alt=\"chatvia\"\r\n                          fallbackImage={defaultAvatar}\r\n                          onError={() => {\r\n                            console.log(\"imgError\");\r\n                            if (chat.jid.includes(\"@conference.\"))\r\n                              onImgError(\r\n                                chats,\r\n                                groups,\r\n                                contacts,\r\n                                setChats,\r\n                                setGroups,\r\n                                setContacts,\r\n                                chat\r\n                              );\r\n                          }}\r\n                        />\r\n                        {chat.status && <span className=\"user-status\"></span>}\r\n                      </div>\r\n                    )}\r\n\r\n                    <Media body className=\"overflow-hidden\">\r\n                      <h5 className=\"text-truncate font-size-15 mb-1\">\r\n                        {chat.name}\r\n                      </h5>\r\n                      <p className=\"chat-user-message text-truncate mb-0\">\r\n                        {chat.isTyping ? (\r\n                          <>\r\n                            {t(\"typing\")}\r\n                            <span className=\"animate-typing\">\r\n                              <span className=\"dot ml-1\"></span>\r\n                              <span className=\"dot ml-1\"></span>\r\n                              <span className=\"dot ml-1\"></span>\r\n                            </span>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            {chat.messages &&\r\n                            chat.messages.length > 0 &&\r\n                            chat.messages[chat.messages.length - 1]\r\n                              .isImageMessage === true ? (\r\n                              <i className=\"ri-image-fill align-middle mr-1\"></i>\r\n                            ) : null}\r\n                            {chat.messages &&\r\n                            chat.messages.length > 0 &&\r\n                            chat.messages[chat.messages.length - 1]\r\n                              .isFileMessage === true ? (\r\n                              <i className=\"ri-file-text-fill align-middle mr-1\"></i>\r\n                            ) : null}\r\n                            {chat.messages && chat.messages.length > 0\r\n                              ? TextMessageTagParseNotClickable((chat.messages[chat.messages.length - 1].message))\r\n                              : null}\r\n                          </>\r\n                        )}\r\n                      </p>\r\n                    </Media>\r\n\r\n                    <img\r\n                      alt=\"star\"\r\n                      onClick={() => {\r\n                        setNewFavorite(chat);\r\n                      }}\r\n                      src={chat.favorite ? goldenstar : star}\r\n                      style={{ position: \"relative\", right: 2, top: 2 }}\r\n                    />\r\n\r\n                    <div className=\"font-size-11\">\r\n                      <ChatListDates chat={chat}/>\r\n                    </div>\r\n                    {/* chat.messages.findIndex((message) => message.readStatus === ReadStatus.UNREAD  && */ \r\n                    /* chat.messages.find((message) => message.message.includes(`{\"userId\":\"`)) ? (<div>@</div>) : null} */}\r\n\r\n                                        \r\n\r\n                    {chat.unRead ? (\r\n                      <div className=\"unread-message\">\r\n                        <span className=\"badge badge-soft-danger badge-pill\">\r\n                          {chat.unRead}\r\n                        </span>\r\n                        <audio\r\n                          src=\"https://m.toqueparacelular.com.br/a/download3/iPhone_Ding.mp3\"\r\n                          autoPlay={true}\r\n                          hidden={true}\r\n                        />\r\n                      </div>\r\n                    ) : null}\r\n                   \r\n                  </Media>\r\n                </Link>\r\n              </li>\r\n            )\r\n        )}\r\n      </ul>\r\n    </SimpleBar>\r\n  );\r\n};\r\n\r\nexport default ChatList;\r\n"]},"metadata":{},"sourceType":"module"}