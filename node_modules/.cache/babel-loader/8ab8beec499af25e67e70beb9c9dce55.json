{"ast":null,"code":"import { parseChats } from \"../utils/parseUtils\";\nexport default class ChatsBusiness {\n  constructor(api, contacts, groups) {\n    this.api = api;\n    this.contacts = contacts;\n    this.groups = groups;\n  }\n\n  list(callback) {\n    if (!this.api) return;\n    this.contacts.list(__ => {\n      this.groups.list(__ => {\n        this.api.getChats({\n          paramsUrl: {\n            limit: 5000\n          }\n        }, response => {\n          //Retornando os Chats\n          if (!this.api) {\n            return;\n          }\n\n          const returnChats = parseChats(response.chats, this.groups.getGroups(), this.contacts.getContacts());\n          callback(returnChats);\n        });\n      });\n    });\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Digivox/dev/Digivox/Refatoracao/squad/src/services/business/Chats.ts"],"names":["parseChats","ChatsBusiness","constructor","api","contacts","groups","list","callback","__","getChats","paramsUrl","limit","response","returnChats","chats","getGroups","getContacts"],"mappings":"AAEA,SAASA,UAAT,QAA2B,qBAA3B;AAQA,eAAe,MAAMC,aAAN,CAAoB;AACjCC,EAAAA,WAAW,CACDC,GADC,EAEDC,QAFC,EAGDC,MAHC,EAIT;AAAA,SAHQF,GAGR,GAHQA,GAGR;AAAA,SAFQC,QAER,GAFQA,QAER;AAAA,SADQC,MACR,GADQA,MACR;AAAE;;AACJC,EAAAA,IAAI,CAACC,QAAD,EAA0B;AAC5B,QAAI,CAAC,KAAKJ,GAAV,EAAe;AACf,SAAKC,QAAL,CAAcE,IAAd,CAAoBE,EAAD,IAAQ;AACzB,WAAKH,MAAL,CAAYC,IAAZ,CAAkBE,EAAD,IAAQ;AACvB,aAAKL,GAAL,CAASM,QAAT,CAAkB;AAAEC,UAAAA,SAAS,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT;AAAb,SAAlB,EAAmDC,QAAD,IAAmB;AACnE;AACA,cAAI,CAAC,KAAKT,GAAV,EAAe;AACb;AACD;;AACD,gBAAMU,WAAoB,GAAGb,UAAU,CACrCY,QAAQ,CAACE,KAD4B,EAErC,KAAKT,MAAL,CAAYU,SAAZ,EAFqC,EAGrC,KAAKX,QAAL,CAAcY,WAAd,EAHqC,CAAvC;AAKAT,UAAAA,QAAQ,CAACM,WAAD,CAAR;AACD,SAXD;AAYD,OAbD;AAcD,KAfD;AAgBD;;AAxBgC","sourcesContent":["import API from \"@digivox/apicommunicator\";\r\nimport IChat from \"../../alias/IChat\";\r\nimport { parseChats } from \"../utils/parseUtils\";\r\nimport ContactsBusiness from \"./Contacts\";\r\nimport GroupsBusiness from \"./Groups\";\r\n\r\ninterface ChatsCallBack {\r\n  (chats: IChat[]): void;\r\n}\r\nexport default interface ChatsBusiness {}\r\nexport default class ChatsBusiness {\r\n  constructor(\r\n    private api: API,\r\n    private contacts: ContactsBusiness,\r\n    private groups: GroupsBusiness\r\n  ) {}\r\n  list(callback: ChatsCallBack) {\r\n    if (!this.api) return;\r\n    this.contacts.list((__) => {\r\n      this.groups.list((__) => {\r\n        this.api.getChats({ paramsUrl: { limit: 5000 } }, (response: any) => {\r\n          //Retornando os Chats\r\n          if (!this.api) {\r\n            return;\r\n          }\r\n          const returnChats: IChat[] = parseChats(\r\n            response.chats,\r\n            this.groups.getGroups(),\r\n            this.contacts.getContacts()\r\n          );\r\n          callback(returnChats);\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}